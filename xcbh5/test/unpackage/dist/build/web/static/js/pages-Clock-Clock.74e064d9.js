(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-Clock-Clock"],{3160:function(e,t,n){"use strict";n.r(t);var i=n("736c"),a=n.n(i);for(var o in i)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(o);t["default"]=a.a},"54b5":function(e,t,n){"use strict";n.r(t);var i=n("d347"),a=n("3160");for(var o in a)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(o);n("9db0");var s=n("828b"),c=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,"89e0e136",null,!1,i["a"],void 0);t["default"]=c.exports},"702c":function(e,t,n){var i=n("c86c");t=i(!1),t.push([e.i,".me-container[data-v-89e0e136]{height:100vh;width:100%;box-sizing:border-box;color:#fff;z-index:1;display:flex;flex-direction:column;justify-content:flex-start}.content[data-v-89e0e136]{height:100%;width:90%;margin:auto auto;display:flex;flex-direction:column;justify-content:center;align-items:center}.state[data-v-89e0e136]{font-size:%?60?%;margin-bottom:%?100?%;color:#000}.clock[data-v-89e0e136]{height:5%;width:50%;font-size:%?50?%;border:1px solid #007aff;background-color:#007aff;border-radius:%?20?%;display:flex;justify-content:center;align-items:center}",""]),e.exports=t},"736c":function(e,t,n){"use strict";n("6a54");var i=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("2634")),o=i(n("2fdc")),s=n("4860"),c={data:function(){return{isSignedIn:!1,timestamp:"",time:""}},onLoad:function(e){e.time&&(this.time=e.time),this.signIn()},methods:{signIn:function(e){var t=this;return(0,o.default)((0,a.default)().mark((function n(){var i,o,c,r,u,l,d,f,h;return(0,a.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(n.prev=0,i=uni.getStorageSync("token"),i){n.next=5;break}return uni.showModal({title:"提示",content:"请登录后再打卡",showCancel:!1,success:function(){uni.navigateTo({url:"/pages/login/login"})}}),n.abrupt("return");case 5:if(o=Math.floor(Date.now()/1e3),c=new Date,r=c.toDateString(),u=new Date(1e3*t.time).toDateString(),r===u){n.next=12;break}return uni.showModal({title:"提示",content:"不能打卡未来日期！",showCancel:!1}),n.abrupt("return");case 12:if(!(t.time<o)){n.next=15;break}return uni.showModal({title:"提示",content:"无法对过去的时间打卡！",showCancel:!1}),n.abrupt("return");case 15:return l=Math.floor(new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate(),5,0,0).getTime()/1e3),d=Math.floor(new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate(),12,0,0).getTime()/1e3),f=Math.floor(new Date(c.getFullYear(),c.getMonth(),c.getDate(),20,30,0).getTime()/1e3),n.next=20,s.api.sign(e);case 20:h=n.sent,console.log(h.code),200===h.code?(t.isSignedIn=!0,o>=l&&o<d||o>=d&&o<f?o<t.time&&uni.showModal({content:h.msg,icon:"success",success:function(){setTimeout((function(){uni.switchTab({url:"/pages/index/index"})}),1e3)}}):uni.showModal({title:"提示",content:h.msg||"打卡超时，请稍后重试",showCancel:!1})):201===h.code?(t.isSignedIn=!1,uni.showModal({title:"提示",content:h.msg||"你今日打卡已经超过限定次数",showCancel:!1,success:function(){setTimeout((function(){uni.switchTab({url:"/pages/index/index"})}),1e3)}})):uni.showModal({title:"提示",content:h.msg||"操作失败，请稍后重试",showCancel:!1}),n.next=29;break;case 25:n.prev=25,n.t0=n["catch"](0),console.error("请求打卡接口出错:",n.t0),uni.showModal({title:"提示",content:"打卡失败，请稍后重试。",showCancel:!1});case 29:case"end":return n.stop()}}),n,null,[[0,25]])})))()}}};t.default=c},"9db0":function(e,t,n){"use strict";var i=n("e0f72"),a=n.n(i);a.a},d347:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){}));var i=function(){var e=this.$createElement,t=this._self._c||e;return t("v-uni-view",{staticClass:"me-container"},[t("v-uni-view",{staticClass:"content"},[t("v-uni-view",{staticClass:"state"},[this._v(this._s(this.isSignedIn?"已打卡":"此次未打卡"))])],1)],1)},a=[]},e0f72:function(e,t,n){var i=n("702c");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var a=n("967d").default;a("a00c6bbe",i,!0,{sourceMap:!1,shadowMode:!1})}}]);