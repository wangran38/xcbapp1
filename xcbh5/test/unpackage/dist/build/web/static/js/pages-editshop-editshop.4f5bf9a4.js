(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-editshop-editshop"],{"224b":function(e,t,i){"use strict";i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return a})),i.d(t,"a",(function(){}));var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"me-container"},[i("v-uni-view",{staticClass:"store"},[i("v-uni-text",{staticStyle:{margin:"10rpx 20rpx"}},[e._v("补充摊铺信息")]),i("v-uni-view",{staticClass:"Address"},[i("v-uni-text",[e._v("选择摊位:")]),i("v-uni-picker",{staticClass:"picker",attrs:{mode:"selector",range:e.pickerRange1,value:e.selectedCategoryIndex1},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.onMarketChange.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"picker-text"},[e._v(e._s(e.pickerRange1[e.selectedCategoryIndex1]))])],1)],1),i("v-uni-view",{staticClass:"BL1"},[i("v-uni-text",[e._v("摊主图片:")]),i("v-uni-view",{staticClass:"BLpicker",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.chooseImage.apply(void 0,arguments)}}},[e._v(e._s(e.isImageSelected?"已选择":"选择图片"))])],1),i("v-uni-view",{staticClass:"BL"},[i("v-uni-text",[e._v("营业执照:")]),i("v-uni-view",{staticClass:"BLpicker",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.chooseImage2.apply(void 0,arguments)}}},[e._v(e._s(e.isImageSelected2?"已选择":"选择图片"))])],1)],1),i("v-uni-button",{staticClass:"submit",attrs:{type:"primary",disabled:e.isSubmitting},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.submitForm.apply(void 0,arguments)}}},[e._v("提交")])],1)},a=[]},"2c12":function(e,t,i){"use strict";var n=i("6864"),a=i.n(n);a.a},"30f7":function(e,t,i){"use strict";i("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},i("7a76"),i("c9b5")},4431:function(e,t,i){var n=i("c86c");t=n(!1),t.push([e.i,".me-container[data-v-5001f9f4]{overflow:hidden;width:100%;box-sizing:border-box;padding:%?0?% %?40?% 0 %?40?%;color:#fff;z-index:1;background-color:#f8f8f8;display:flex;flex-direction:column;justify-content:center}.basicsinfo[data-v-5001f9f4]{height:%?250?%;width:100%;display:flex;flex-direction:column;justify-content:center;margin-top:%?20?%;border:1px solid #ccc}uni-text[data-v-5001f9f4]{color:#000;height:%?50?%;line-height:%?50?%}.item-info[data-v-5001f9f4]{height:%?200?%;width:100%;background-color:#fff}.name[data-v-5001f9f4]{height:%?100?%;display:flex;flex-direction:row;justify-content:space-between;align-items:center;border-bottom:1px solid #ccc;margin:0 %?20?%}.name>uni-text[data-v-5001f9f4]{height:%?100?%;width:%?200?%;line-height:%?100?%;text-align:left}.name>uni-input[data-v-5001f9f4]{height:%?100?%;width:100%;color:#000}.phone[data-v-5001f9f4]{height:%?100?%;display:flex;flex-direction:row;justify-content:space-between;align-items:center;margin:0 %?20?%}.phone>uni-text[data-v-5001f9f4]{height:%?100?%;width:%?200?%;line-height:%?100?%;text-align:left}.phone>uni-input[data-v-5001f9f4]{height:%?100?%;width:100%;color:#000}.store[data-v-5001f9f4]{height:%?385?%;width:100%;display:flex;flex-direction:column;justify-content:center;margin-top:%?30?%;border:1px solid #ccc}.storename[data-v-5001f9f4]{height:%?100?%;display:flex;flex-direction:row;justify-content:space-between;align-items:center;\n\t/* margin: 0 20rpx; */padding:0 %?20?%;border-bottom:1px solid #ccc;background-color:#fff}.storename>uni-text[data-v-5001f9f4]{height:%?100?%;width:%?200?%;line-height:%?100?%;text-align:left}.storename>uni-input[data-v-5001f9f4]{height:%?100?%;width:100%;color:#000}.area[data-v-5001f9f4]{height:%?100?%;display:flex;flex-direction:row;justify-content:space-between;align-items:center;\n\t/* margin: 0 20rpx; */padding:0 %?20?%;border-bottom:1px solid #ccc;background-color:#fff}.area>uni-text[data-v-5001f9f4]{height:%?100?%;width:%?200?%;line-height:%?100?%;text-align:left}.picker[data-v-5001f9f4]{height:%?100?%;width:100%;color:#000;line-height:%?100?%;box-sizing:border-box;overflow:hidden /* 隐藏超出部分 */}.picker-text[data-v-5001f9f4]{white-space:nowrap; /* 禁止换行 */overflow:hidden; /* 隐藏超出部分 */text-overflow:ellipsis; /* 超出部分显示省略号 */line-height:%?100?%;box-sizing:border-box\n  /* font-size: 30rpx; */\n  /* padding: 0 10rpx; */}.Address[data-v-5001f9f4]{height:%?100?%;display:flex;flex-direction:row;justify-content:space-between;align-items:center;\n\t/* margin: 0 20rpx; */padding:0 %?20?%;border-bottom:1px solid #ccc;background-color:#fff}.Address>uni-text[data-v-5001f9f4]{height:%?100?%;width:%?200?%;line-height:%?100?%;text-align:left}\n\n/* .Address>input {\n\theight: 100rpx;\n\twidth: 100%;\n\tcolor: black;\n} */.Category[data-v-5001f9f4]{height:%?100?%;display:flex;flex-direction:row;justify-content:space-between;align-items:center;\n\t/* margin: 0 20rpx; */padding:0 %?20?%;border-bottom:1px solid #ccc;background-color:#fff}.Category>uni-text[data-v-5001f9f4]{height:%?100?%;width:%?200?%;line-height:%?100?%;text-align:left}.Categorypicker[data-v-5001f9f4]{height:%?100?%;width:100%;color:#000;line-height:%?100?%;box-sizing:border-box}.stallphone[data-v-5001f9f4]{height:%?100?%;display:flex;flex-direction:row;justify-content:space-between;align-items:center;border-bottom:1px solid #ccc;\n\t/* margin: 0 20rpx; */padding:0 %?20?%;background-color:#fff}.stallphone>uni-text[data-v-5001f9f4]{height:%?100?%;width:%?200?%;line-height:%?100?%;text-align:left}.stallphone>uni-input[data-v-5001f9f4]{height:%?100?%;width:100%;color:#000}.BL[data-v-5001f9f4]{height:%?100?%;display:flex;flex-direction:row;justify-content:space-between;align-items:center;\n\t/* margin: 0 20rpx; */padding:0 %?20?%;border-bottom:1px solid #ccc;background-color:#fff}.BL>uni-text[data-v-5001f9f4]{height:%?100?%;width:%?200?%;line-height:%?100?%;text-align:left}.BLpicker[data-v-5001f9f4]{height:%?100?%;width:100%;color:#000;line-height:%?100?%;box-sizing:border-box}.BL1[data-v-5001f9f4]{height:%?100?%;display:flex;flex-direction:row;justify-content:space-between;align-items:center;\n\t/* margin: 0 20rpx; */padding:0 %?20?%;background-color:#fff;border-bottom:1px solid #ccc}.BL1>uni-text[data-v-5001f9f4]{height:%?100?%;width:%?200?%;line-height:%?100?%;text-align:left}.BLpicker[data-v-5001f9f4]{height:%?100?%;width:100%;color:#000;line-height:%?100?%;box-sizing:border-box}.illustrate[data-v-5001f9f4]{height:%?200?%;width:100%;display:flex;flex-direction:row;justify-content:space-between;align-items:left;\n\t/* margin: 0 20rpx; */padding:0 %?20?%;box-sizing:border-box;background-color:#fff}.illustrate>uni-text[data-v-5001f9f4]{height:%?200?%;width:%?200?%;max-width:%?200?%;\n\t/* 或者一个适合的最大宽度 */line-height:1.2;text-align:left;box-sizing:border-box;word-wrap:break-word;\n\t/* 允许长单词换行 */overflow-wrap:break-word;display:flex;align-items:center;border-right:1px solid #ccc}.illustrate>uni-textarea[data-v-5001f9f4]{height:%?100?%;width:100%;color:#000}.submit[data-v-5001f9f4]{overflow:hidden;width:100%;box-sizing:border-box;padding:%?0?% %?40?% 0 %?40?%;margin-top:%?30?%}",""]),e.exports=t},4733:function(e,t,i){"use strict";i("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(Array.isArray(e))return(0,n.default)(e)};var n=function(e){return e&&e.__esModule?e:{default:e}}(i("8d0b"))},6864:function(e,t,i){var n=i("4431");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=i("967d").default;a("e8fbf5fa",n,!0,{sourceMap:!1,shadowMode:!1})},"9cc2":function(e,t,i){"use strict";i.r(t);var n=i("aadb"),a=i.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){i.d(t,e,(function(){return n[e]}))}(o);t["default"]=a.a},aadb:function(e,t,i){"use strict";i("6a54");var n=i("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i("fd3c");var a=n(i("b7c7")),o=n(i("9b1b")),r=n(i("2634")),c=n(i("2fdc")),s=i("4860"),d=i("64af"),l={data:function(){return{marketList:[],pickerRange1:[],selectedCategoryIndex1:0,isImageSelected:!1,isImageSelected2:!1,facelogo:"",isSubmitting:!1,businesslogo:""}},mounted:function(){this.fetchMarketList()},methods:{customizeBack:function(){return(0,c.default)((0,r.default)().mark((function e(){var t;return(0,r.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,getCurrentPages();case 2:t=e.sent,console.log(t),t&&t.length>1?uni.navigateBack():history.back();case 5:case"end":return e.stop()}}),e)})))()},onMarketChange:function(e){this.selectedCategoryIndex1=e.detail.value},fetchMarketList:function(){var e=this;return(0,c.default)((0,r.default)().mark((function t(){var i,n,c;return(0,r.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,i={limit:100,page:1},t.next=4,s.api.getMyShops((0,o.default)({},i));case 4:n=t.sent,200===n.code?(c=n.data.listdata.map((function(e){return{id:e.id,title:e.title}})),e.marketList=c,e.pickerRange1=(0,a.default)(c.map((function(e){return e.title})))):console.error("Failed to fetch market list:",n.msg),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.error("Error fetching market list:",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},bindCategoryChange:function(e){var t=e.detail.value;this.selectedCategory=this.categoryList[t],this.category_id=this.categoryIdMap[this.selectedCategory]},chooseImage:function(){var e=this;uni.chooseImage({count:1,sizeType:["compressed","original"],sourceType:["album","camera"],success:function(t){var i=t.tempFilePaths;if(i.length>0){var n=(0,d.useUpload)({uploadPath:"/group1/upload",tempFilePaths:i[0],file:t.tempFiles[0]}),a=n.upload;n.request;a().then((function(t){var i=JSON.parse(t);e.facelogo=s.UPLOAD_URL+i.data.path,e.isImageSelected=!0}))}}})},chooseImage2:function(){var e=this;uni.chooseImage({count:1,sizeType:["compressed","original"],sourceType:["album","camera"],success:function(t){var i=t.tempFilePaths;if(i.length>0){var n=(0,d.useUpload)({uploadPath:"/group1/upload",tempFilePaths:i[0],file:t.tempFiles[0]}),a=n.upload;n.request;a().then((function(t){var i=JSON.parse(t);e.businesslogo=s.UPLOAD_URL+i.data.path,e.isImageSelected2=!0}))}}})},submitForm:function(){var e=this;return(0,c.default)((0,r.default)().mark((function t(){var i,n;return(0,r.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.isSubmitting){t.next=2;break}return t.abrupt("return");case 2:if(e.facelogo&&e.businesslogo&&e.marketList[e.selectedCategoryIndex1]){t.next=5;break}return uni.showToast({title:"请填写完整的信息",icon:"none"}),t.abrupt("return");case 5:return e.isSubmitting=!0,t.prev=6,i={facelogo:e.facelogo,id:e.marketList[e.selectedCategoryIndex1].id,businesslogo:e.businesslogo},t.next=10,s.api.editshop(i);case 10:n=t.sent,200===n.code?(uni.showToast({title:"补充成功",icon:"success",duration:2e3}),setTimeout((function(){e.customizeBack()}),2e3)):uni.showToast({title:n.msg||"提交失败",icon:"none"}),t.next=18;break;case 14:t.prev=14,t.t0=t["catch"](6),console.error("提交失败:",t.t0),uni.showToast({title:"提交失败",icon:"none"});case 18:return t.prev=18,e.isSubmitting=!1,t.finish(18);case 21:case"end":return t.stop()}}),t,null,[[6,14,18,21]])})))()}}};t.default=l},b7c7:function(e,t,i){"use strict";i("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,n.default)(e)||(0,a.default)(e)||(0,o.default)(e)||(0,r.default)()};var n=c(i("4733")),a=c(i("d14d")),o=c(i("5d6b")),r=c(i("30f7"));function c(e){return e&&e.__esModule?e:{default:e}}},d14d:function(e,t,i){"use strict";i("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},i("01a2"),i("e39c"),i("bf0f"),i("844d"),i("18f7"),i("de6c"),i("08eb")},f57e:function(e,t,i){"use strict";i.r(t);var n=i("224b"),a=i("9cc2");for(var o in a)["default"].indexOf(o)<0&&function(e){i.d(t,e,(function(){return a[e]}))}(o);i("2c12");var r=i("828b"),c=Object(r["a"])(a["default"],n["b"],n["c"],!1,null,"5001f9f4",null,!1,n["a"],void 0);t["default"]=c.exports}}]);