(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-index"],{"0829":function(t,e,a){"use strict";var n=a("8bdb"),i=a("ea07").entries;n({target:"Object",stat:!0},{entries:function(t){return i(t)}})},"12cd":function(t,e,a){"use strict";var n=a("dd38"),i=a.n(n);i.a},"1c88":function(t,e,a){"use strict";a.r(e);var n=a("4c07"),i=a("371d");for(var r in i)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(r);a("12cd");var o=a("828b"),s=Object(o["a"])(i["default"],n["b"],n["c"],!1,null,"06413d08",null,!1,n["a"],void 0);e["default"]=s.exports},"30f7":function(t,e,a){"use strict";a("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},a("7a76"),a("c9b5")},"339f":function(t,e,a){var n=a("c86c");e=n(!1),e.push([t.i,".container[data-v-06413d08]{overflow:hidden;overflow-y:hidden;display:flex;flex-direction:column;margin:%?2?% %?10?%}.locating[data-v-06413d08]{height:%?70?%;margin:%?10?% 0;display:flex;flex-direction:row;font-size:%?28?%;font-weight:600;line-height:%?70?%}.targeting[data-v-06413d08]{margin-left:%?30?%;color:#1296db}.current[data-v-06413d08]{margin-left:auto;color:#000;margin-right:%?30?%}.search[data-v-06413d08]{width:100%;\n\t/* position: relative; */display:flex;align-items:center}.sousuokuang[data-v-06413d08]{width:86%;\n\t/* position: relative; */display:flex;flex-direction:row;justify-content:center;align-items:center;border:1px solid #ff3030;border-radius:%?20?%;padding:%?10?% %?10?%}.search-icon[data-v-06413d08]{height:%?60?%;width:10%;line-height:%?60?%;\n\t/* position: absolute; */left:%?10?%\n\t/* background-color: #1296db; */}.uni-input[data-v-06413d08]{width:70%;height:%?60?%;line-height:%?60?%;\n\t/* height: 80rpx; */\n\t/* padding-left: 60rpx; */padding-right:%?100?%\n\t/* box-sizing: border-box; */\n\t/* background-color: #FF3030; */}.searchbt[data-v-06413d08]{height:%?60?%;\n\t/* line-height: 60rpx; */text-align:center;width:%?150?%;border:none;background-color:#ff3030;color:#fff;border-radius:%?25?%;font-size:%?24?%}.buycar[data-v-06413d08]{flex:1;\n\t/* width: 100rpx; */\n\t/* margin: 0 10rpx; */margin-left:auto;height:%?80?%;line-height:%?80?%;text-align:center}.uni-margin-wrap[data-v-06413d08]{\n\t/* height: 110rpx; */}.swiper[data-v-06413d08]{display:flex;flex-direction:row;justify-content:center;align-items:center;height:100%;white-space:nowrap}.swiper-item[data-v-06413d08]{display:inline-block;height:100%;width:%?120?%;margin:0 %?20?%;text-align:center;vertical-align:middle}.item-title[data-v-06413d08]{display:inline-block;box-sizing:border-box;vertical-align:middle;line-height:%?120?%}.classify[data-v-06413d08]{margin-top:10%;font-size:%?35?%;font-weight:600}.classify.selected[data-v-06413d08]{color:#1296db}.Stallholder[data-v-06413d08]{\n\t/* background-color: red; */display:flex;flex-direction:column;height:75vh\n\t/* overflow-y: auto; */}.Stallholder-content[data-v-06413d08]{padding:%?10?%;box-sizing:border-box;-webkit-column-count:2;column-count:2;-webkit-column-gap:%?20?%;column-gap:%?20?%}.Stallholder-item[data-v-06413d08]{width:100%;height:%?480?%;-webkit-column-break-inside:avoid;break-inside:avoid;margin-bottom:%?20?%;background-color:#fff;display:flex;flex-direction:column;align-items:center}.Stallholder-content .Stallholder-item[data-v-06413d08]:nth-child(2n+1){height:%?510?%}.Stallholder-content .Stallholder-item[data-v-06413d08]:nth-child(3n+1){height:%?540?%}.standimg[data-v-06413d08]{\n\t/* height: 300rpx; */width:100%;border-radius:%?20?%\n\t/* background-color: #1296db; */}.standtitle[data-v-06413d08]{width:90%;height:%?100?%;line-height:%?70?%;\n\t/* background-color: white; */\n\t/* background-color: antiquewhite; */overflow:hidden;\n\t/* 隐藏超出的内容 */white-space:nowrap;\n\t/* 强制不换行 */text-overflow:ellipsis;\n\t/* 显示省略号 */font-size:%?30?%\n\t/* background-color: aqua; */}.loading[data-v-06413d08]{text-align:center;padding:%?20?%;color:#999}",""]),t.exports=e},"371d":function(t,e,a){"use strict";a.r(e);var n=a("f2ea"),i=a.n(n);for(var r in n)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(r);e["default"]=i.a},4733:function(t,e,a){"use strict";a("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){if(Array.isArray(t))return(0,n.default)(t)};var n=function(t){return t&&t.__esModule?t:{default:t}}(a("8d0b"))},"4c07":function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return r})),a.d(e,"a",(function(){return n}));var n={uniIcons:a("a7f4").default},i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"container"},[a("v-uni-view",{staticClass:"locating"},[a("v-uni-view",{staticClass:"targeting",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toindex1.apply(void 0,arguments)}}},[a("uni-icons",{attrs:{type:"location-filled",size:"25",color:"#007aff"}})],1),a("v-uni-view",{staticClass:"current "},[t._v(t._s(t.marketName?t.marketName:"暂未选中市场"))])],1),a("v-uni-view",{staticClass:"search"},[a("v-uni-view",{staticClass:"sousuokuang"},[a("uni-icons",{staticClass:"search-icon",attrs:{type:"search",size:"20",color:"#999"}}),a("v-uni-input",{staticClass:"uni-input",attrs:{placeholder:"请输入搜索条件"},model:{value:t.searchParams.title,callback:function(e){t.$set(t.searchParams,"title",e)},expression:"searchParams.title"}}),a("v-uni-button",{staticClass:"searchbt",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.reloadData.apply(void 0,arguments)}}},[t._v("搜索")])],1),a("uni-icons",{staticClass:"buycar",attrs:{type:"scan",size:"75rpx"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.scan.apply(void 0,arguments)}}})],1),a("v-uni-view",{staticClass:"uni-margin-wrap"},[a("v-uni-scroll-view",{staticClass:"swiper",attrs:{"scroll-x":"true","scroll-y":"false","show-scrollbar":"false"}},t._l(t.categories,(function(e){return a("v-uni-view",{key:e.id,staticClass:"swiper-item",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.filterByCategory(e.id)}}},[a("v-uni-view",{staticClass:"item-title"},[a("v-uni-text",{class:["classify",{selected:e.id===t.selectedCategoryId}]},[t._v(t._s(e.title))])],1)],1)})),1)],1),a("v-uni-scroll-view",{staticClass:"Stallholder",attrs:{"scroll-y":"true","scroll-x":"false"},on:{scrolltolower:function(e){arguments[0]=e=t.$handleEvent(e),t.handleScrollToLower.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"Stallholder-content"},t._l(t.pageData,(function(e){return a("v-uni-view",{key:e.id,staticClass:"Stallholder-item",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.navigateToShopDetails(e.id)}}},[t.isloaded?a("v-uni-image",{staticClass:"standimg",attrs:{"lazy-load":!0,src:e.logo?e.logo:"../../static/defaultLogo.png",mode:"aspectFill"}}):t._e(),a("v-uni-view",{staticClass:"standtitle"},[t._v("地区名称："+t._s(e.area_name))]),a("v-uni-view",{staticClass:"standtitle"},[t._v("摊位名称："+t._s(e.title))]),a("v-uni-view",{staticClass:"standtitle"},[t._v("所售类目："+t._s(e.category_name||"未知类目"))])],1)})),1),t.pageLoading?a("v-uni-view",{staticClass:"loading"},[t._v("加载中...")]):t._e(),t.hasMore?t._e():a("v-uni-view",{staticClass:"loading"},[t._v("没有更多了")])],1)],1)},r=[]},5075:function(t,e,a){"use strict";var n=a("ae5c"),i=a("71e9"),r=a("e7e3"),o=a("52df"),s=a("81a7"),l=a("1fc1"),c=a("1297"),u=a("d67c"),d=a("5112"),f=a("7e91"),h=TypeError,v=function(t,e){this.stopped=t,this.result=e},g=v.prototype;t.exports=function(t,e,a){var p,m,w,b,x,y,k,_=a&&a.that,S=!(!a||!a.AS_ENTRIES),C=!(!a||!a.IS_RECORD),D=!(!a||!a.IS_ITERATOR),P=!(!a||!a.INTERRUPTED),M=n(e,_),E=function(t){return p&&f(p,"normal",t),new v(!0,t)},I=function(t){return S?(r(t),P?M(t[0],t[1],E):M(t[0],t[1])):P?M(t,E):M(t)};if(C)p=t.iterator;else if(D)p=t;else{if(m=d(t),!m)throw new h(o(t)+" is not iterable");if(s(m)){for(w=0,b=l(t);b>w;w++)if(x=I(t[w]),x&&c(g,x))return x;return new v(!1)}p=u(t,m)}y=C?t.next:p.next;while(!(k=i(y,p)).done){try{x=I(k.value)}catch(O){f(p,"throw",O)}if("object"==typeof x&&x&&c(g,x))return x}return new v(!1)}},b7c7:function(t,e,a){"use strict";a("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return(0,n.default)(t)||(0,i.default)(t)||(0,r.default)(t)||(0,o.default)()};var n=s(a("4733")),i=s(a("d14d")),r=s(a("5d6b")),o=s(a("30f7"));function s(t){return t&&t.__esModule?t:{default:t}}},d14d:function(t,e,a){"use strict";a("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)},a("01a2"),a("e39c"),a("bf0f"),a("844d"),a("18f7"),a("de6c"),a("08eb")},dd38:function(t,e,a){var n=a("339f");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=a("967d").default;i("528f5734",n,!0,{sourceMap:!1,shadowMode:!1})},f2ea:function(t,e,a){"use strict";a("6a54");var n=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("c223"),a("e966"),a("aa77"),a("bf0f"),a("9db6"),a("5ef2");var i=n(a("b7c7")),r=n(a("2634")),o=n(a("2fdc")),s=n(a("9b1b")),l=a("4860"),c=n(a("fce1")),u=a("8f59"),d={data:function(){return{selectedCategoryId:"",categories:[],pageData:[],currentMarketName:"",searchParams:{title:"",category_id:"",market_id:""},isloaded:!1,marketName:"",initReques:!1}},computed:(0,s.default)({},(0,u.mapState)("location",["selectStatus"])),onLoad:function(){this.initPage()},onShow:function(){var t=this;return(0,o.default)((0,r.default)().mark((function e(){return(0,r.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.selectStatus&&(t.initPage(),t.setStatus());case 1:case"end":return e.stop()}}),e)})))()},onPullDownRefresh:function(){setTimeout((function(){uni.stopPullDownRefresh()}),1e3)},mixins:[c.default],methods:(0,s.default)((0,s.default)({},(0,u.mapMutations)("location",["setStatus"])),{},{fetchData:function(t){return(0,o.default)((0,r.default)().mark((function e(){var a;return(0,r.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l.api.marketShopList(t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))()},initPage:function(){this.isloaded=!0,this.selectedCategoryId=0,this.fetchMarketName(),this.fetchCategories(),this.setDefaultMarketId(),this.reloadData();var t=uni.getStorageSync("userSelection");this.marketName=t.marketName},setDefaultMarketId:function(){var t=uni.getStorageSync("userSelection"),e=t.market_id;this.searchParams.market_id=e},fetchCategories:function(){var t=this;return(0,o.default)((0,r.default)().mark((function e(){var a;return(0,r.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l.api.cglist();case 2:a=e.sent,t.categories=[{id:0,title:"全选"}].concat((0,i.default)(a.data.listdata||[]));case 4:case"end":return e.stop()}}),e)})))()},filterByCategory:function(t){var e=this;return(0,o.default)((0,r.default)().mark((function a(){return(0,r.default)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:e.searchParams.category_id=t,e.selectedCategoryId=t,e.reloadData();case 3:case"end":return a.stop()}}),a)})))()},fetchMarketName:function(){var t=this;return(0,o.default)((0,r.default)().mark((function e(){var a,n,i,o,s;return(0,r.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,a=uni.getStorageSync("userSelection"),a){e.next=5;break}return console.warn("未找到 userSelection"),e.abrupt("return");case 5:if(n=a.market_id,i=a.area_id,n&&i){e.next=9;break}return console.warn("未找到市场 ID 或区域 ID"),e.abrupt("return");case 9:return e.next=11,l.api.marketlist(parseInt(i));case 11:o=e.sent,s=o.data.listdata.find((function(t){return t.id===parseInt(n)})),s?t.currentMarketName=s.marketname||"未知市场":(console.warn("未找到对应的市场"),t.currentMarketName="未知市场"),e.next=19;break;case 16:e.prev=16,e.t0=e["catch"](0),console.error("获取市场名称失败:",e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})))()},navigateToShopDetails:function(t){uni.navigateTo({url:"/pages/ShopDetails/ShopDetails?id=".concat(t)})},toindex1:function(){uni.switchTab({url:"/pages/index1/index1"})},scan:function(){uni.scanCode({onlyFromCamera:!1,success:function(t){var e=t.result;if(e.startsWith("http")){console.log("这是一个有效的 URL");var a=decodeURIComponent(e);console.log("解码后的 URL:",a);var n=a.indexOf("#");if(-1!==n){var i=a.substring(n+1);console.log("提取到的页面路径:",i),uni.navigateTo({url:"/"+i})}else console.warn("未能解析到有效的页面路径")}else console.warn("扫码结果不是有效的链接:",e)},fail:function(t){console.error("扫码失败:",t)}})}})};e.default=d},fb2c:function(t,e,a){"use strict";var n=a("8bdb"),i=a("5075"),r=a("85f7");n({target:"Object",stat:!0},{fromEntries:function(t){var e={};return i(t,(function(t,a){r(e,t,a)}),{AS_ENTRIES:!0}),e}})},fce1:function(t,e,a){"use strict";a("6a54");var n=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(a("2634")),r=n(a("2fdc")),o=n(a("9b1b")),s=n(a("5de6"));a("fb2c"),a("8f71"),a("bf0f"),a("0829"),a("7a76"),a("c9b5"),a("c223");var l={data:function(){return{page:1,limit:10,totalnum:0,pageData:[],pageLoading:!1,hasMore:!0,searchParams:{}}},computed:{queryParams:function(){var t=Object.fromEntries(Object.entries(this.searchParams).filter((function(t){var e=(0,s.default)(t,2),a=(e[0],e[1]);return""!==a})));return(0,o.default)({page:this.page,limit:this.limit,isshow:1},t)}},methods:{loadPageData:function(){var t=this;return(0,r.default)((0,i.default)().mark((function e(){var a;return(0,i.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.hasMore&&!t.pageLoading){e.next=2;break}return e.abrupt("return");case 2:return t.pageLoading=!0,e.prev=3,e.next=6,t.fetchData(t.queryParams);case 6:a=e.sent,t.querySuccess(a),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](3),t.handleFetchError(e.t0);case 13:return e.prev=13,t.pageLoading=!1,e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[3,10,13,16]])})))()},fetchData:function(t){return(0,r.default)((0,i.default)().mark((function t(){return(0,i.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:throw new Error("fetchData 方法未实现");case 1:case"end":return t.stop()}}),t)})))()},querySuccess:function(t){null!==t&&void 0!==t&&t.listdata&&(this.pageData=1===this.page?t.listdata:this.pageData.concat(t.listdata),this.totalnum=t.totalnum||0,this.hasMore=this.pageData.length<this.totalnum)},handleScrollToLower:function(){!this.pageLoading&&this.hasMore&&(this.page+=1,this.loadPageData())},handleFetchError:function(t){console.error("Error loading data:",t)},resetPagination:function(){this.page=1,this.pageData=[],this.totalnum=0,this.hasMore=!0},reloadData:function(){this.resetPagination(),this.loadPageData()}}};e.default=l}}]);