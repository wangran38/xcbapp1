(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-editshop-editshop"],{"0094":function(e,t,n){"use strict";var i,a=n("da84"),r=n("e330"),o=n("6964"),c=n("f183"),s=n("6d61"),u=n("acac"),d=n("861d"),l=n("4fadd"),f=n("69f3").enforce,h=n("cdce"),p=!a.ActiveXObject&&"ActiveXObject"in a,g=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},b=s("WeakMap",g,u);if(h&&p){i=u.getConstructor(g,"WeakMap",!0),c.enable();var v=b.prototype,x=r(v["delete"]),m=r(v.has),w=r(v.get),y=r(v.set);o(v,{delete:function(e){if(d(e)&&!l(e)){var t=f(this);return t.frozen||(t.frozen=new i),x(this,e)||t.frozen["delete"](e)}return x(this,e)},has:function(e){if(d(e)&&!l(e)){var t=f(this);return t.frozen||(t.frozen=new i),m(this,e)||t.frozen.has(e)}return m(this,e)},get:function(e){if(d(e)&&!l(e)){var t=f(this);return t.frozen||(t.frozen=new i),m(this,e)?w(this,e):t.frozen.get(e)}return w(this,e)},set:function(e,t){if(d(e)&&!l(e)){var n=f(this);n.frozen||(n.frozen=new i),m(this,e)?y(this,e,t):n.frozen.set(e,t)}else y(this,e,t);return this}})}},"09e3":function(e,t,n){"use strict";n.r(t);var i=n("2b02"),a=n.n(i);for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);t["default"]=a.a},"10d1":function(e,t,n){n("0094")},"25da":function(e,t,n){var i=n("945c");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var a=n("4f06").default;a("7198b130",i,!0,{sourceMap:!1,shadowMode:!1})},2909:function(e,t,n){"use strict";n("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,i.default)(e)||(0,a.default)(e)||(0,r.default)(e)||(0,o.default)()};var i=c(n("6005")),a=c(n("db90")),r=c(n("06c5")),o=c(n("3427"));function c(e){return e&&e.__esModule?e:{default:e}}},"2b02":function(e,t,n){"use strict";n("7a82");var i=n("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("d81d");var a=i(n("2909")),r=i(n("5530")),o=i(n("c7eb")),c=i(n("1da1")),s=n("6c0c"),u=n("a15b"),d={data:function(){return{marketList:[],pickerRange1:[],selectedCategoryIndex1:0,isImageSelected:!1,isImageSelected2:!1,facelogo:"",isSubmitting:!1,businesslogo:""}},mounted:function(){this.fetchMarketList()},methods:{customizeBack:function(){return(0,c.default)((0,o.default)().mark((function e(){var t;return(0,o.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,getCurrentPages();case 2:t=e.sent,console.log(t),t&&t.length>1?uni.navigateBack():history.back();case 5:case"end":return e.stop()}}),e)})))()},onMarketChange:function(e){this.selectedCategoryIndex1=e.detail.value},fetchMarketList:function(){var e=this;return(0,c.default)((0,o.default)().mark((function t(){var n,i,c;return(0,o.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,n={limit:100,page:1},t.next=4,s.api.getMyShops((0,r.default)({},n));case 4:i=t.sent,200===i.code?(c=i.data.listdata.map((function(e){return{id:e.id,title:e.title}})),e.marketList=c,e.pickerRange1=(0,a.default)(c.map((function(e){return e.title})))):console.error("Failed to fetch market list:",i.msg),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.error("Error fetching market list:",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},bindCategoryChange:function(e){var t=e.detail.value;this.selectedCategory=this.categoryList[t],this.category_id=this.categoryIdMap[this.selectedCategory]},chooseImage:function(){var e=this;uni.chooseImage({count:1,sizeType:["compressed","original"],sourceType:["album","camera"],success:function(t){var n=t.tempFilePaths;if(n.length>0){console.log(n);var i=(0,u.useUpload)({uploadPath:"/group1/upload",tempFilePaths:n[0]}),a=i.upload;i.request;a().then((function(t){var n=JSON.parse(t);e.facelogo=s.UPLOAD_URL+n.data.path,e.isImageSelected=!0}))}}})},chooseImage2:function(){var e=this;uni.chooseImage({count:1,sizeType:["compressed","original"],sourceType:["album","camera"],success:function(t){var n=t.tempFilePaths;if(n.length>0){console.log(n);var i=(0,u.useUpload)({uploadPath:"/group1/upload",tempFilePaths:n[0]}),a=i.upload;i.request;a().then((function(t){var n=JSON.parse(t);e.businesslogo=s.UPLOAD_URL+n.data.path,e.isImageSelected2=!0}))}}})},submitForm:function(){var e=this;return(0,c.default)((0,o.default)().mark((function t(){var n,i;return(0,o.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.isSubmitting){t.next=2;break}return t.abrupt("return");case 2:if(e.facelogo&&e.businesslogo&&e.marketList[e.selectedCategoryIndex1]){t.next=5;break}return uni.showToast({title:"请填写完整的信息",icon:"none"}),t.abrupt("return");case 5:return e.isSubmitting=!0,t.prev=6,n={facelogo:e.facelogo,id:e.marketList[e.selectedCategoryIndex1].id,businesslogo:e.businesslogo},t.next=10,s.api.editshop(n);case 10:i=t.sent,200===i.code?(uni.showToast({title:"补充成功",icon:"success",duration:2e3}),setTimeout((function(){e.customizeBack()}),2e3)):uni.showToast({title:i.msg||"提交失败",icon:"none"}),t.next=18;break;case 14:t.prev=14,t.t0=t["catch"](6),console.error("提交失败:",t.t0),uni.showToast({title:"提交失败",icon:"none"});case 18:return t.prev=18,e.isSubmitting=!1,t.finish(18);case 21:case"end":return t.stop()}}),t,null,[[6,14,18,21]])})))()}}};t.default=d},3427:function(e,t,n){"use strict";n("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},n("d9e2"),n("d401")},"4fadd":function(e,t,n){var i=n("d039"),a=n("861d"),r=n("c6b6"),o=n("d86b"),c=Object.isExtensible,s=i((function(){c(1)}));e.exports=s||o?function(e){return!!a(e)&&((!o||"ArrayBuffer"!=r(e))&&(!c||c(e)))}:c},"525c":function(e,t,n){"use strict";var i=n("25da"),a=n.n(i);a.a},6005:function(e,t,n){"use strict";n("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(Array.isArray(e))return(0,i.default)(e)};var i=function(e){return e&&e.__esModule?e:{default:e}}(n("6b75"))},"6d61":function(e,t,n){"use strict";var i=n("23e7"),a=n("da84"),r=n("e330"),o=n("94ca"),c=n("cb2d"),s=n("f183"),u=n("2266"),d=n("19aa"),l=n("1626"),f=n("7234"),h=n("861d"),p=n("d039"),g=n("1c7e"),b=n("d44e"),v=n("7156");e.exports=function(e,t,n){var x=-1!==e.indexOf("Map"),m=-1!==e.indexOf("Weak"),w=x?"set":"add",y=a[e],k=y&&y.prototype,_=y,j={},O=function(e){var t=r(k[e]);c(k,e,"add"==e?function(e){return t(this,0===e?0:e),this}:"delete"==e?function(e){return!(m&&!h(e))&&t(this,0===e?0:e)}:"get"==e?function(e){return m&&!h(e)?void 0:t(this,0===e?0:e)}:"has"==e?function(e){return!(m&&!h(e))&&t(this,0===e?0:e)}:function(e,n){return t(this,0===e?0:e,n),this})},z=o(e,!l(y)||!(m||k.forEach&&!p((function(){(new y).entries().next()}))));if(z)_=n.getConstructor(t,e,x,w),s.enable();else if(o(e,!0)){var C=new _,P=C[w](m?{}:-0,1)!=C,I=p((function(){C.has(1)})),L=g((function(e){new y(e)})),M=!m&&p((function(){var e=new y,t=5;while(t--)e[w](t,t);return!e.has(-0)}));L||(_=t((function(e,t){d(e,k);var n=v(new y,e,_);return f(t)||u(t,n[w],{that:n,AS_ENTRIES:x}),n})),_.prototype=k,k.constructor=_),(I||M)&&(O("delete"),O("has"),x&&O("get")),(M||P)&&O(w),m&&k.clear&&delete k.clear}return j[e]=_,i({global:!0,constructor:!0,forced:_!=y},j),b(_,e),m||n.setStrong(_,e,x),_}},"945c":function(e,t,n){var i=n("24fb");t=i(!1),t.push([e.i,".me-container[data-v-07ba1162]{overflow:hidden;width:100%;box-sizing:border-box;padding:%?0?% %?40?% 0 %?40?%;color:#fff;z-index:1;background-color:#f8f8f8;display:flex;flex-direction:column;justify-content:center}.basicsinfo[data-v-07ba1162]{height:%?250?%;width:100%;display:flex;flex-direction:column;justify-content:center;margin-top:%?20?%;border:1px solid #ccc}uni-text[data-v-07ba1162]{color:#000;height:%?50?%;line-height:%?50?%}.item-info[data-v-07ba1162]{height:%?200?%;width:100%;background-color:#fff}.name[data-v-07ba1162]{height:%?100?%;display:flex;flex-direction:row;justify-content:space-between;align-items:center;border-bottom:1px solid #ccc;margin:0 %?20?%}.name>uni-text[data-v-07ba1162]{height:%?100?%;width:%?200?%;line-height:%?100?%;text-align:left}.name>uni-input[data-v-07ba1162]{height:%?100?%;width:100%;color:#000}.phone[data-v-07ba1162]{height:%?100?%;display:flex;flex-direction:row;justify-content:space-between;align-items:center;margin:0 %?20?%}.phone>uni-text[data-v-07ba1162]{height:%?100?%;width:%?200?%;line-height:%?100?%;text-align:left}.phone>uni-input[data-v-07ba1162]{height:%?100?%;width:100%;color:#000}.store[data-v-07ba1162]{height:%?385?%;width:100%;display:flex;flex-direction:column;justify-content:center;margin-top:%?30?%;border:1px solid #ccc}.storename[data-v-07ba1162]{height:%?100?%;display:flex;flex-direction:row;justify-content:space-between;align-items:center;\n\t/* margin: 0 20rpx; */padding:0 %?20?%;border-bottom:1px solid #ccc;background-color:#fff}.storename>uni-text[data-v-07ba1162]{height:%?100?%;width:%?200?%;line-height:%?100?%;text-align:left}.storename>uni-input[data-v-07ba1162]{height:%?100?%;width:100%;color:#000}.area[data-v-07ba1162]{height:%?100?%;display:flex;flex-direction:row;justify-content:space-between;align-items:center;\n\t/* margin: 0 20rpx; */padding:0 %?20?%;border-bottom:1px solid #ccc;background-color:#fff}.area>uni-text[data-v-07ba1162]{height:%?100?%;width:%?200?%;line-height:%?100?%;text-align:left}.picker[data-v-07ba1162]{height:%?100?%;width:100%;color:#000;line-height:%?100?%;box-sizing:border-box;overflow:hidden /* 隐藏超出部分 */}.picker-text[data-v-07ba1162]{white-space:nowrap; /* 禁止换行 */overflow:hidden; /* 隐藏超出部分 */text-overflow:ellipsis; /* 超出部分显示省略号 */line-height:%?100?%;box-sizing:border-box\n  /* font-size: 30rpx; */\n  /* padding: 0 10rpx; */}.Address[data-v-07ba1162]{height:%?100?%;display:flex;flex-direction:row;justify-content:space-between;align-items:center;\n\t/* margin: 0 20rpx; */padding:0 %?20?%;border-bottom:1px solid #ccc;background-color:#fff}.Address>uni-text[data-v-07ba1162]{height:%?100?%;width:%?200?%;line-height:%?100?%;text-align:left}\n\n/* .Address>input {\n\theight: 100rpx;\n\twidth: 100%;\n\tcolor: black;\n} */.Category[data-v-07ba1162]{height:%?100?%;display:flex;flex-direction:row;justify-content:space-between;align-items:center;\n\t/* margin: 0 20rpx; */padding:0 %?20?%;border-bottom:1px solid #ccc;background-color:#fff}.Category>uni-text[data-v-07ba1162]{height:%?100?%;width:%?200?%;line-height:%?100?%;text-align:left}.Categorypicker[data-v-07ba1162]{height:%?100?%;width:100%;color:#000;line-height:%?100?%;box-sizing:border-box}.stallphone[data-v-07ba1162]{height:%?100?%;display:flex;flex-direction:row;justify-content:space-between;align-items:center;border-bottom:1px solid #ccc;\n\t/* margin: 0 20rpx; */padding:0 %?20?%;background-color:#fff}.stallphone>uni-text[data-v-07ba1162]{height:%?100?%;width:%?200?%;line-height:%?100?%;text-align:left}.stallphone>uni-input[data-v-07ba1162]{height:%?100?%;width:100%;color:#000}.BL[data-v-07ba1162]{height:%?100?%;display:flex;flex-direction:row;justify-content:space-between;align-items:center;\n\t/* margin: 0 20rpx; */padding:0 %?20?%;border-bottom:1px solid #ccc;background-color:#fff}.BL>uni-text[data-v-07ba1162]{height:%?100?%;width:%?200?%;line-height:%?100?%;text-align:left}.BLpicker[data-v-07ba1162]{height:%?100?%;width:100%;color:#000;line-height:%?100?%;box-sizing:border-box}.BL1[data-v-07ba1162]{height:%?100?%;display:flex;flex-direction:row;justify-content:space-between;align-items:center;\n\t/* margin: 0 20rpx; */padding:0 %?20?%;background-color:#fff;border-bottom:1px solid #ccc}.BL1>uni-text[data-v-07ba1162]{height:%?100?%;width:%?200?%;line-height:%?100?%;text-align:left}.BLpicker[data-v-07ba1162]{height:%?100?%;width:100%;color:#000;line-height:%?100?%;box-sizing:border-box}.illustrate[data-v-07ba1162]{height:%?200?%;width:100%;display:flex;flex-direction:row;justify-content:space-between;align-items:left;\n\t/* margin: 0 20rpx; */padding:0 %?20?%;box-sizing:border-box;background-color:#fff}.illustrate>uni-text[data-v-07ba1162]{height:%?200?%;width:%?200?%;max-width:%?200?%;\n\t/* 或者一个适合的最大宽度 */line-height:1.2;text-align:left;box-sizing:border-box;word-wrap:break-word;\n\t/* 允许长单词换行 */overflow-wrap:break-word;display:flex;align-items:center;border-right:1px solid #ccc}.illustrate>uni-textarea[data-v-07ba1162]{height:%?100?%;width:100%;color:#000}.submit[data-v-07ba1162]{overflow:hidden;width:100%;box-sizing:border-box;padding:%?0?% %?40?% 0 %?40?%;margin-top:%?30?%}",""]),e.exports=t},a15b:function(e,t,n){"use strict";n("7a82");var i=n("dbce").default,a=n("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.useUpload=void 0;var r=a(n("c7eb")),o=a(n("1da1"));n("d3b7");var c=i(n("6c0c"));t.useUpload=function(e){var t=e.uploadPath,n=e.tempFilePaths,i=(e.FormData,e.file);return{upload:function(){return new Promise(function(){var e=(0,o.default)((0,r.default)().mark((function e(a,o){return(0,r.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:uni.showLoading({title:"上传中",mask:!0}),uni.uploadFile({url:c.default.UPLOAD_URL+t,name:"file",file:i,filePath:n,formData:{output:"json2"},header:{},success:function(e){uni.showToast({title:"上传成功"}),uni.hideLoading(),a(null===e||void 0===e?void 0:e.data)},fail:function(e){console.log(e),uni.showToast({title:"上传失败",icon:"error"}),uni.hideLoading()}});case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())}}}},a207:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){}));var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"me-container"},[n("v-uni-view",{staticClass:"store"},[n("v-uni-text",{staticStyle:{margin:"10rpx 20rpx"}},[e._v("补充摊铺信息")]),n("v-uni-view",{staticClass:"Address"},[n("v-uni-text",[e._v("选择摊位:")]),n("v-uni-picker",{staticClass:"picker",attrs:{mode:"selector",range:e.pickerRange1,value:e.selectedCategoryIndex1},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.onMarketChange.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"picker-text"},[e._v(e._s(e.pickerRange1[e.selectedCategoryIndex1]))])],1)],1),n("v-uni-view",{staticClass:"BL1"},[n("v-uni-text",[e._v("摊主图片:")]),n("v-uni-view",{staticClass:"BLpicker",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.chooseImage.apply(void 0,arguments)}}},[e._v(e._s(e.isImageSelected?"已选择":"选择图片"))])],1),n("v-uni-view",{staticClass:"BL"},[n("v-uni-text",[e._v("营业执照:")]),n("v-uni-view",{staticClass:"BLpicker",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.chooseImage2.apply(void 0,arguments)}}},[e._v(e._s(e.isImageSelected2?"已选择":"选择图片"))])],1)],1),n("v-uni-button",{staticClass:"submit",attrs:{type:"primary",disabled:e.isSubmitting},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.submitForm.apply(void 0,arguments)}}},[e._v("提交")])],1)},a=[]},acac:function(e,t,n){"use strict";var i=n("e330"),a=n("6964"),r=n("f183").getWeakData,o=n("19aa"),c=n("825a"),s=n("7234"),u=n("861d"),d=n("2266"),l=n("b727"),f=n("1a2d"),h=n("69f3"),p=h.set,g=h.getterFor,b=l.find,v=l.findIndex,x=i([].splice),m=0,w=function(e){return e.frozen||(e.frozen=new y)},y=function(){this.entries=[]},k=function(e,t){return b(e.entries,(function(e){return e[0]===t}))};y.prototype={get:function(e){var t=k(this,e);if(t)return t[1]},has:function(e){return!!k(this,e)},set:function(e,t){var n=k(this,e);n?n[1]=t:this.entries.push([e,t])},delete:function(e){var t=v(this.entries,(function(t){return t[0]===e}));return~t&&x(this.entries,t,1),!!~t}},e.exports={getConstructor:function(e,t,n,i){var l=e((function(e,a){o(e,h),p(e,{type:t,id:m++,frozen:void 0}),s(a)||d(a,e[i],{that:e,AS_ENTRIES:n})})),h=l.prototype,b=g(t),v=function(e,t,n){var i=b(e),a=r(c(t),!0);return!0===a?w(i).set(t,n):a[i.id]=n,e};return a(h,{delete:function(e){var t=b(this);if(!u(e))return!1;var n=r(e);return!0===n?w(t)["delete"](e):n&&f(n,t.id)&&delete n[t.id]},has:function(e){var t=b(this);if(!u(e))return!1;var n=r(e);return!0===n?w(t).has(e):n&&f(n,t.id)}}),a(h,n?{get:function(e){var t=b(this);if(u(e)){var n=r(e);return!0===n?w(t).get(e):n?n[t.id]:void 0}},set:function(e,t){return v(this,e,t)}}:{add:function(e){return v(this,e,!0)}}),l}}},bb2f:function(e,t,n){var i=n("d039");e.exports=!i((function(){return Object.isExtensible(Object.preventExtensions({}))}))},d86b:function(e,t,n){var i=n("d039");e.exports=i((function(){if("function"==typeof ArrayBuffer){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}))},db90:function(e,t,n){"use strict";n("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),n("a630")},dbce:function(e,t,n){n("d3b7"),n("3ca3"),n("10d1"),n("ddb0"),n("7a82"),n("e439");var i=n("7037")["default"];function a(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}e.exports=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!==typeof e)return{default:e};var n=a(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in e)if("default"!==c&&Object.prototype.hasOwnProperty.call(e,c)){var s=o?Object.getOwnPropertyDescriptor(e,c):null;s&&(s.get||s.set)?Object.defineProperty(r,c,s):r[c]=e[c]}return r["default"]=e,n&&n.set(e,r),r},e.exports.__esModule=!0,e.exports["default"]=e.exports},f183:function(e,t,n){var i=n("23e7"),a=n("e330"),r=n("d012"),o=n("861d"),c=n("1a2d"),s=n("9bf2").f,u=n("241c"),d=n("057f"),l=n("4fadd"),f=n("90e3"),h=n("bb2f"),p=!1,g=f("meta"),b=0,v=function(e){s(e,g,{value:{objectID:"O"+b++,weakData:{}}})},x=e.exports={enable:function(){x.enable=function(){},p=!0;var e=u.f,t=a([].splice),n={};n[g]=1,e(n).length&&(u.f=function(n){for(var i=e(n),a=0,r=i.length;a<r;a++)if(i[a]===g){t(i,a,1);break}return i},i({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:d.f}))},fastKey:function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!c(e,g)){if(!l(e))return"F";if(!t)return"E";v(e)}return e[g].objectID},getWeakData:function(e,t){if(!c(e,g)){if(!l(e))return!0;if(!t)return!1;v(e)}return e[g].weakData},onFreeze:function(e){return h&&p&&l(e)&&!c(e,g)&&v(e),e}};r[g]=!0},ffee:function(e,t,n){"use strict";n.r(t);var i=n("a207"),a=n("09e3");for(var r in a)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(r);n("525c");var o=n("f0c5"),c=Object(o["a"])(a["default"],i["b"],i["c"],!1,null,"07ba1162",null,!1,i["a"],void 0);t["default"]=c.exports}}]);