(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-release-release"],{2225:function(e,t,i){var n=i("8a0c");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=i("4f06").default;a("c5bc7158",n,!0,{sourceMap:!1,shadowMode:!1})},2909:function(e,t,i){"use strict";i("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,n.default)(e)||(0,a.default)(e)||(0,o.default)(e)||(0,c.default)()};var n=r(i("6005")),a=r(i("db90")),o=r(i("06c5")),c=r(i("3427"));function r(e){return e&&e.__esModule?e:{default:e}}},3427:function(e,t,i){"use strict";i("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},i("d9e2"),i("d401")},48828:function(e,t,i){"use strict";i.r(t);var n=i("bbbe"),a=i("c070");for(var o in a)["default"].indexOf(o)<0&&function(e){i.d(t,e,(function(){return a[e]}))}(o);i("72cb");var c=i("f0c5"),r=Object(c["a"])(a["default"],n["b"],n["c"],!1,null,"5ddd68ae",null,!1,n["a"],void 0);t["default"]=r.exports},6005:function(e,t,i){"use strict";i("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(Array.isArray(e))return(0,n.default)(e)};var n=function(e){return e&&e.__esModule?e:{default:e}}(i("6b75"))},"72cb":function(e,t,i){"use strict";var n=i("2225"),a=i.n(n);a.a},"797a":function(e,t,i){"use strict";i("7a82");var n=i("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i("d81d"),i("99af");var a=n(i("2909")),o=n(i("c7eb")),c=n(i("1da1")),r=i("6c0c"),s=i("a15b"),d=(n(i("832e")),{data:function(){return{goodsname:"",category_id:"",imageUploaded:!1,imglogo:"",categories:[],pickerRange:[],selectedCategoryIndex:0}},onLoad:function(){this.fetchCategories()},methods:{customizeBack:function(){return(0,c.default)((0,o.default)().mark((function e(){var t;return(0,o.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,getCurrentPages();case 2:t=e.sent,t&&t.length>1?uni.navigateBack():history.back();case 4:case"end":return e.stop()}}),e)})))()},fetchCategories:function(){var e=this;r.api.cglist().then((function(t){if(200===t.code){var i=t.data.listdata.map((function(e){return{id:e.id,content:e.content}}));e.categories=i,e.pickerRange=["请选择分类"].concat((0,a.default)(i.map((function(e){return e.content})))),i.length>0&&(e.category_id=i[0].id)}else uni.showToast({title:t.message||"获取分类失败",icon:"none"})})).catch((function(e){console.error(e),uni.showToast({title:"获取分类失败",icon:"none"})}))},uploadcuisine:function(){var e=this;uni.chooseImage({count:1,sizeType:["compressed","original"],sourceType:["album","camera"],success:function(){var t=(0,c.default)((0,o.default)().mark((function t(i){var n,a,c;return(0,o.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=i.tempFilePaths,n.length>0&&(a=(0,s.useUpload)({uploadPath:"/group1/upload",file:i.tempFiles[0],tempFilePaths:n[0]}),c=a.upload,a.request,c().then((function(t){var i=JSON.parse(t);e.imglogo=r.UPLOAD_URL+i.data.path,e.isImageSelected=!0,e.imageUploaded=!0})));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})},onCategoryChange:function(e){var t=e.detail.value;this.selectedCategoryIndex=t,this.category_id=t>0?this.categories[t-1].id:""},submit:function(){var e=this;console.log(this.goodsname,this.category_id),this.goodsname&&this.category_id&&this.imglogo?r.api.addgoods({category_id:this.category_id,goodsname:this.goodsname,imglogo:this.imglogo}).then((function(t){200===t.code?(uni.showToast({title:"菜品添加成功",icon:"success",duration:1e3}).then((function(){setTimeout((function(){uni.showModal({title:"是否继续添加菜品",cancelText:"否",confirmText:"是",success:function(t){t.confirm?console.log("继续添加"):e.customizeBack()}})}),1e3)})),e.goodsname="",e.imglogo="",e.imageUploaded=!1):uni.showToast({title:t.msg||"添加失败",icon:"none"})})).catch((function(e){console.error(e),uni.showToast({title:"添加失败",icon:"none"})})):uni.showToast({title:"请填写完整信息",icon:"none"})}}});t.default=d},"8a0c":function(e,t,i){var n=i("24fb");t=n(!1),t.push([e.i,".me-container[data-v-5ddd68ae]{overflow:hidden;width:100%;box-sizing:border-box;padding:%?0?% %?40?% 0 %?40?%;color:#fff;z-index:1;background-color:#f8f8f8;display:flex;flex-direction:column;justify-content:center}.content[data-v-5ddd68ae]{margin-top:%?30?%;background-color:#fff;flex:4;display:flex;flex-direction:column;padding:0 %?10?%}.name[data-v-5ddd68ae]{height:%?100?%;display:flex;flex-direction:row;align-items:center\n\t/* flex: 1; */}.price[data-v-5ddd68ae]{height:%?100?%;display:flex;flex-direction:row;align-items:center\n\t/* flex: 1; */}.img[data-v-5ddd68ae]{height:%?100?%;display:flex;flex-direction:row;align-items:center\n\t/* flex: 1; */}.title[data-v-5ddd68ae]{width:%?100?%;height:%?100?%;text-align:center;line-height:%?100?%;\n\t/* font-size: 34rpx; */color:#666}.item[data-v-5ddd68ae]{width:%?250?%;height:%?80?%;text-align:center;display:flex;flex-direction:row;margin-left:auto;\n\t/* 将item推到父容器的右边 */align-items:center\n\t/* justify-content: center; */}.rigicon[data-v-5ddd68ae]{\n\t/* background-color: bisque; */width:%?50?%;height:%?80?%;text-align:center;line-height:%?80?%}.picker[data-v-5ddd68ae]{width:%?250?%;height:100%;display:flex;justify-content:center;align-items:center\n\t/* background-color: #007aff; */}.picker-text[data-v-5ddd68ae]{\n\t/* width: 250rpx; */height:100%;color:grey;font-size:%?25?%}.picture[data-v-5ddd68ae]{width:%?250?%;text-align:center;color:grey;font-size:%?25?%}.submit[data-v-5ddd68ae]{\n\t/* flex: 1; */height:%?80?%;text-align:center;line-height:%?80?%;color:#fff;font-size:%?36?%;font-weight:500;margin:%?20?% 0;background-color:#007aff;border-radius:%?20?%}.input-text[data-v-5ddd68ae]{color:grey;border:none;outline:none;box-shadow:none;font-size:%?25?%}.uploaded-image[data-v-5ddd68ae]{height:%?100?%;width:%?100?%}",""]),e.exports=t},bbbe:function(e,t,i){"use strict";i.d(t,"b",(function(){return a})),i.d(t,"c",(function(){return o})),i.d(t,"a",(function(){return n}));var n={uniIcons:i("0dac").default},a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"me-container"},[i("v-uni-view",{staticClass:"content"},[i("v-uni-view",{staticClass:"name"},[i("v-uni-text",{staticClass:"title"},[e._v("菜名")]),i("v-uni-view",{staticClass:"item"},[i("v-uni-view",{staticClass:"picture"},[i("v-uni-input",{staticClass:"input-text",attrs:{type:"text",placeholder:"请输入菜名"},model:{value:e.goodsname,callback:function(t){e.goodsname=t},expression:"goodsname"}})],1),i("uni-icons",{staticClass:"rigicon",attrs:{type:"right",size:"14",color:"rgb(229, 229, 229)"}})],1)],1),i("v-uni-view",{staticClass:"price"},[i("v-uni-text",{staticClass:"title"},[e._v("分类")]),i("v-uni-view",{staticClass:"item"},[i("v-uni-picker",{staticClass:"picker",attrs:{range:e.pickerRange,value:e.selectedCategoryIndex},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.onCategoryChange.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"picker-text"},[e._v(e._s(e.pickerRange[e.selectedCategoryIndex]))])],1),i("uni-icons",{staticClass:"rigicon",attrs:{type:"right",size:"14",color:"rgb(229, 229, 229)"}})],1)],1),i("v-uni-view",{staticClass:"img",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.uploadcuisine.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"title"},[e._v("图片")]),i("v-uni-view",{staticClass:"item"},[i("v-uni-view",{staticClass:"picture"},[e.imglogo?i("v-uni-image",{staticClass:"uploaded-image",attrs:{src:e.imglogo,mode:"aspectFit"}}):i("v-uni-view",[e._v("请上传图片")])],1),i("uni-icons",{staticClass:"rigicon",attrs:{type:"right",size:"14",color:"rgb(229, 229, 229)"}})],1)],1),i("v-uni-view",{staticClass:"submit",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.submit.apply(void 0,arguments)}}},[e._v("提交")])],1),i("v-uni-text",{staticStyle:{color:"red","margin-top":"30rpx","font-size":"30rpx"}},[e._v("注意：添加菜品后要在菜品列表里面选择上架")])],1)},o=[]},c070:function(e,t,i){"use strict";i.r(t);var n=i("797a"),a=i.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){i.d(t,e,(function(){return n[e]}))}(o);t["default"]=a.a},db90:function(e,t,i){"use strict";i("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},i("a4d3"),i("e01a"),i("d3b7"),i("d28b"),i("3ca3"),i("ddb0"),i("a630")}}]);