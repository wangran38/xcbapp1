(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["subPackages/Wholesale/addPurchase/addPurchase"],{2870:function(e,t,n){"use strict";n.r(t);var r=n("c5df"),a=n.n(r);for(var i in r)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t["default"]=a.a},"7e33":function(e,t,n){"use strict";var r=n("ef3b"),a=n.n(r);a.a},"9f8e":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return r}));var r={uniForms:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-forms/components/uni-forms/uni-forms")]).then(n.bind(null,"a7dd"))},uniSection:function(){return n.e("uni_modules/uni-section/components/uni-section/uni-section").then(n.bind(null,"6da5"))},uniFormsItem:function(){return n.e("uni_modules/uni-forms/components/uni-forms-item/uni-forms-item").then(n.bind(null,"a9ba"))},uniEasyinput:function(){return n.e("uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput").then(n.bind(null,"2b45"))},uniPopup:function(){return n.e("uni_modules/uni-popup/components/uni-popup/uni-popup").then(n.bind(null,"8858"))},uniDataSelect:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-data-select/components/uni-data-select/uni-data-select")]).then(n.bind(null,"73e5"))},uniDatetimePicker:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-datetime-picker/components/uni-datetime-picker/uni-datetime-picker")]).then(n.bind(null,"173b"))}},a=function(){var e=this,t=e.$createElement;e._self._c;e._isMounted||(e.e0=function(t){e.showGoodsPicker=!0})},i=[]},b9b2:function(e,t,n){"use strict";n.r(t);var r=n("9f8e"),a=n("2870");for(var i in a)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(i);n("7e33");var u=n("828b"),c=Object(u["a"])(a["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],void 0);t["default"]=c.exports},c09c:function(e,t,n){"use strict";(function(e,t){var r=n("47a9");n("89ee");r(n("3240"));var a=r(n("b9b2"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(a.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])},c5df:function(e,t,n){"use strict";(function(e){var r=n("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n("7eb4")),i=r(n("af34")),u=r(n("ee10")),c=n("4860"),s={data:function(){var e=Date.now();return{multiArray:[[],[],[]],selectedCountry:"china",multiIndex:[0,0,0],formData:{infotitle:"",infonumber:null,unit:null,stoptime:"",byaddress:"",buyaddress:"",area_id:null,content:""},units:[{value:"件",text:"件"},{value:"吨",text:"吨"},{value:"箱",text:"箱"},{value:"斤",text:"斤"}],districtList:[],today:e}},mounted:function(){this.initializePicker()},options:{stylelsolation:"shared"},methods:{bindMultiPickerColumnChange:function(e){var t=this;return(0,u.default)(a.default.mark((function n(){var r,u,c,s,o,l,d,f;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.detail.column,u=e.detail.value,"china"!==t.selectedCountry){n.next=35;break}if(0!==r){n.next=22;break}if(c=t.provinceList[u],!c||void 0===c.id){n.next=18;break}return n.next=8,t.fetchCities(c.id);case 8:if(s=n.sent,t.multiArray[1]=s.map((function(e){return e.name})),!(s.length>0)){n.next=17;break}return n.next=13,t.fetchAreas(s[0].id);case 13:o=n.sent,t.multiArray[2]=o.map((function(e){return e.name})),n.next=18;break;case 17:t.multiArray[2]=[];case 18:t.multiIndex[1]=0,t.multiIndex[2]=0,n.next=33;break;case 22:if(1!==r){n.next=33;break}if(l=t.cityList[u],!l||void 0===l.id){n.next=31;break}return n.next=27,t.fetchAreas(l.id);case 27:d=n.sent,t.multiArray[2]=d.map((function(e){return e.name})),n.next=32;break;case 31:t.multiArray[2]=[];case 32:t.multiIndex[2]=0;case 33:n.next=47;break;case 35:if("overseas"!==t.selectedCountry){n.next=47;break}if(0!==r){n.next=46;break}if(f=t.overseasCountries[u],!f||void 0===f.id){n.next=41;break}return n.next=41,t.fetchOverseasCities(f.id);case 41:t.multiArray[2]=[],t.multiIndex[1]=0,t.multiIndex[2]=0,n.next=47;break;case 46:1===r&&(t.multiArray[2]=[],t.multiIndex[2]=0);case 47:t.multiIndex[r]=u,t.multiIndex=(0,i.default)(t.multiIndex);case 49:case"end":return n.stop()}}),n)})))()},bindMultiPickerChange:function(e){var t=this;return(0,u.default)(a.default.mark((function e(){return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.formData.area_id=t.districtList[t.multiIndex[2]]["id"];case 1:case"end":return e.stop()}}),e)})))()},fetchProvinces:function(){var e=this;return(0,u.default)(a.default.mark((function t(){var n;return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c.api.citylist({level:1,limit:100});case 3:if(n=t.sent,200!==n.code){t.next=7;break}return e.provinceList=n.data.listdata,t.abrupt("return",e.provinceList);case 7:throw new Error("Failed to fetch provinces");case 10:throw t.prev=10,t.t0=t["catch"](0),console.error("Failed to fetch provinces:",t.t0),t.t0;case 14:case"end":return t.stop()}}),t,null,[[0,10]])})))()},fetchCities:function(e){var t=this;return(0,u.default)(a.default.mark((function n(){var r;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,c.api.citytree(e);case 3:if(r=n.sent,200!==r.code||!Array.isArray(r.data)){n.next=9;break}return t.cityList=r.data,n.abrupt("return",r.data);case 9:return console.error("No cities data found"),n.abrupt("return",[]);case 11:n.next=17;break;case 13:return n.prev=13,n.t0=n["catch"](0),console.error("Failed to fetch cities:",n.t0),n.abrupt("return",[]);case 17:case"end":return n.stop()}}),n,null,[[0,13]])})))()},fetchAreas:function(e){var t=this;return(0,u.default)(a.default.mark((function n(){var r;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,c.api.citytree(e);case 3:if(r=n.sent,200!==r.code||!Array.isArray(r.data)){n.next=9;break}return t.districtList=r.data,n.abrupt("return",r.data);case 9:return console.error("No areas data found"),n.abrupt("return",[]);case 11:n.next=17;break;case 13:return n.prev=13,n.t0=n["catch"](0),console.error("Failed to fetch areas:",n.t0),n.abrupt("return",[]);case 17:case"end":return n.stop()}}),n,null,[[0,13]])})))()},submitForm:function(){var t=this;return(0,u.default)(a.default.mark((function n(){var r;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.formData.buyaddress=t.multiArray[0][t.multiIndex[0]]+"-"+t.multiArray[1][t.multiIndex[1]]+"-"+t.multiArray[2][t.multiIndex[2]],console.log(t.formData),n.next=4,c.api.buyinfoAdd(t.formData);case 4:r=n.sent,200!=r.code?e.showToast({icon:"error",title:r.msg||r.message}):e.showToast({icon:"success",title:r.msg||r.message});case 6:case"end":return n.stop()}}),n)})))()},initializePicker:function(){var e=this;return(0,u.default)(a.default.mark((function t(){var n,r,i;return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.fetchProvinces();case 3:return n=t.sent,e.multiArray[0]=n.map((function(e){return e.name})),t.next=7,e.fetchCities(n[0].id);case 7:return r=t.sent,e.multiArray[1]=r.map((function(e){return e.name})),t.next=11,e.fetchAreas(r[0].id);case 11:i=t.sent,e.multiArray[2]=i.map((function(e){return e.name})),e.multiIndex=[0,0,0],t.next=19;break;case 16:t.prev=16,t.t0=t["catch"](0),console.log(t.t0);case 19:case"end":return t.stop()}}),t,null,[[0,16]])})))()}}};t.default=s}).call(this,n("df3c")["default"])},ef3b:function(e,t,n){}},[["c09c","common/runtime","common/vendor"]]]);