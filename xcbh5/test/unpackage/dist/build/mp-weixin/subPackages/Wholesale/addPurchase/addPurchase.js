(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["subPackages/Wholesale/addPurchase/addPurchase"],{2870:function(e,t,n){"use strict";n.r(t);var r=n("c5df"),i=n.n(r);for(var u in r)["default"].indexOf(u)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(u);t["default"]=i.a},"7bd4":function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return r}));var r={uniForms:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-forms/components/uni-forms/uni-forms")]).then(n.bind(null,"a7dd"))},uniSection:function(){return n.e("uni_modules/uni-section/components/uni-section/uni-section").then(n.bind(null,"6da5"))},uniFormsItem:function(){return n.e("uni_modules/uni-forms/components/uni-forms-item/uni-forms-item").then(n.bind(null,"a9ba"))},uniEasyinput:function(){return n.e("uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput").then(n.bind(null,"2b45"))},uniPopup:function(){return n.e("uni_modules/uni-popup/components/uni-popup/uni-popup").then(n.bind(null,"8858"))},uniDataSelect:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-data-select/components/uni-data-select/uni-data-select")]).then(n.bind(null,"73e5"))},uniDatetimePicker:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-datetime-picker/components/uni-datetime-picker/uni-datetime-picker")]).then(n.bind(null,"173b"))},uniIcons:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-icons/components/uni-icons/uni-icons")]).then(n.bind(null,"a7f4"))}},i=function(){var e=this,t=e.$createElement;e._self._c;e._isMounted||(e.e0=function(t){e.showGoodsPicker=!0})},u=[]},"7e33":function(e,t,n){"use strict";var r=n("ef3b"),i=n.n(r);i.a},b9b2:function(e,t,n){"use strict";n.r(t);var r=n("7bd4"),i=n("2870");for(var u in i)["default"].indexOf(u)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(u);n("7e33");var a=n("828b"),c=Object(a["a"])(i["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],void 0);t["default"]=c.exports},c09c:function(e,t,n){"use strict";(function(e,t){var r=n("47a9");n("89ee");r(n("3240"));var i=r(n("b9b2"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(i.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])},c5df:function(e,t,n){"use strict";var r=n("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n("7eb4")),u=r(n("af34")),a=r(n("ee10")),c=n("4860"),o={data:function(){return{multiArray:[[],[],[]],multiIndex:[0,0,0],formData:{applicant:"",department:"",applyDate:"today",productName:"",quantity:null,unit:null,requirements:"",quoteDeadline:"",deliveryStart:"",deliveryEnd:"",deliveryAddress:[],preferredOrigin:"",area_id:null,market_id:null,category_id:null},units:[{value:"件",text:"件"},{value:"吨",text:"吨"},{value:"箱",text:"箱"},{value:"斤",text:"斤"}],today:"",maxQuoteDate:""}},mounted:function(){this.initializePicker(),this.fetchCategories()},options:{stylelsolation:"shared"},methods:{fetchCategories:function(){var e=this;return(0,a.default)(i.default.mark((function t(){var n,r;return i.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c.api.cglist();case 3:if(n=t.sent,200!==n.code){t.next=10;break}r=n.data.listdata,e.categoryList=["请选择分类"].concat((0,u.default)(r.map((function(e){return e.title})))),e.categoryIdMap=r.reduce((function(e,t){return e[t.title]=t.id,e}),{}),t.next=11;break;case 10:throw new Error("Failed to fetch categories");case 11:t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](0),console.error("Failed to fetch categories:",t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})))()},bindMultiPickerColumnChange:function(e){var t=this;return(0,a.default)(i.default.mark((function n(){var r,a,c,o,s,l;return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(console.log(e.detail),r=e.detail.column,a=e.detail.value,t.multiIndex[r]=a,0!==r){n.next=17;break}return c=t.provinceList[a].id,n.next=8,t.fetchCities(c);case 8:o=n.sent,console.log(o),t.cityList=o,t.multiArray[1]=o.map((function(e){return e.name})),t.multiArray[2]=o?o[0].Children.map((function(e){return e.name})):[],t.multiIndex[1]=0,t.multiIndex[2]=0,n.next=25;break;case 17:if(1!==r){n.next=25;break}return s=t.cityList[a].id,n.next=21,t.fetchAreas(s);case 21:l=n.sent,t.districtList=l,t.multiArray[2]=l.map((function(e){return e.name})),t.multiIndex[2]=0;case 25:console.log(t.multiArray[2][t.multiIndex[2]]),t.multiIndex=(0,u.default)(t.multiIndex);case 27:case"end":return n.stop()}}),n)})))()},bindMultiPickerChange:function(e){console.log(e),this.multiIndex=e.detail.value;this.multiArray[0][this.multiIndex[0]],this.multiArray[1][this.multiIndex[1]],this.multiArray[2][this.multiIndex[2]];var t=this.districtList[this.multiIndex[2]].id;this.area_id=t,this.fetchMarkets(t)},fetchProvinces:function(){var e=this;return(0,a.default)(i.default.mark((function t(){var n;return i.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c.api.citylist({level:1,limit:100});case 3:if(n=t.sent,200!==n.code){t.next=7;break}return e.provinceList=n.data.listdata,t.abrupt("return",e.provinceList);case 7:throw new Error("Failed to fetch provinces");case 10:throw t.prev=10,t.t0=t["catch"](0),console.error("Failed to fetch provinces:",t.t0),t.t0;case 14:case"end":return t.stop()}}),t,null,[[0,10]])})))()},initializePicker:function(){var e=this;return(0,a.default)(i.default.mark((function t(){var n,r,u;return i.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.fetchProvinces();case 3:return n=t.sent,e.multiArray[0]=n.map((function(e){return e.name})),t.next=7,e.fetchCities(n[0].id);case 7:return r=t.sent,e.multiArray[1]=r.map((function(e){return e.name})),t.next=11,e.fetchAreas(r[0].id);case 11:u=t.sent,e.multiArray[2]=u.map((function(e){return e.name})),e.multiIndex=[0,0,0],t.next=19;break;case 16:return t.prev=16,t.t0=t["catch"](0),t.abrupt("return");case 19:case"end":return t.stop()}}),t,null,[[0,16]])})))()},fetchCities:function(e){return(0,a.default)(i.default.mark((function t(){var n;return i.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c.api.citytree(e);case 3:if(n=t.sent,200!==n.code||!Array.isArray(n.data)){t.next=8;break}return t.abrupt("return",n.data);case 8:return console.error("No cities data found"),t.abrupt("return",[]);case 10:t.next=15;break;case 12:return t.prev=12,t.t0=t["catch"](0),t.abrupt("return",[]);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})))()},fetchAreas:function(e){return(0,a.default)(i.default.mark((function t(){var n;return i.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c.api.citytree(e);case 3:if(n=t.sent,200!==n.code||!Array.isArray(n.data)){t.next=8;break}return t.abrupt("return",n.data);case 8:return console.error("No areas data found"),t.abrupt("return",[]);case 10:t.next=16;break;case 12:return t.prev=12,t.t0=t["catch"](0),console.error("Failed to fetch areas:",t.t0),t.abrupt("return",[]);case 16:case"end":return t.stop()}}),t,null,[[0,12]])})))()}}};t.default=o},ef3b:function(e,t,n){}},[["c09c","common/runtime","common/vendor"]]]);