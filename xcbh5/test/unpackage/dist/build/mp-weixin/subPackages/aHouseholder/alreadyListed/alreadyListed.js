(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["subPackages/aHouseholder/alreadyListed/alreadyListed"],{"0ba0":function(e,t,i){"use strict";(function(e){var n=i("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(i("7eb4")),s=n(i("7ca3")),r=n(i("ee10"));i("4860");function c(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function o(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?c(Object(i),!0).forEach((function(t){(0,s.default)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var u={data:function(){return{activeCategory:"self",categories:[{label:"自销",value:"self"},{label:"代提",value:"agent"},{label:"批发",value:"wholesale"}],dishes:[{id:1001,name:"11111",price:68,stock:23,unit:"份",image:"/static/dishes/braised_pork.jpg",category:"self",status:1},{id:1002,name:"22222",price:298,stock:8,unit:"条",image:"/static/dishes/steamed_fish.jpg",category:"self",status:1},{id:2001,name:"333333",price:888,stock:15,unit:"盒",image:"/static/dishes/beef_box.jpg",category:"agent",status:1},{id:2002,name:"444444",price:399,stock:5,unit:"箱",image:"/static/dishes/oysters.jpg",category:"agent",status:1},{id:3001,name:"55555",price:68,stock:150,unit:"袋(10kg)",image:"/static/dishes/rice.jpg",category:"wholesale",status:1},{id:3002,name:"666666",price:128,stock:89,unit:"箱(6L)",image:"/static/dishes/olive_oil.jpg",category:"wholesale",status:1},{id:3003,name:"77777",price:158,stock:42,unit:"袋(1kg)",image:"/static/dishes/coffee_beans.jpg",category:"wholesale",status:1}],scrollHeight:600,scrollLeft:0,processingIds:[],loading:!0}},computed:{filteredDishes:function(){var e=this;return this.dishes.filter((function(t){return t.category===e.activeCategory&&1===t.status}))}},mounted:function(){this.loadData(),this.calcScrollHeight()},methods:{loadData:function(){var e=this;return(0,r.default)(a.default.mark((function t(){var i;return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$api.getDishList();case 3:i=t.sent,e.dishes=i.data,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.error(t.t0);case 10:return t.prev=10,e.loading=!1,t.finish(10);case 13:case"end":return t.stop()}}),t,null,[[0,7,10,13]])})))()},calcScrollHeight:function(){var t=this,i=e.getSystemInfoSync(),n=e.createSelectorQuery().in(this);n.select(".category-tabs").boundingClientRect(),n.exec((function(e){var n,a=(null===(n=e[0])||void 0===n?void 0:n.height)||60;t.scrollHeight=i.windowHeight-a-10}))},switchCategory:function(t,i){var n=this;this.activeCategory=t,this.$nextTick((function(){var t=e.createSelectorQuery().in(n);t.select(".tab-item:nth-child(".concat(i+1,")")).boundingClientRect(),t.exec((function(e){e[0]&&(n.scrollLeft=e[0].left-50)}))}))},handleOffShelf:function(t){var i=this;return(0,r.default)(a.default.mark((function n(){return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i.processingIds.push(t),n.prev=1,n.next=4,i.$api.updateDishStatus({id:t,status:0});case 4:i.dishes=i.dishes.map((function(e){return e.id===t?o(o({},e),{},{status:0}):e})),e.showToast({title:"下架成功",icon:"success"}),n.next=11;break;case 8:n.prev=8,n.t0=n["catch"](1),e.showToast({title:"操作失败",icon:"none"});case 11:return n.prev=11,i.processingIds=i.processingIds.filter((function(e){return e!==t})),n.finish(11);case 14:case"end":return n.stop()}}),n,null,[[1,8,11,14]])})))()},handleImageError:function(e){e.image="/static/default-dish.png"},onRefresh:function(){this.loadData(),setTimeout((function(){e.stopPullDownRefresh()}),1e3)}}};t.default=u}).call(this,i("df3c")["default"])},4477:function(e,t,i){"use strict";i.r(t);var n=i("0ba0"),a=i.n(n);for(var s in n)["default"].indexOf(s)<0&&function(e){i.d(t,e,(function(){return n[e]}))}(s);t["default"]=a.a},"6f61":function(e,t,i){"use strict";(function(e,t){var n=i("47a9");i("89ee");n(i("3240"));var a=n(i("f319"));e.__webpack_require_UNI_MP_PLUGIN__=i,t(a.default)}).call(this,i("3223")["default"],i("df3c")["createPage"])},a9b1:function(e,t,i){"use strict";i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return a})),i.d(t,"a",(function(){}));var n=function(){var e=this,t=e.$createElement,i=(e._self._c,e.__map(e.filteredDishes,(function(t,i){var n=e.__get_orig(t),a=t.price.toFixed(2),s=e.processingIds.includes(t.id),r=e.processingIds.includes(t.id);return{$orig:n,g0:a,g1:s,g2:r}}))),n=!e.loading&&0===e.filteredDishes.length;e.$mp.data=Object.assign({},{$root:{l0:i,g3:n}})},a=[]},c4e0:function(e,t,i){},ddf5:function(e,t,i){"use strict";var n=i("c4e0"),a=i.n(n);a.a},f319:function(e,t,i){"use strict";i.r(t);var n=i("a9b1"),a=i("4477");for(var s in a)["default"].indexOf(s)<0&&function(e){i.d(t,e,(function(){return a[e]}))}(s);i("ddf5");var r=i("828b"),c=Object(r["a"])(a["default"],n["b"],n["c"],!1,null,"5d302de8",null,!1,n["a"],void 0);t["default"]=c.exports}},[["6f61","common/runtime","common/vendor"]]]);