(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/updatePwd/updatePwd"],{"22a7":function(t,r,e){"use strict";(function(t){var n=e("47a9");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("7eb4")),a=n(e("ee10")),s=e("4860"),i={data:function(){return{formData:{phone:"",verificationCode:"",newPassword:"",confirmPassword:""},showPassword:!1,codeBtnText:"获取验证码",canSendCode:!0,countdown:0,phoneError:"",passwordError:"",confirmError:"",message:"",isError:!1}},computed:{formValid:function(){return!this.phoneError&&!this.passwordError&&!this.confirmError&&this.formData.phone&&this.formData.verificationCode&&this.formData.newPassword&&this.formData.confirmPassword}},onLoad:function(t){t.phone&&(this.formData.phone=t.phone)},methods:{validatePhone:function(){this.formData.phone?/^1[3-9]\d{9}$/.test(this.formData.phone)?this.phoneError="":this.phoneError="手机号格式不正确":this.phoneError="手机号不能为空"},validatePassword:function(){this.formData.newPassword?/^(?=.*[a-zA-Z])(?=.*\d).{8,20}$/.test(this.formData.newPassword)?this.passwordError="":this.passwordError="需包含字母和数字，8-20位":this.passwordError="密码不能为空"},validateConfirm:function(){this.formData.confirmPassword!==this.formData.newPassword?this.confirmError="两次输入密码不一致":this.confirmError=""},togglePassword:function(){this.showPassword=!this.showPassword},sendVerificationCode:function(){var r=this;return(0,a.default)(o.default.mark((function e(){var n;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r.phoneError&&r.formData.phone){e.next=2;break}return e.abrupt("return");case 2:return r.startCountdown(),e.next=5,s.api.sendText({phonenumber:r.formData.phone});case 5:n=e.sent,200==n.code?t.showToast({icon:"success",title:"短信已发送至您的手机,请注意查收"}):t.showToast({icon:"error",title:n.msg});case 7:case"end":return e.stop()}}),e)})))()},startCountdown:function(){var t=this;this.canSendCode=!1,this.countdown=60,this.codeBtnText="".concat(this.countdown,"秒后重发");var r=setInterval((function(){if(t.countdown<=0)return clearInterval(r),t.canSendCode=!0,void(t.codeBtnText="获取验证码");t.countdown--,t.codeBtnText="".concat(t.countdown,"秒后重发")}),1e3)},handleSubmit:function(){var r=this;return(0,a.default)(o.default.mark((function e(){return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r.formValid){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,s.api.editPwd({phone:r.formData.phone,codenum:r.formData.verificationCode,psw:r.formData.newPassword});case 4:e.sent,r.showMessage("密码重置成功",!1),setTimeout((function(){t.navigateBack()}),1500);case 7:case"end":return e.stop()}}),e)})))()},showMessage:function(t){var r=this,e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.message=t,this.isError=e,setTimeout((function(){r.message=""}),2e3)}}};r.default=i}).call(this,e("df3c")["default"])},"3a37":function(t,r,e){"use strict";(function(t,r){var n=e("47a9");e("89ee");n(e("3240"));var o=n(e("6b0a"));t.__webpack_require_UNI_MP_PLUGIN__=e,r(o.default)}).call(this,e("3223")["default"],e("df3c")["createPage"])},"569a":function(t,r,e){"use strict";var n=e("9a4c"),o=e.n(n);o.a},"6b0a":function(t,r,e){"use strict";e.r(r);var n=e("a7ab"),o=e("9e70");for(var a in o)["default"].indexOf(a)<0&&function(t){e.d(r,t,(function(){return o[t]}))}(a);e("569a");var s=e("828b"),i=Object(s["a"])(o["default"],n["b"],n["c"],!1,null,"79c54b6a",null,!1,n["a"],void 0);r["default"]=i.exports},"9a4c":function(t,r,e){},"9e70":function(t,r,e){"use strict";e.r(r);var n=e("22a7"),o=e.n(n);for(var a in n)["default"].indexOf(a)<0&&function(t){e.d(r,t,(function(){return n[t]}))}(a);r["default"]=o.a},a7ab:function(t,r,e){"use strict";e.d(r,"b",(function(){return n})),e.d(r,"c",(function(){return o})),e.d(r,"a",(function(){}));var n=function(){var t=this.$createElement;this._self._c},o=[]}},[["3a37","common/runtime","common/vendor"]]]);