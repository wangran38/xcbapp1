(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/release/release"],{4882:function(e,t,n){"use strict";n.r(t);var o=n("9588"),a=n("c070");for(var i in a)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(i);n("7611");var c=n("f0c5"),s=Object(c["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);t["default"]=s.exports},"52f4":function(e,t,n){"use strict";(function(e){var o=n("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("2eee")),i=o(n("448a")),c=o(n("c973")),s=n("6c0c"),r=n("a15b"),u=(o(n("832e")),{data:function(){return{goodsname:"",category_id:"",imageUploaded:!1,imglogo:"",categories:[],pickerRange:[],selectedCategoryIndex:0}},onLoad:function(){this.fetchCategories()},methods:{customizeBack:function(){return(0,c.default)(a.default.mark((function t(){var n;return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,getCurrentPages();case 2:n=t.sent,n&&n.length>1?e.navigateBack():history.back();case 4:case"end":return t.stop()}}),t)})))()},fetchCategories:function(){var t=this;s.api.cglist().then((function(n){if(200===n.code){var o=n.data.listdata.map((function(e){return{id:e.id,content:e.content}}));t.categories=o,t.pickerRange=["请选择分类"].concat((0,i.default)(o.map((function(e){return e.content})))),o.length>0&&(t.category_id=o[0].id)}else e.showToast({title:n.message||"获取分类失败",icon:"none"})})).catch((function(t){console.error(t),e.showToast({title:"获取分类失败",icon:"none"})}))},uploadcuisine:function(){var t=this;e.chooseImage({count:1,sizeType:["compressed","original"],sourceType:["album","camera"],success:function(){var e=(0,c.default)(a.default.mark((function e(n){var o,i,c;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:o=n.tempFilePaths,o.length>0&&(i=(0,r.useUpload)({uploadPath:"/group1/upload",file:n.tempFiles[0],tempFilePaths:o[0]}),c=i.upload,i.request,c().then((function(e){var n=JSON.parse(e);t.imglogo=s.UPLOAD_URL+n.data.path,t.isImageSelected=!0,t.imageUploaded=!0})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})},onCategoryChange:function(e){var t=e.detail.value;this.selectedCategoryIndex=t,this.category_id=t>0?this.categories[t-1].id:""},submit:function(){var t=this;console.log(this.goodsname,this.category_id),this.goodsname&&this.category_id&&this.imglogo?s.api.addgoods({category_id:this.category_id,goodsname:this.goodsname,imglogo:this.imglogo}).then((function(n){200===n.code?(e.showToast({title:"菜品添加成功",icon:"success",duration:1e3}).then((function(){setTimeout((function(){e.showModal({title:"是否继续添加菜品",cancelText:"否",confirmText:"是",success:function(e){e.confirm?console.log("继续添加"):t.customizeBack()}})}),1e3)})),t.goodsname="",t.imglogo="",t.imageUploaded=!1):e.showToast({title:n.msg||"添加失败",icon:"none"})})).catch((function(t){console.error(t),e.showToast({title:"添加失败",icon:"none"})})):e.showToast({title:"请填写完整信息",icon:"none"})}}});t.default=u}).call(this,n("543d")["default"])},6420:function(e,t,n){"use strict";(function(e,t){var o=n("4ea4");n("88ba");o(n("66fd"));var a=o(n("4882"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(a.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])},7611:function(e,t,n){"use strict";var o=n("ec35"),a=n.n(o);a.a},9588:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var o={uniIcons:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-icons/components/uni-icons/uni-icons")]).then(n.bind(null,"0dac"))}},a=function(){var e=this.$createElement;this._self._c},i=[]},c070:function(e,t,n){"use strict";n.r(t);var o=n("52f4"),a=n.n(o);for(var i in o)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},ec35:function(e,t,n){}},[["6420","common/runtime","common/vendor"]]]);