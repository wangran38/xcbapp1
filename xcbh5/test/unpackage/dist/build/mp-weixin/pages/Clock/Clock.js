(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/Clock/Clock"],{1084:function(e,t,n){"use strict";(function(e){var a=n("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n("7eb4")),i=a(n("ee10")),c=n("4860"),r={data:function(){return{isSignedIn:!1,timestamp:"",time:""}},onLoad:function(e){e.time&&(this.time=e.time),this.signIn()},methods:{signIn:function(t){var n=this;return(0,i.default)(o.default.mark((function a(){var i,r,u,s,l,f,d,g,h;return o.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(a.prev=0,i=e.getStorageSync("token"),i){a.next=5;break}return e.showModal({content:"请登录后再打卡",showCancel:!1,success:function(){e.navigateTo({url:"/pages/login/login"})}}),a.abrupt("return");case 5:if(r=Math.floor(Date.now()/1e3),u=new Date,s=u.toDateString(),l=new Date(1e3*n.time).toDateString(),s===l){a.next=12;break}return e.showModal({title:"提示",content:"不能打卡未来日期！",showCancel:!1}),a.abrupt("return");case 12:if(!(n.time<r)){a.next=15;break}return e.showModal({title:"提示",content:"无法对过去的时间打卡！",showCancel:!1}),a.abrupt("return");case 15:return f=Math.floor(new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate(),5,0,0).getTime()/1e3),d=Math.floor(new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate(),12,0,0).getTime()/1e3),g=Math.floor(new Date(u.getFullYear(),u.getMonth(),u.getDate(),20,30,0).getTime()/1e3),a.next=20,c.api.sign(t);case 20:h=a.sent,200===h.code?(n.isSignedIn=!0,r>=f&&r<d||r>=d&&r<g?r<n.time&&e.showModal({content:h.msg,icon:"success",success:function(){setTimeout((function(){e.switchTab({url:"/pages/index/index"})}),1e3)}}):e.showModal({title:"提示",content:h.msg||"打卡超时，请稍后重试",showCancel:!1})):201===h.code?(n.isSignedIn=!1,e.showModal({title:"提示",content:h.msg||"你今日打卡已经超过限定次数",showCancel:!1,success:function(){setTimeout((function(){e.switchTab({url:"/pages/index/index"})}),1e3)}})):e.showModal({title:"提示",content:h.msg||"操作失败，请稍后重试",showCancel:!1}),a.next=28;break;case 24:a.prev=24,a.t0=a["catch"](0),console.error("请求打卡接口出错:",a.t0),e.showModal({title:"提示",content:"打卡失败，请稍后重试。",showCancel:!1});case 28:case"end":return a.stop()}}),a,null,[[0,24]])})))()}}};t.default=r}).call(this,n("df3c")["default"])},"2e0f":function(e,t,n){},3160:function(e,t,n){"use strict";n.r(t);var a=n("1084"),o=n.n(a);for(var i in a)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(i);t["default"]=o.a},"3b99":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){}));var a=function(){var e=this.$createElement;this._self._c},o=[]},"54b5":function(e,t,n){"use strict";n.r(t);var a=n("3b99"),o=n("3160");for(var i in o)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(i);n("6711");var c=n("828b"),r=Object(c["a"])(o["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],void 0);t["default"]=r.exports},6711:function(e,t,n){"use strict";var a=n("2e0f"),o=n.n(a);o.a},acab:function(e,t,n){"use strict";(function(e,t){var a=n("47a9");n("89ee");a(n("3240"));var o=a(n("54b5"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(o.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])}},[["acab","common/runtime","common/vendor"]]]);