(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/preSale/preSale"],{1387:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var o={uniIcons:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-icons/components/uni-icons/uni-icons")]).then(n.bind(null,"a7f4"))},uniForms:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-forms/components/uni-forms/uni-forms")]).then(n.bind(null,"a7dd"))},uniEasyinput:function(){return n.e("uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput").then(n.bind(null,"2b45"))}},a=function(){var e=this.$createElement;this._self._c},i=[]},2883:function(e,t,n){"use strict";n.r(t);var o=n("1387"),a=n("f08b");for(var i in a)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(i);n("4147");var u=n("828b"),c=Object(u["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);t["default"]=c.exports},"342a":function(e,t,n){},"3ebb":function(e,t,n){"use strict";(function(e,t){var o=n("47a9");n("89ee");o(n("3240"));var a=o(n("2883"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(a.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])},4147:function(e,t,n){"use strict";var o=n("342a"),a=n.n(o);a.a},b167:function(e,t,n){"use strict";(function(e){var o=n("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("7eb4")),i=o(n("ee10")),u=o(n("af34")),c=n("4860"),r=n("64af"),s=n("789c"),l={mixins:[s.myMixin],data:function(){return{selectedCategoryIndex:0,pickerRange:[],isImageSelected:!1,imglogo:null,setp:1,isPaid:!1,formData:{goodsname:null,imglogo:null,category_id:null}}},computed:{BtnText:function(){return 1==this.setp?"下一步":"提交"}},onLoad:function(){this.fetchCategories()},methods:{onCategoryChange:function(e){var t=e.detail.value;this.selectedCategoryIndex=t,this.formData.category_id=t>0?this.categories[t-1].id:""},fetchCategories:function(){var t=this;c.api.cglist().then((function(n){if(200===n.code){var o=n.data.listdata.map((function(e){return{id:e.id,content:e.content}}));t.categories=o,t.pickerRange=["请选择分类"].concat((0,u.default)(o.map((function(e){return e.content})))),o.length>0&&(t.category_id=o[0].id)}else e.showToast({title:n.message||"获取分类失败",icon:"none"})})).catch((function(t){console.error(t),e.showToast({title:"获取分类失败",icon:"none"})}))},handleConfirm:function(){var t=this;c.api.addPreSale(this.formData).then((function(n){console.log(n),200==n.code?(e.showToast({icon:"success",title:"添加成功"}),setTimeout((function(){t.customizeBack()}),2e3)):e.showToast({icon:"error",title:n.msg})}))},chooseImage:function(){var t=this;e.chooseImage({count:1,sizeType:["compressed","original"],sourceType:["album","camera"],success:function(e){var n=e.tempFilePaths;if(n.length>0){var o=(0,r.useUpload)({uploadPath:"/group1/upload",tempFilePaths:n[0],file:e.tempFiles[0]}),a=o.upload;o.request;a().then((function(e){var n=JSON.parse(e);t.formData.imglogo=c.UPLOAD_URL+n.data.path,t.isImageSelected=!0}))}}})},formatWeek:function(e){var t=new Date;t.setDate(t.getDate()+7*(e-1));var n=new Date(t);return n.setDate(t.getDate()+6),"".concat(this.formatDate(t)," 至 ").concat(this.formatDate(n))},formatDate:function(e){return"".concat(e.getMonth()+1,"-").concat(e.getDate())},gotoSupplement:function(){var e=this;return(0,i.default)(a.default.mark((function t(){return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.setp++,e.setp>2&&e.handleConfirm();case 2:case"end":return t.stop()}}),t)})))()}}};t.default=l}).call(this,n("df3c")["default"])},f08b:function(e,t,n){"use strict";n.r(t);var o=n("b167"),a=n.n(o);for(var i in o)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a}},[["3ebb","common/runtime","common/vendor"]]]);