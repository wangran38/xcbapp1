(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/preSale/preSale"],{2883:function(e,t,n){"use strict";n.r(t);var i=n("4d88"),a=n("f08b");for(var o in a)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(o);n("4147");var r=n("828b"),s=Object(r["a"])(a["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],void 0);t["default"]=s.exports},"342a":function(e,t,n){},"3ebb":function(e,t,n){"use strict";(function(e,t){var i=n("47a9");n("89ee");i(n("3240"));var a=i(n("2883"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(a.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])},4147:function(e,t,n){"use strict";var i=n("342a"),a=n.n(i);a.a},"4d88":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return i}));var i={uniIcons:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-icons/components/uni-icons/uni-icons")]).then(n.bind(null,"a7f4"))},uniForms:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-forms/components/uni-forms/uni-forms")]).then(n.bind(null,"a7dd"))},uniFormsItem:function(){return n.e("uni_modules/uni-forms/components/uni-forms-item/uni-forms-item").then(n.bind(null,"a9ba"))},uniEasyinput:function(){return n.e("uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput").then(n.bind(null,"2b45"))},uniDatetimePicker:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-datetime-picker/components/uni-datetime-picker/uni-datetime-picker")]).then(n.bind(null,"173b"))}},a=function(){var e=this,t=e.$createElement,n=(e._self._c,{color:e.isPaid?"#999":"#FF4444"}),i={color:e.isPaid?"#999":"#FF4444"};e._isMounted||(e.e0=function(t){e.disabled=!e.disabled}),e.$mp.data=Object.assign({},{$root:{a0:n,a1:i}})},o=[]},b167:function(e,t,n){"use strict";(function(e){var i=n("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("7eb4")),o=i(n("ee10")),r=i(n("af34")),s=n("4860"),u=n("64af"),c=n("789c"),l={mixins:[c.myMixin],data:function(){return{selectedCategoryIndex:0,pickerRange:[],isImageSelected:!1,imglogo:null,disabled:!1,agreed:!1,goodsInfo:{name:"有机高山娃娃菜",price:12.8,unit:"斤",weekSelection:3},setp:1,isPaid:!1,formData:{goodsname:null,goodstotal:null,ispresale:1,unit:null,imglogo:null,sellbegintime:null,sellendtime:null,presaleprice:null,price:null}}},computed:{supplementProgress:function(){var t=e.getStorageSync("supplementData")||{};return Math.min(20*Object.keys(t).length,100)}},onLoad:function(){this.fetchCategories()},methods:{onCategoryChange:function(e){var t=e.detail.value;this.selectedCategoryIndex=t,this.category_id=t>0?this.categories[t-1].id:""},fetchCategories:function(){var t=this;s.api.cglist().then((function(n){if(200===n.code){var i=n.data.listdata.map((function(e){return{id:e.id,content:e.content}}));t.categories=i,t.pickerRange=["请选择分类"].concat((0,r.default)(i.map((function(e){return e.content})))),i.length>0&&(t.category_id=i[0].id)}else e.showToast({title:n.message||"获取分类失败",icon:"none"})})).catch((function(t){console.error(t),e.showToast({title:"获取分类失败",icon:"none"})}))},handleConfirm:function(){var t=this;this.disabled&&(this.formData.presaleprice=parseInt(this.formData.presaleprice),this.formData.price=parseInt(this.formData.price),s.api.addPreSale(this.formData).then((function(n){console.log(n),200==n.code?(e.showToast({icon:"success",title:"添加成功"}),setTimeout((function(){t.customizeBack()}),2e3)):e.showToast({icon:"error",title:n.msg})})))},switchChange:function(){this.formData.ispresale=1==this.formData.ispresale?2:1,console.log(this.formData.ispresale)},chooseImage:function(){var t=this;e.chooseImage({count:1,sizeType:["compressed","original"],sourceType:["album","camera"],success:function(e){var n=e.tempFilePaths;if(n.length>0){var i=(0,u.useUpload)({uploadPath:"/group1/upload",tempFilePaths:n[0],file:e.tempFiles[0]}),a=i.upload;i.request;a().then((function(e){var n=JSON.parse(e);t.formData.imglogo=s.UPLOAD_URL+n.data.path,t.isImageSelected=!0}))}}})},formatWeek:function(e){var t=new Date;t.setDate(t.getDate()+7*(e-1));var n=new Date(t);return n.setDate(t.getDate()+6),"".concat(this.formatDate(t)," 至 ").concat(this.formatDate(n))},formatDate:function(e){return"".concat(e.getMonth()+1,"-").concat(e.getDate())},gotoSupplement:function(){var e=this;return(0,o.default)(a.default.mark((function t(){return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.setp=2;case 1:case"end":return t.stop()}}),t)})))()}}};t.default=l}).call(this,n("df3c")["default"])},f08b:function(e,t,n){"use strict";n.r(t);var i=n("b167"),a=n.n(i);for(var o in i)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(o);t["default"]=a.a}},[["3ebb","common/runtime","common/vendor"]]]);