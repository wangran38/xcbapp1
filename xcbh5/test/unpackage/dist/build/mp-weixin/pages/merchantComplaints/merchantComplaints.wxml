<view class="complaint-page"><view class="page-header"><text class="title">投诉与建议</text></view><uni-forms class="vue-ref" vue-id="4c71dd00-1" model="{{formData}}" data-ref="form" bind:__l="__l" vue-slots="{{['default']}}"><uni-forms-item vue-id="{{('4c71dd00-2')+','+('4c71dd00-1')}}" label="投诉类型" required="{{true}}" name="type" bind:__l="__l" vue-slots="{{['default']}}"><uni-data-select bind:input="__e" vue-id="{{('4c71dd00-3')+','+('4c71dd00-2')}}" localdata="{{complaintTypes}}" placeholder="请选择投诉类型" value="{{formData.type}}" data-event-opts="{{[['^input',[['__set_model',['$0','type','$event',[]],['formData']]]]]}}" bind:__l="__l"></uni-data-select></uni-forms-item><uni-forms-item vue-id="{{('4c71dd00-4')+','+('4c71dd00-1')}}" label="相关订单" required="{{true}}" name="orderId" bind:__l="__l" vue-slots="{{['default']}}"><uni-easyinput vue-id="{{('4c71dd00-5')+','+('4c71dd00-4')}}" placeholder="输入订单编号" suffixIcon="search" value="{{formData.orderId}}" data-event-opts="{{[['^iconClick',[['showOrderList']]],['^input',[['__set_model',['$0','orderId','$event',[]],['formData']]]]]}}" bind:iconClick="__e" bind:input="__e" bind:__l="__l"></uni-easyinput></uni-forms-item><uni-forms-item vue-id="{{('4c71dd00-6')+','+('4c71dd00-1')}}" label="投诉描述" required="{{true}}" name="content" bind:__l="__l" vue-slots="{{['default']}}"><textarea class="content-input" placeholder="请详细描述您的问题（不少于20字）" auto-height="{{true}}" data-event-opts="{{[['input',[['__set_model',['$0','content','$event',[]],['formData']]]]]}}" value="{{formData.content}}" bindinput="__e"></textarea></uni-forms-item><view class="upload-section"><text class="upload-title">上传凭证（最多4张）</text><uni-file-picker vue-id="{{('4c71dd00-7')+','+('4c71dd00-1')}}" fileMediatype="image" limit="4" image-styles="{{imageStyles}}" value="{{formData.files}}" data-event-opts="{{[['^select',[['handleFileSelect']]],['^input',[['__set_model',['$0','files','$event',[]],['formData']]]]]}}" bind:select="__e" bind:input="__e" bind:__l="__l"></uni-file-picker></view><uni-forms-item vue-id="{{('4c71dd00-8')+','+('4c71dd00-1')}}" label="联系方式" required="{{true}}" name="contact" bind:__l="__l" vue-slots="{{['default']}}"><uni-easyinput bind:input="__e" vue-id="{{('4c71dd00-9')+','+('4c71dd00-8')}}" placeholder="手机/邮箱" value="{{formData.contact}}" data-event-opts="{{[['^input',[['__set_model',['$0','contact','$event',[]],['formData']]]]]}}" bind:__l="__l"></uni-easyinput></uni-forms-item><button data-event-opts="{{[['tap',[['handleSubmit',['$event']]]]]}}" class="{{['submit-btn',(!formValid)?'disabled':'']}}" bindtap="__e"><block wx:if="{{loading}}"><text class="loading-text">提交中...</text></block><block wx:else><text>立即提交</text></block></button></uni-forms><uni-popup class="vue-ref" vue-id="4c71dd00-10" type="bottom" data-ref="orderPopup" bind:__l="__l" vue-slots="{{['default']}}"><view class="order-popup"><view class="popup-header"><text>选择订单</text><uni-icons vue-id="{{('4c71dd00-11')+','+('4c71dd00-10')}}" type="close" data-event-opts="{{[['^click',[['closeOrderList']]]]}}" bind:click="__e" bind:__l="__l"></uni-icons></view><scroll-view class="order-list" scroll-y="{{true}}"><block wx:for="{{$root.l0}}" wx:for-item="order" wx:for-index="__i0__" wx:key="id"><view data-event-opts="{{[['tap',[['selectOrder',['$0'],[[['recentOrders','id',order.$orig.id]]]]]]]}}" class="order-item" bindtap="__e"><text class="order-no">{{order.$orig.orderNo}}</text><text class="order-date">{{order.m0}}</text></view></block></scroll-view></view></uni-popup></view>