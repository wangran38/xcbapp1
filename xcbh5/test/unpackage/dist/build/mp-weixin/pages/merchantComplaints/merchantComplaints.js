(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/merchantComplaints/merchantComplaints"],{"0f48":function(e,n,t){"use strict";var i=t("8c86"),o=t.n(i);o.a},"206f":function(e,n,t){"use strict";t.r(n);var i=t("5bb1"),o=t.n(i);for(var r in i)["default"].indexOf(r)<0&&function(e){t.d(n,e,(function(){return i[e]}))}(r);n["default"]=o.a},"21b2":function(e,n,t){"use strict";(function(e,n){var i=t("47a9");t("89ee");i(t("3240"));var o=i(t("a80e"));e.__webpack_require_UNI_MP_PLUGIN__=t,n(o.default)}).call(this,t("3223")["default"],t("df3c")["createPage"])},"339e":function(e,n,t){"use strict";t.d(n,"b",(function(){return o})),t.d(n,"c",(function(){return r})),t.d(n,"a",(function(){return i}));var i={uniForms:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uni-forms/components/uni-forms/uni-forms")]).then(t.bind(null,"a7dd"))},uniFormsItem:function(){return t.e("uni_modules/uni-forms/components/uni-forms-item/uni-forms-item").then(t.bind(null,"a9ba"))},uniDataSelect:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uni-data-select/components/uni-data-select/uni-data-select")]).then(t.bind(null,"73e5"))},uniEasyinput:function(){return t.e("uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput").then(t.bind(null,"2b45"))},uniFilePicker:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uni-file-picker/components/uni-file-picker/uni-file-picker")]).then(t.bind(null,"3265"))},uniPopup:function(){return t.e("uni_modules/uni-popup/components/uni-popup/uni-popup").then(t.bind(null,"8858"))},uniIcons:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uni-icons/components/uni-icons/uni-icons")]).then(t.bind(null,"a7f4"))}},o=function(){var e=this,n=e.$createElement,t=(e._self._c,e.__map(e.recentOrders,(function(n,t){var i=e.__get_orig(n),o=e.formatDate(n.date);return{$orig:i,m0:o}})));e.$mp.data=Object.assign({},{$root:{l0:t}})},r=[]},"5bb1":function(e,n,t){"use strict";(function(e){var i=t("47a9");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=i(t("7eb4")),r=i(t("34cf")),u=i(t("ee10")),a={data:function(){return{loading:!1,formData:{type:"",orderId:"",content:"",files:[],contact:""},complaintTypes:[{value:1,text:"商品质量问题"},{value:2,text:"配送问题"},{value:3,text:"服务态度"},{value:4,text:"其他问题"}],imageStyles:{width:160,height:160,border:{color:"#eee",width:1,style:"solid"}}}},computed:{},methods:{validateContent:function(e,n,t){return n.length<20&&t("描述需不少于20字"),!0},validateContact:function(e,n,t){return/^1[3-9]\d{9}$/.test(n)||/^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/.test(n)||t("请输入有效的手机或邮箱"),!0},handleFileSelect:function(n){if(n.tempFilePaths.length>4)return e.showToast({title:"最多选择4张图片",icon:"none"}),!1},showOrderList:function(){this.$refs.orderPopup.open()},selectOrder:function(e){this.formData.orderId=e.orderNo,this.$refs.orderPopup.close()},closeOrderList:function(){this.$refs.orderPopup.close()},handleSubmit:function(){var n=this;return(0,u.default)(o.default.mark((function t(){var i;return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!n.loading&&n.formValid){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,n.loading=!0,t.next=6,n.$refs.form.validate();case 6:return i=new FormData,Object.entries(n.formData).forEach((function(e){var n=(0,r.default)(e,2),t=n[0],o=n[1];"files"===t?o.forEach((function(e){return i.append("files",e)})):i.append(t,o)})),t.next=10,n.$api.submitComplaint(i);case 10:e.showToast({title:"提交成功"}),setTimeout((function(){return e.navigateBack()}),1500),t.next=17;break;case 14:t.prev=14,t.t0=t["catch"](2),console.error("提交失败:",t.t0);case 17:return t.prev=17,n.loading=!1,t.finish(17);case 20:case"end":return t.stop()}}),t,null,[[2,14,17,20]])})))()},formatDate:function(e){return new Date(e).toLocaleDateString()}}};n.default=a}).call(this,t("df3c")["default"])},"8c86":function(e,n,t){},a80e:function(e,n,t){"use strict";t.r(n);var i=t("339e"),o=t("206f");for(var r in o)["default"].indexOf(r)<0&&function(e){t.d(n,e,(function(){return o[e]}))}(r);t("0f48");var u=t("828b"),a=Object(u["a"])(o["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],void 0);n["default"]=a.exports}},[["21b2","common/runtime","common/vendor"]]]);