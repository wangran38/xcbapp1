(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/login"],{"1f4f":function(t,n,e){},2109:function(t,n,e){"use strict";e.d(n,"b",(function(){return r})),e.d(n,"c",(function(){return i})),e.d(n,"a",(function(){return o}));var o={uniIcons:function(){return Promise.all([e.e("common/vendor"),e.e("uni_modules/uni-icons/components/uni-icons/uni-icons")]).then(e.bind(null,"a7f4"))}},r=function(){var t=this.$createElement;this._self._c},i=[]},"69f1":function(t,n,e){"use strict";e.r(n);var o=e("2109"),r=e("d995");for(var i in r)["default"].indexOf(i)<0&&function(t){e.d(n,t,(function(){return r[t]}))}(i);e("8483");var a=e("828b"),u=Object(a["a"])(r["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);n["default"]=u.exports},7356:function(t,n,e){"use strict";(function(t){var o=e("47a9");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=o(e("7eb4")),i=o(e("ee10")),a=e("4860"),u={data:function(){return{form:{username:"",password:""},showPassword:!1,loading:!1}},computed:{formValid:function(){return/^1[3-9]\d{9}$/.test(this.form.username)&&this.form.password.length>=6}},methods:{togglePassword:function(){this.showPassword=!this.showPassword},login:function(){var n=this;return(0,i.default)(r.default.mark((function e(){var o,i,u;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.api.login(n.form.username,n.form.password);case 3:o=e.sent,200===o.code?(i=o.data.token,t.setStorageSync("token",i),u=new Promise((function(e,o){"123456"==n.form.password?(t.showToast({icon:"error",title:"密码过于简单,请用户自行修改以确保账号安全",duration:1e3}),setTimeout((function(){e(200)}),2e3)):e(201)})),u.then((function(n){if(200!=n)return t.showToast({icon:"loading",title:"正在登录.....",duration:1e3}),n;t.showToast({icon:"loading",title:"正在登录.....",duration:2e3}),setTimeout((function(){return n}),1500)})).then((function(n){setTimeout((function(){t.switchTab({url:"/pages/index/index"})}),1e3)}))):t.showToast({title:o.msg||o.message,icon:"none"}),e.next=11;break;case 7:e.prev=7,e.t0=e["catch"](0),console.log(e.t0),t.showToast({title:"登录失败",icon:"error"});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))()},gotoRegster:function(){t.navigateTo({url:"/pages/register/register"})},gotoUptdatePwd:function(){t.navigateTo({url:"/subPackages/settings/updatePwd/updatePwd"})}}};n.default=u}).call(this,e("df3c")["default"])},8483:function(t,n,e){"use strict";var o=e("1f4f"),r=e.n(o);r.a},d995:function(t,n,e){"use strict";e.r(n);var o=e("7356"),r=e.n(o);for(var i in o)["default"].indexOf(i)<0&&function(t){e.d(n,t,(function(){return o[t]}))}(i);n["default"]=r.a},f2e0:function(t,n,e){"use strict";(function(t,n){var o=e("47a9");e("89ee");o(e("3240"));var r=o(e("69f1"));t.__webpack_require_UNI_MP_PLUGIN__=e,n(r.default)}).call(this,e("3223")["default"],e("df3c")["createPage"])}},[["f2e0","common/runtime","common/vendor"]]]);