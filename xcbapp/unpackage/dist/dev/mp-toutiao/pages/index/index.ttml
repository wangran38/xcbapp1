<view class="container"><view class="location-header"><view data-event-opts="{{[['tap',[['toindex1',['$event']]]]]}}" class="location-info" bindtap="__e"><uni-icons vue-id="8dda190e-1" type="location-filled" size="22" color="#4a90e2" bind:__l="__l"></uni-icons><text class="market-name">{{marketName||'暂未选中市场'}}</text><uni-icons vue-id="8dda190e-2" type="arrowright" size="16" color="#999" bind:__l="__l"></uni-icons></view><uni-icons class="scan-btn" vue-id="8dda190e-3" type="scan" size="32" data-event-opts="{{[['^click',[['scan']]]]}}" bind:click="__e" bind:__l="__l"></uni-icons></view><view class="search-container"><view class="search-bar"><uni-icons vue-id="8dda190e-4" type="search" size="18" color="#b2b2b2" bind:__l="__l"></uni-icons><input class="search-input" placeholder="搜索摊位/商品" placeholder-class="placeholder-style" data-event-opts="{{[['input',[['__set_model',['$0','title','$event',[]],['searchParams']]]]]}}" value="{{searchParams.title}}" bindinput="__e"/><button data-event-opts="{{[['tap',[['reloadData',['$event']]]]]}}" class="search-btn" bindtap="__e">搜索</button></view></view><scroll-view class="category-nav" scroll-x="{{true}}" scroll-with-animation="{{true}}"><block tt:for="{{tabs}}" tt:for-item="item" tt:for-index="__i0__" tt:key="id"><view data-event-opts="{{[['tap',[['goToshoppingPageList',['$0'],[[['tabs','id',item.id]]]]]]]}}" class="nav-item" bindtap="__e"><text class="nav-text">{{item.title}}</text><block tt:if="{{selectedCategoryId===item.id}}"><view class="nav-indicator"></view></block></view></block></scroll-view><scroll-view class="category-filter" scroll-x="{{true}}"><block tt:for="{{categories}}" tt:for-item="item" tt:for-index="__i1__" tt:key="id"><view data-event-opts="{{[['tap',[['filterByCategory',['$0'],[[['categories','id',item.id,'id']]]]]]]}}" class="{{(('filter-item')+' '+((item.id===selectedCategoryId)?'active':''))}}" bindtap="__e"><text class="filter-text">{{item.title}}</text></view></block></scroll-view><scroll-view class="stall-list" scroll-y="true" scroll-x="false" data-event-opts="{{[['scrolltolower',[['handleScrollToLower',['$event']]]]]}}" bindscrolltolower="__e"><view class="stall-grid"><block tt:for="{{pageData}}" tt:for-item="item" tt:for-index="__i2__" tt:key="id"><view data-event-opts="{{[['tap',[['navigateToShopDetails',['$0'],[[['pageData','id',item.id,'id']]]]]]]}}" class="stall-card" bindtap="__e"><image class="stall-image" src="{{item.logo||'/static/default-logo.png'}}" mode="aspectFill" lazy-load="{{true}}"></image><view class="stall-info"><text class="stall-title">{{item.title}}</text><view class="meta-container"><text class="meta-item">{{'地区:'+item.area_name+''}}</text><text class="meta-item">{{'类型:'+(item.category_name||'未知类目')+''}}</text></view></view></view></block></view><block tt:if="{{pageLoading}}"><view class="loading-more"><uni-load-more vue-id="8dda190e-5" status="loading" bind:__l="__l"></uni-load-more></view></block><block tt:if="{{!hasMore}}"><view class="loading-more"><text class="no-more">- 已经到底了 -</text></view></block></scroll-view><float-ball vue-id="8dda190e-6" bind:__l="__l"></float-ball></view>