{"version":3,"sources":["uni-app:///main.js","webpack:///E:/xcbh5/xcbh5/test/subPackages/settings/version/version.vue?b711","webpack:///E:/xcbh5/xcbh5/test/subPackages/settings/version/version.vue?c367","webpack:///E:/xcbh5/xcbh5/test/subPackages/settings/version/version.vue?0838","webpack:///E:/xcbh5/xcbh5/test/subPackages/settings/version/version.vue?6977","uni-app:///subPackages/settings/version/version.vue","webpack:///E:/xcbh5/xcbh5/test/subPackages/settings/version/version.vue?cad8","webpack:///E:/xcbh5/xcbh5/test/subPackages/settings/version/version.vue?e5af"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","latestVersion","currentVersion","downloadPercent","updating","updateContent","downloading","computed","buttonLabel","progressPhrase","contentList","btnText","mounted","methods","initUpdateManager","updateManager","registerListeners","manager","uni","title","icon","duration","handleUpdate","mask","applyUpdate","content","confirmText","success","complete","simulateProgress","current","clearInterval"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,gBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAgI;AAChI;AAC2D;AACL;AACsC;;;AAG5F;AACqK;AACrK,gBAAgB,+KAAU;AAC1B,EAAE,6EAAM;AACR,EAAE,8FAAM;AACR,EAAE,uGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,kGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAimB,CAAgB,2nBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eC8CrnB;EACAC;IACA;MACA;MACAC;MACAC;MACAC;MACAC;MACAC,gBACA,SACA;MACAC;IACA;EACA;EACAC;IACAC;MACA,oDACA,6BACA;IACA;IACAC;MACA,eACA,gBACA,WACA,YACA,WACA,OACA;MACA;IACA;IACAC;MACA;QAAA;MAAA;IACA;IACAC;MACA;QACA;MACA;MACA;IACA;EACA;EACAC,6BAIA;EACAC;IACA;IACAC;MAAA;MACA;MAEA;MAEAC;QACA;UACA;UACA;QACA;MACA;IACA;IAEA;IACAC;MAAA;MACA;MACAC;QACA;QACA;MACA;;MAEA;MACAA;QACAC;UACAC;UACAC;UACAC;QACA;QACA;MACA;;MAEA;MACA;IACA;IAEA;IACAC;MACA;MACA;MACA3B;QACAwB;QACAI;MACA;;MAEA;MACA;QACA;MACA;IACA;IAEA;IACAC;MAAA;MACAN;QACAC;QACAM;QACAC;QACAC;UACA;YACAV;UACA;QACA;QACAW;UACA;UACAjC;QACA;MACA;IACA;IAEA;IACAkC;MAAA;MACA;MACA;QACA;UACAC;UACA;QACA;UACAC;QACA;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;AC9KA;AAAA;AAAA;AAAA;AAAoqC,CAAgB,0oCAAG,EAAC,C;;;;;;;;;;;ACAxrC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"subPackages/settings/version/version.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './subPackages/settings/version/version.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./version.vue?vue&type=template&id=c0284b76&scoped=true&\"\nvar renderjs\nimport script from \"./version.vue?vue&type=script&lang=js&\"\nexport * from \"./version.vue?vue&type=script&lang=js&\"\nimport style0 from \"./version.vue?vue&type=style&index=0&id=c0284b76&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c0284b76\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"subPackages/settings/version/version.vue\"\nexport default component.exports","export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./version.vue?vue&type=template&id=c0284b76&scoped=true&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./version.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./version.vue?vue&type=script&lang=js&\"","<template>\n  <view class=\"modern-update\">\n    <!-- 动态背景层 -->\n    <view class=\"background-wave\"></view>\n    \n    <!-- 主内容容器 -->\n    <view class=\"update-card\">\n      <!-- 头部图标 -->\n      <view class=\"header\">\n        <view class=\"icon-container\">\n          <image class=\"update-icon\" src=\"/static/rocket.svg\" mode=\"aspectFit\"></image>\n          <view class=\"shine-effect\"></view>\n        </view>\n      </view>\n\n      <!-- 版本信息 -->\n      <view class=\"version-info\">\n        <text class=\"version-label\">新版本</text>\n        <text class=\"version-number\">v{{ latestVersion }}</text>\n      </view>\n\n      <!-- 更新内容 -->\n      <scroll-view class=\"changelog\" scroll-y>\n        <view v-for=\"(item, index) in updateContent\" :key=\"index\" class=\"changelog-item\">\n          <image class=\"item-icon\" src=\"/static/check-circle.svg\"></image>\n          <text class=\"item-text\">{{ item }}</text>\n        </view>\n      </scroll-view>\n\n      <!-- 进度指示 -->\n      <view class=\"progress-container\" v-if=\"updating\">\n        <view class=\"progress-bar\" :style=\"{ width: downloadPercent + '%' }\">\n          <view class=\"progress-pulse\"></view>\n        </view>\n        <text v-if=\"updating\"  class=\"progress-text\">{{ progressPhrase }}</text>\n      </view>\n\n      <!-- 操作按钮 -->\n      <button class=\"update-button\" :disabled=\"updating\" @click=\"handleUpdate\">\n        {{ buttonLabel }}\n      </button>\n    </view>\n  </view>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\r\n\t// buttonLabel:'更新版本',\n      latestVersion: '2.0.0',\n      currentVersion: '1.0.0',\n      downloadPercent: 0,\n      updating: false,\n      updateContent: [\n        '关闭线上调试',\n      ],\r\n\t  downloading:false\n    }\n  },\n  computed: {\r\n\t  buttonLabel() {\r\n\t        return this.updating ? \r\n\t          `更新中 ${this.downloadPercent}%` : \r\n\t          '立即体验新版本'\r\n\t      },\r\n\t  progressPhrase() {\r\n\t        const phrases = [\r\n\t          '正在连接更新服务器...',\r\n\t          '发现可用更新包',\r\n\t          '正在优化性能模块',\r\n\t          '校验文件完整性',\r\n\t          '准备就绪'\r\n\t        ]\r\n\t        return phrases[Math.min(Math.floor(this.downloadPercent/25), 4)]\r\n\t      },\n    contentList() {\n      return this.updateContent.filter(Boolean).map(item => item.trim())\n    },\n    btnText() {\n      if (this.updating) {\n        return this.downloadPercent === 100 ? '安装中...' : `下载中 ${this.downloadPercent}%`\n      }\n      return '立即更新'\n    },\n  },\n  mounted() {\n    // #ifdef MP-WEIXIN\n    this.initUpdateManager()\n    // #endif\n  },\n  methods: {\n    // 初始化更新管理器\n    initUpdateManager() {\n      if (!wx.canIUse('getUpdateManager')) return\n      \n      const updateManager = wx.getUpdateManager()\n      \n      updateManager.onCheckForUpdate(res => {\n        if (res.hasUpdate) {\n          this.showUpdatePage = true\n          this.registerListeners(updateManager)\n        }\n      })\n    },\n\n    // 注册更新监听器\n    registerListeners(manager) {\n      // 下载进度事件\n      manager.onUpdateReady(() => {\n        this.downloadPercent = 100\n        this.applyUpdate(manager)\n      })\n\n      // 下载失败处理\n      manager.onUpdateFailed(() => {\n        uni.showToast({\n          title: '更新失败',\n          icon: 'none',\n          duration: 2000\n        })\n        this.updating = false\n      })\n\n      // 下载进度模拟（小程序无真实进度）\n      this.simulateProgress()\n    },\n\n    // 处理更新操作\n    handleUpdate() {\n      this.updating = true\r\n\t  this.simulateProgress()\n      wx.showLoading({\n        title: '准备更新',\n        mask: true\n      })\n      \n      // 触发强制更新\n      if (this.downloadPercent === 100) {\n        this.applyUpdate(wx.getUpdateManager())\n      }\n    },\n\n    // 应用更新\n    applyUpdate(manager) {\n      uni.showModal({\n        title: '更新提示',\n        content: '新版本已就绪，立即重启应用？',\n        confirmText: '立即重启',\n        success: res => {\n          if (res.confirm) {\n            manager.applyUpdate()\n          }\n        },\n        complete: () => {\n          this.updating = false\n          wx.hideLoading()\n        }\n      })\n    },\n\n    // 模拟进度（因小程序无真实进度事件）\n    simulateProgress() {\n      let current = 0\n      const timer = setInterval(() => {\n        if (current < 95) {\n          current += Math.floor(Math.random() * 15 + 5)\n          this.downloadPercent = Math.min(current, 95)\n        } else {\n          clearInterval(timer)\n        }\n      }, 1000)\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.modern-update {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  z-index: 9999;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  overflow: hidden;\n}\n\n.background-wave {\n  position: absolute;\n  width: 200%;\n  height: 200%;\n  background: rgba(255,255,255,0.1);\n  border-radius: 40%;\n  animation: wave 20s infinite linear;\n}\n\n@keyframes wave {\n  0% { transform: rotate(0deg) translateY(50px); }\n  100% { transform: rotate(360deg) translateY(50px); }\n}\n\n.update-card {\n  background: rgba(255,255,255,0.95);\n  border-radius: 24px;\n  padding: 40rpx;\n  width: 85%;\n  max-width: 600rpx;\n  box-shadow: 0 10px 30px rgba(0,0,0,0.15);\n  backdrop-filter: blur(10px);\n}\n\n.header {\n  position: relative;\n  margin-bottom: 40rpx;\n}\n\n.icon-container {\n  position: relative;\n  width: 120rpx;\n  height: 120rpx;\n  margin: 0 auto;\n  \n  .update-icon {\n    width: 100%;\n    height: 100%;\n    filter: drop-shadow(0 4px 6px rgba(102, 126, 234, 0.3));\n  }\n  \n  .shine-effect {\n    position: absolute;\n    top: -10px;\n    left: -10px;\n    width: 140%;\n    height: 140%;\n    background: radial-gradient(circle, rgba(255,255,255,0.4) 0%, transparent 60%);\n    animation: shine 2s ease-in-out infinite;\n  }\n}\n\n@keyframes shine {\n  0%, 100% { opacity: 0.4; transform: scale(0.9); }\n  50% { opacity: 0.8; transform: scale(1.1); }\n}\n\n.version-info {\n  text-align: center;\n  margin-bottom: 40rpx;\n  \n  .version-label {\n    display: block;\n    color: #667eea;\n    font-size: 28rpx;\n    letter-spacing: 2px;\n    margin-bottom: 12rpx;\n  }\n  \n  .version-number {\n    font-size: 48rpx;\n    font-weight: 700;\n    color: #2d3748;\n  }\n}\n\n.changelog {\n  max-height: 300rpx;\n  margin-bottom: 40rpx;\n  \n  &-item {\n    display: flex;\n    align-items: center;\n    padding: 20rpx 0;\n    border-bottom: 1px solid rgba(0,0,0,0.05);\n    \n    .item-icon {\n      width: 36rpx;\n      height: 36rpx;\n      margin-right: 20rpx;\n    }\n    \n    .item-text {\n      font-size: 28rpx;\n      color: #4a5568;\n      line-height: 1.4;\n    }\n  }\n}\n\n.progress-container {\n  margin: 40rpx 0;\n  \n  .progress-bar {\n    height: 8px;\n    background: #667eea;\n    border-radius: 4px;\n    position: relative;\n    transition: width 0.3s ease;\n    \n    .progress-pulse {\n      position: absolute;\n      right: -8px;\n      top: -4px;\n      width: 16px;\n      height: 16px;\n      background: #667eea;\n      border-radius: 50%;\n      animation: pulse 1.5s infinite;\n    }\n  }\n  \n  .progress-text {\n    display: block;\n    text-align: center;\n    font-size: 24rpx;\n    color: #718096;\n    margin-top: 20rpx;\n  }\n}\n\n@keyframes pulse {\n  0% { box-shadow: 0 0 0 0 rgba(102, 126, 234, 0.4); }\n  70% { box-shadow: 0 0 0 10px rgba(102, 126, 234, 0); }\n  100% { box-shadow: 0 0 0 0 rgba(102, 126, 234, 0); }\n}\n\n.update-button {\n  background: linear-gradient(45deg, #667eea, #764ba2);\n  color: white;\n  height: 96rpx;\n  line-height: 96rpx;\n  border-radius: 48rpx;\n  font-size: 32rpx;\n  font-weight: 500;\n  position: relative;\n  overflow: hidden;\n  transition: all 0.3s ease;\n  \n  &::after {\n    border: none;\n  }\n  \n  &:active {\n    transform: scale(0.98);\n  }\n  \n  .loading-icon {\n    width: 40rpx;\n    height: 40rpx;\n    margin-right: 16rpx;\n    animation: spin 1s linear infinite;\n  }\n}\n\n@keyframes spin {\n  from { transform: rotate(0deg); }\n  to { transform: rotate(360deg); }\n}\n</style>","import mod from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./version.vue?vue&type=style&index=0&id=c0284b76&lang=scss&scoped=true&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./version.vue?vue&type=style&index=0&id=c0284b76&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1755047937678\n      var cssReload = require(\"D:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}