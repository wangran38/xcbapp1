{"version":3,"sources":["uni-app:///main.js","webpack:///E:/xcbh5/xcbh5/test/subPackages/shoppingPageList/prePurchaseDeposit/prePurchaseDeposit.vue?6327","webpack:///E:/xcbh5/xcbh5/test/subPackages/shoppingPageList/prePurchaseDeposit/prePurchaseDeposit.vue?3486","webpack:///E:/xcbh5/xcbh5/test/subPackages/shoppingPageList/prePurchaseDeposit/prePurchaseDeposit.vue?109d","webpack:///E:/xcbh5/xcbh5/test/subPackages/shoppingPageList/prePurchaseDeposit/prePurchaseDeposit.vue?46d6","uni-app:///subPackages/shoppingPageList/prePurchaseDeposit/prePurchaseDeposit.vue","webpack:///E:/xcbh5/xcbh5/test/subPackages/shoppingPageList/prePurchaseDeposit/prePurchaseDeposit.vue?16d7","webpack:///E:/xcbh5/xcbh5/test/subPackages/shoppingPageList/prePurchaseDeposit/prePurchaseDeposit.vue?171b"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","mixins","data","product","quantity","selectedPoint","deliveryPoints","shortRules","fromData","farmer_id","goods_num","price","payprice","payway","goods_arr","money","onLoad","query","console","computed","totalAmount","methods","startPayment","api","out_trade_no","uni","success","provider","code","idReseponse","title","icon","onKeyInput","detail","addGoods_num","minusGoods_num","handleSubmit","orderItem","goods_id","goodsname","goodsnum","pay_time","Date","res"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,2BAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAA2I;AAC3I;AACsE;AACL;AACsC;;;AAGvG;AACqK;AACrK,gBAAgB,+KAAU;AAC1B,EAAE,wFAAM;AACR,EAAE,yGAAM;AACR,EAAE,kHAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,6GAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,sTAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACjCA;AAAA;AAAA;AAAA;AAA4mB,CAAgB,soBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;ACsEhoB;AACA;AAGA;AAEA;AAAA;AAAA,eACA;EACAC;EACAC;IACA;MACAC;MAAA;MACAC;MACAC;MACAC;QACA;QACA;QACA;MAAA,CACA;MACAC,aACA;MACA;MACA;MAAA,CACA;;MACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;IACA;EACA;EACAC,8BAEA;IAAA,IADAC;IAEA;IACA;IACA;IACA;;IAEAC;;IAEA;IACA;IACA;IACA;IACA;EACA;;EACAC;IACA;IACAC;MACAF;MACA;IACA;EACA;EACAG;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OAEAC;kBACAC;gBACA;cAAA;gBAFAtB;gBAGA;kBACAA;kBACAuB,mDACAvB;oBACAwB;sBAAA;sBACA;oBACA;kBAAA,GACA;gBAEA;kBAAA;kBACAD;oBACAE;oBACAD;sBAAA;wBAAA;wBAAA;0BAAA;4BAAA;8BAAA;gCAAA;gCAAA,OAEAH;kCACAK;gCACA;8BAAA;gCAFAC;gCAGAX;gCAAA,MACAW;kCAAA;kCAAA;gCAAA;gCAAA;gCAAA,OACAN;kCACAC;gCACA;8BAAA;gCAFAtB;gCAGA;kCACAA;kCACA;kCACAuB,mDACAvB;oCACAwB;sCAAA;sCACA;oCACA;kCAAA,GACA;gCACA;kCACAD;oCACAK;oCACAC;kCACA;gCACA;gCAAA;gCAAA;8BAAA;gCAGAN;kCACAK;kCACAC;gCACA;8BAAA;8BAAA;gCAAA;4BAAA;0BAAA;wBAAA;sBAAA,CAEA;sBAAA;wBAAA;sBAAA;sBAAA;oBAAA;kBACA;gBAEA;kBACAN;oBACAK;oBACAC;kBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IAEAC,uCAEA;MAAA,IADAC;MAEA;QACA;MACA;QACAf;QACA;MACA;IACA;IACA;IACAgB;MACA;IACA;IACA;IACAC;MACA;MACA;IACA;IAEA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAEA;gBACA;gBACA;gBACAC;kBACAC;kBACAC;kBACAC;kBACA7B;kBACA8B;gBAAA,eACAC;gBAGA;gBAGA;;gBAGA;gBAAA;gBAAA,OAEAnB;cAAA;gBAAAoB;gBACA;kBACA;kBACAlB;oBACAK;oBACAC;kBACA;gBACA;kBACAN;oBACAK;oBACAC;kBACA;kBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;AC1PA;AAAA;AAAA;AAAA;AAA+qC,CAAgB,qpCAAG,EAAC,C;;;;;;;;;;;ACAnsC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"subPackages/shoppingPageList/prePurchaseDeposit/prePurchaseDeposit.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './subPackages/shoppingPageList/prePurchaseDeposit/prePurchaseDeposit.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./prePurchaseDeposit.vue?vue&type=template&id=2f6e0af6&scoped=true&\"\nvar renderjs\nimport script from \"./prePurchaseDeposit.vue?vue&type=script&lang=js&\"\nexport * from \"./prePurchaseDeposit.vue?vue&type=script&lang=js&\"\nimport style0 from \"./prePurchaseDeposit.vue?vue&type=style&index=0&id=2f6e0af6&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2f6e0af6\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"subPackages/shoppingPageList/prePurchaseDeposit/prePurchaseDeposit.vue\"\nexport default component.exports","export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./prePurchaseDeposit.vue?vue&type=template&id=2f6e0af6&scoped=true&\"","var components\ntry {\n  components = {\n    uniIcons: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-icons/components/uni-icons/uni-icons\" */ \"@/uni_modules/uni-icons/components/uni-icons/uni-icons.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./prePurchaseDeposit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./prePurchaseDeposit.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"container\">\r\n\t\t<!-- 商品主图卡片 -->\r\n\t\t<view class=\"product-card\">\r\n\t\t\t<image class=\"product-image\" :src=\"product.imglogo\" mode=\"aspectFill\"></image>\r\n\t\t\t<view class=\"product-info\">\r\n\t\t\t\t<text class=\"product-name\">{{ product.goodsname }}</text>\r\n\t\t\t\t<text class=\"product-tag\">预售商品</text>\r\n\t\t\t\t<view class=\"product-price-row\">\r\n\t\t\t\t\t<text class=\"product-price\">¥{{ product.price }}</text>\r\n\t\t\t\t\t<text class=\"product-unit\">{{ product.unit }}</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<text class=\"product-stock\">库存: {{ product.stock || '充足' }}</text>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 购买区域卡片 -->\r\n\t\t<view class=\"purchase-card\">\r\n\t\t\t<view class=\"form-group quantity-group\">\r\n\t\t\t\t<text class=\"form-label\">购买数量</text>\r\n\t\t\t\t<view class=\"quantity-selector\">\r\n\t\t\t\t\t<button class=\"quantity-btn minus\" :class=\"{'disabled': this.fromData.goods_num <= 0}\"\r\n\t\t\t\t\t\t@click=\"minusGoods_num\">-</button>\r\n\t\t\t\t\t<input class=\"quantity-input\" type=\"digit\" :value=\"fromData.goods_num\" @input=\"onKeyInput\"\r\n\t\t\t\t\t\tplaceholder=\"请输入数量\" />\r\n\t\t\t\t\t<button class=\"quantity-btn plus\" @click=\"addGoods_num\">+</button>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<view class=\"form-group pickup-group\">\r\n\t\t\t\t<text class=\"form-label\">提货点</text>\r\n\t\t\t\t<view class=\"pickup-list\">\r\n\t\t\t\t\t<view v-for=\"(point, index) in deliveryPoints\" :key=\"index\" class=\"pickup-item\"\r\n\t\t\t\t\t\t:class=\"{'selected': selectedPoint === point.id}\" @click=\"selectPoint(point.id)\">\r\n\t\t\t\t\t\t<view class=\"point-info\">\r\n\t\t\t\t\t\t\t<text class=\"point-name\">{{ point.name }}</text>\r\n\t\t\t\t\t\t\t<text class=\"point-address\">{{ point.address }}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"pickup-check\" v-if=\"selectedPoint === point.id\">\r\n\t\t\t\t\t\t\t<uni-icons type=\"check\" size=\"24\" />\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view v-if=\"!deliveryPoints.length\" class=\"no-point\">暂无可用提货点</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 规则说明卡片 -->\r\n\t\t<view class=\"rules-card\">\r\n\t\t\t<text class=\"section-title\">预售规则</text>\r\n\t\t\t<view class=\"rules-list\">\r\n\t\t\t\t<view v-for=\"(rule, index) in shortRules\" :key=\"index\" class=\"rule-item\">\r\n\t\t\t\t\t<text class=\"rule-text\">{{ index + 1 }}. {{ rule }}</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 底部操作栏 -->\r\n\t\t<view class=\"footer\">\r\n\t\t\t<view class=\"total-info\">\r\n\t\t\t\t<text class=\"total-label\">总计：</text>\r\n\t\t\t\t<text class=\"total-amount\">¥{{ totalAmount }}</text>\r\n\t\t\t</view>\r\n\t\t\t<button class=\"submit-btn\" @click=\"handleSubmit\">立即预订\r\n\t\t\t</button>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport decimal from 'decimal'\r\n\timport {\r\n\t\tmyMixin\r\n\t} from '@/utils/public.js'\r\n\timport {\r\n\t\tapi\r\n\t} from '@/api/index.js'\r\n\texport default {\r\n\t\tmixins: [myMixin],\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tproduct: {}, // 用于展示\r\n\t\t\t\tquantity: 1,\r\n\t\t\t\tselectedPoint: null,\r\n\t\t\t\tdeliveryPoints: [\r\n\t\t\t\t\t// { id: 1, name: '绿鲜社区店', address: '朝阳区光华路8号' },\r\n\t\t\t\t\t// { id: 2, name: '智慧生活超市', address: '海淀区中关村大街12号' },\r\n\t\t\t\t\t// { id: 3, name: '生鲜便利店', address: '西城区西单北大街109号' }\r\n\t\t\t\t],\r\n\t\t\t\tshortRules: [\r\n\t\t\t\t\t'定金支付后不可退换',\r\n\t\t\t\t\t// '提货时需出示订单二维码',\r\n\t\t\t\t\t// '预售商品到货后统一配送'\r\n\t\t\t\t],\r\n\t\t\t\tfromData: {\r\n\t\t\t\t\tfarmer_id: null,\r\n\t\t\t\t\tgoods_num: 1,\r\n\t\t\t\t\tprice: null,\r\n\t\t\t\t\tpayprice: null,\r\n\t\t\t\t\tpayway: 2,\r\n\t\t\t\t\tgoods_arr: [],\r\n\t\t\t\t\tmoney:null,\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad({\r\n\t\t\tquery\r\n\t\t}) {\r\n\t\t\tlet jsonQuery = JSON.parse(query)\r\n\t\t\tthis.product = jsonQuery\r\n\t\t\tthis.fromData.farmer_id = jsonQuery.farmers_id\r\n\t\t\tthis.fromData.money = jsonQuery.price // 商品单价\r\n\t\t\t\r\n\t\t\tconsole.log(\"生命周期执行:\", this.fromData.money, this.fromData.goods_num)\r\n\r\n\t\t\t// this.deliveryPoints = [{\r\n\t\t\t// \tid: 1,\r\n\t\t\t// \tname: this.product.pickaddress,\r\n\t\t\t// \taddress: this.product.pickaddress\r\n\t\t\t// }]\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\t// 合计金额\r\n\t\t\ttotalAmount() {\r\n\t\t\t\tconsole.log(\"初次载入\", this.fromData.money, this.fromData.goods_num)\r\n\t\t\t\treturn this.fromData.money ? new decimal(this.fromData.money).mul(this.fromData.goods_num).toNumber() :''\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t// 调用微信支付方法\r\n\t\t\tasync startPayment(out_trade_no) {\r\n\t\t\t\t// 获取微信支付需要的参数\r\n\t\t\t\tlet data = await api.wechatpay({\r\n\t\t\t\t\tout_trade_no\r\n\t\t\t\t})\r\n\t\t\t\tif (data.code == 200) {\r\n\t\t\t\t\tdata.data.timeStamp += ''\r\n\t\t\t\t\tuni.requestPayment({\r\n\t\t\t\t\t\t...data.data,\r\n\t\t\t\t\t\tsuccess: (res) => { // 支付成功的回调\r\n\t\t\t\t\t\t\tthis.customizeBack()\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t})\r\n\r\n\t\t\t\t} else if (data.code == 202) { // 未绑定uid就自动绑定并重新支付\r\n\t\t\t\t\tuni.login({\r\n\t\t\t\t\t\tprovider: 'true',\r\n\t\t\t\t\t\tsuccess: async res => {\r\n\t\t\t\t\t\t\t// 绑定openid\r\n\t\t\t\t\t\t\tlet idReseponse = await api.bindingOpenid({\r\n\t\t\t\t\t\t\t\tcode: res.code\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tconsole.log(idReseponse, data)\r\n\t\t\t\t\t\t\tif (idReseponse.code == 200) {\r\n\t\t\t\t\t\t\t\tlet data = await api.wechatpay({\r\n\t\t\t\t\t\t\t\t\tout_trade_no: this.out_trade_no\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\tif (data.code == 200) {\r\n\t\t\t\t\t\t\t\t\tdata.data.timeStamp += ''\r\n\t\t\t\t\t\t\t\t\t// 重新支付\r\n\t\t\t\t\t\t\t\t\tuni.requestPayment({\r\n\t\t\t\t\t\t\t\t\t\t...data.data,\r\n\t\t\t\t\t\t\t\t\t\tsuccess: (res) => { // 支付成功的回调\r\n\t\t\t\t\t\t\t\t\t\t\tthis.customizeBack()\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\ttitle: data.message,\r\n\t\t\t\t\t\t\t\t\t\ticon: 'error'\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: idReseponse.message,\r\n\t\t\t\t\t\t\t\t\ticon: 'error'\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: data.msg || data.message,\r\n\t\t\t\t\t\ticon: 'error'\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tonKeyInput({\r\n\t\t\t\tdetail\r\n\t\t\t}) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tthis.fromData.goods_num = Number(detail.value)\r\n\t\t\t\t} catch {\r\n\t\t\t\t\tconsole.log()\r\n\t\t\t\t\tnew Error(\"输出异常\")\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 添加商品数量\r\n\t\t\taddGoods_num() {\r\n\t\t\t\tthis.fromData.goods_num++\r\n\t\t\t},\r\n\t\t\t// 减少商品数量\r\n\t\t\tminusGoods_num() {\r\n\t\t\t\tif (this.fromData.goods_num <= 0) return;\r\n\t\t\t\tthis.fromData.goods_num--\r\n\t\t\t},\r\n\r\n\t\t\t// 提交订单\r\n\t\t\tasync handleSubmit() {\r\n\r\n\t\t\t\tthis.fromData.price = new decimal(this.fromData.money).mul(this.fromData.goods_num).toNumber()\r\n\t\t\t\tthis.fromData.payprice = new decimal(this.fromData.money).mul(this.fromData.goods_num).toNumber()\r\n\t\t\t\t// 处理商品数组\r\n\t\t\t\tlet orderItem = {\r\n\t\t\t\t\tgoods_id: this.product.id,\r\n\t\t\t\t\tgoodsname: this.product.goodsname,\r\n\t\t\t\t\tgoodsnum: this.fromData.goods_num,\r\n\t\t\t\t\tprice: this.fromData.price,\r\n\t\t\t\t\tpay_time: this.fromData.payprice,\r\n\t\t\t\t\tpay_time: Date.now()\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.fromData.goods_arr.push(orderItem)\r\n\r\n\r\n\t\t\t\tdelete this.fromData.money\r\n\r\n\r\n\t\t\t\t// console.log(this.fromData)\r\n\r\n\t\t\t\tlet res = await api.prePurchaseOrder(this.fromData)\r\n\t\t\t\tif (res.code == 200) {\r\n\t\t\t\t\tthis.startPayment(res.data.out_trade_no)\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '预订成功',\r\n\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: res.msg || res.message,\r\n\t\t\t\t\t\ticon: 'error'\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.fromData.goods_arr = [] // 清空商品数组\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t/* 基础布局 */\r\n\t.container {\r\n\t\tpadding: 30rpx;\r\n\t\tbackground-color: #f5f5f5;\r\n\t}\r\n\r\n\t/* 商品主图卡片 */\r\n\t.product-card {\r\n\t\tbackground-color: #fff;\r\n\t\tborder-radius: 20rpx;\r\n\t\toverflow: hidden;\r\n\t\tbox-shadow: 0 6rpx 20rpx rgba(0, 0, 0, 0.08);\r\n\t\tmargin-bottom: 30rpx;\r\n\t\tposition: relative;\r\n\r\n\t\t.product-image {\r\n\t\t\twidth: 100%;\r\n\t\t\theight: 400rpx;\r\n\t\t}\r\n\r\n\t\t.product-info {\r\n\t\t\tpadding: 30rpx;\r\n\r\n\t\t\t.product-name {\r\n\t\t\t\tfont-size: 36rpx;\r\n\t\t\t\tfont-weight: 700;\r\n\t\t\t\tcolor: #333;\r\n\t\t\t\tmargin-bottom: 15rpx;\r\n\t\t\t\tdisplay: block;\r\n\t\t\t}\r\n\r\n\t\t\t.product-tag {\r\n\t\t\t\tdisplay: inline-block;\r\n\t\t\t\tbackground-color: #ff4d4f;\r\n\t\t\t\tcolor: #fff;\r\n\t\t\t\tfont-size: 24rpx;\r\n\t\t\t\tpadding: 4rpx 12rpx;\r\n\t\t\t\tborder-radius: 4rpx;\r\n\t\t\t\tmargin-bottom: 20rpx;\r\n\t\t\t\tdisplay: block;\r\n\t\t\t}\r\n\r\n\t\t\t.product-price-row {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: baseline;\r\n\t\t\t\tmargin-bottom: 15rpx;\r\n\r\n\t\t\t\t.product-price {\r\n\t\t\t\t\tcolor: #ff4d4f;\r\n\t\t\t\t\tfont-size: 56rpx;\r\n\t\t\t\t\tfont-weight: 800;\r\n\t\t\t\t\tmargin-right: 10rpx;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.product-unit {\r\n\t\t\t\t\tcolor: #666;\r\n\t\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t.product-stock {\r\n\t\t\t\tcolor: #07c160;\r\n\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\tfont-weight: 500;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/* 购买区域卡片 */\r\n\t.purchase-card {\r\n\t\tbackground-color: #fff;\r\n\t\tborder-radius: 20rpx;\r\n\t\tpadding: 30rpx;\r\n\t\tbox-shadow: 0 6rpx 20rpx rgba(0, 0, 0, 0.08);\r\n\t\tmargin-bottom: 30rpx;\r\n\r\n\t\t.form-group {\r\n\t\t\tmargin-bottom: 30rpx;\r\n\r\n\t\t\t.form-label {\r\n\t\t\t\tfont-size: 32rpx;\r\n\t\t\t\tcolor: #333;\r\n\t\t\t\tfont-weight: 500;\r\n\t\t\t\tmargin-bottom: 20rpx;\r\n\t\t\t\tdisplay: block;\r\n\t\t\t\tposition: relative;\r\n\t\t\t\tpadding-left: 15rpx;\r\n\r\n\t\t\t\t&::before {\r\n\t\t\t\t\tcontent: '';\r\n\t\t\t\t\tposition: absolute;\r\n\t\t\t\t\tleft: 0;\r\n\t\t\t\t\ttop: 50%;\r\n\t\t\t\t\ttransform: translateY(-50%);\r\n\t\t\t\t\twidth: 6rpx;\r\n\t\t\t\t\theight: 26rpx;\r\n\t\t\t\t\tbackground-color: #007aff;\r\n\t\t\t\t\tborder-radius: 3rpx;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/* 数量选择器强化设计 */\r\n\t\t.quantity-group {\r\n\t\t\t.quantity-selector {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tborder: 3rpx solid #e5e5e5;\r\n\t\t\t\tborder-radius: 12rpx;\r\n\t\t\t\toverflow: hidden;\r\n\t\t\t\tbox-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.05);\r\n\r\n\t\t\t\t.quantity-btn {\r\n\t\t\t\t\twidth: 110rpx;\r\n\t\t\t\t\theight: 110rpx;\r\n\t\t\t\t\tline-height: 110rpx;\r\n\t\t\t\t\tfont-size: 52rpx;\r\n\t\t\t\t\tcolor: #333;\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\talign-items: center;\r\n\t\t\t\t\tjustify-content: center;\r\n\t\t\t\t\tbackground-color: #f9f9f9;\r\n\t\t\t\t\ttransition: all 0.2s;\r\n\r\n\t\t\t\t\t&.minus {\r\n\t\t\t\t\t\tcolor: #ff5252;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t&.plus {\r\n\t\t\t\t\t\tcolor: #07c160;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t&.disabled {\r\n\t\t\t\t\t\tcolor: #ccc;\r\n\t\t\t\t\t\tbackground-color: #f5f5f5;\r\n\t\t\t\t\t\tcursor: not-allowed;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t&:active {\r\n\t\t\t\t\t\tbackground-color: #f0f0f0;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.quantity-input {\r\n\t\t\t\t\tflex: 1;\r\n\t\t\t\t\theight: 110rpx;\r\n\t\t\t\t\ttext-align: center;\r\n\t\t\t\t\tfont-size: 44rpx;\r\n\t\t\t\t\tcolor: #333;\r\n\t\t\t\t\tborder: none;\r\n\t\t\t\t\toutline: none;\r\n\t\t\t\t\tbackground-color: #fff;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/* 自提点强化设计 */\r\n\t\t.pickup-group {\r\n\t\t\t.pickup-list {\r\n\t\t\t\t.pickup-item {\r\n\t\t\t\t\tpadding: 25rpx 0;\r\n\t\t\t\t\tborder-bottom: 1rpx solid #f5f5f5;\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\tjustify-content: space-between;\r\n\t\t\t\t\talign-items: center;\r\n\t\t\t\t\tposition: relative;\r\n\t\t\t\t\ttransition: all 0.3s;\r\n\r\n\t\t\t\t\t&:last-child {\r\n\t\t\t\t\t\tborder-bottom: none;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t&.selected {\r\n\t\t\t\t\t\t&::after {\r\n\t\t\t\t\t\t\tcontent: '';\r\n\t\t\t\t\t\t\tposition: absolute;\r\n\t\t\t\t\t\t\tright: 0;\r\n\t\t\t\t\t\t\ttop: 50%;\r\n\t\t\t\t\t\t\ttransform: translateY(-50%);\r\n\t\t\t\t\t\t\twidth: 8rpx;\r\n\t\t\t\t\t\t\theight: 40rpx;\r\n\t\t\t\t\t\t\tbackground-color: #07c160;\r\n\t\t\t\t\t\t\tborder-radius: 4rpx;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.point-info {\r\n\t\t\t\t\t\t.point-name {\r\n\t\t\t\t\t\t\tfont-size: 32rpx;\r\n\t\t\t\t\t\t\tcolor: #333;\r\n\t\t\t\t\t\t\tfont-weight: 500;\r\n\t\t\t\t\t\t\tmargin-bottom: 5rpx;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t.point-address {\r\n\t\t\t\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\t\t\t\tcolor: #666;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.pickup-check {\r\n\t\t\t\t\t\tcolor: #07c160;\r\n\t\t\t\t\t\tfont-size: 32rpx;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.no-point {\r\n\t\t\t\t\tpadding: 25rpx 0;\r\n\t\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\t\tcolor: #999;\r\n\t\t\t\t\ttext-align: center;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/* 规则说明卡片 */\r\n\t.rules-card {\r\n\t\tbackground-color: #fff;\r\n\t\tborder-radius: 20rpx;\r\n\t\tpadding: 30rpx;\r\n\t\tbox-shadow: 0 6rpx 20rpx rgba(0, 0, 0, 0.08);\r\n\t\tmargin-bottom: 120rpx;\r\n\r\n\t\t.section-title {\r\n\t\t\tfont-size: 32rpx;\r\n\t\t\tfont-weight: 600;\r\n\t\t\tcolor: #333;\r\n\t\t\tmargin-bottom: 25rpx;\r\n\t\t\tpadding-left: 15rpx;\r\n\t\t\tposition: relative;\r\n\r\n\t\t\t&::before {\r\n\t\t\t\tcontent: '';\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\tleft: 0;\r\n\t\t\t\ttop: 50%;\r\n\t\t\t\ttransform: translateY(-50%);\r\n\t\t\t\twidth: 6rpx;\r\n\t\t\t\theight: 26rpx;\r\n\t\t\t\tbackground-color: #007aff;\r\n\t\t\t\tborder-radius: 3rpx;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.rules-list {\r\n\t\t\t.rule-item {\r\n\t\t\t\tmargin-bottom: 20rpx;\r\n\r\n\t\t\t\t.rule-text {\r\n\t\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\t\tcolor: #666;\r\n\t\t\t\t\tline-height: 1.6;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/* 底部操作栏 */\r\n\t.footer {\r\n\t\tposition: fixed;\r\n\t\tbottom: 0;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\theight: 120rpx;\r\n\t\tbackground-color: #fff;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tpadding: 0 30rpx;\r\n\t\tbox-shadow: 0 -4rpx 12rpx rgba(0, 0, 0, 0.05);\r\n\t\tz-index: 10;\r\n\r\n\t\t.total-info {\r\n\t\t\tflex: 1;\r\n\r\n\t\t\t.total-label {\r\n\t\t\t\tfont-size: 32rpx;\r\n\t\t\t\tcolor: #333;\r\n\t\t\t}\r\n\r\n\t\t\t.total-amount {\r\n\t\t\t\tcolor: #ff4d4f;\r\n\t\t\t\tfont-size: 40rpx;\r\n\t\t\t\tfont-weight: bold;\r\n\t\t\t\tmargin-left: 10rpx;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.submit-btn {\r\n\t\t\tbackground-color: #ff4d4f;\r\n\t\t\tcolor: #fff;\r\n\t\t\twidth: 300rpx;\r\n\t\t\theight: 80rpx;\r\n\t\t\tborder-radius: 40rpx;\r\n\t\t\tfont-size: 34rpx;\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t\tjustify-content: center;\r\n\t\t\tbox-shadow: 0 6rpx 16rpx rgba(255, 77, 79, 0.3);\r\n\r\n\t\t\t&.disabled {\r\n\t\t\t\tbackground-color: #ccc;\r\n\t\t\t\tbox-shadow: none;\r\n\t\t\t\tcursor: not-allowed;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</style>","import mod from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./prePurchaseDeposit.vue?vue&type=style&index=0&id=2f6e0af6&lang=scss&scoped=true&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./prePurchaseDeposit.vue?vue&type=style&index=0&id=2f6e0af6&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1755047937574\n      var cssReload = require(\"D:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}