{"version":3,"sources":["uni-app:///main.js","webpack:///E:/xcbh5/xcbh5/test/subPackages/aHouseholder/Traceability/Traceability.vue?4dd9","webpack:///E:/xcbh5/xcbh5/test/subPackages/aHouseholder/Traceability/Traceability.vue?cb05","webpack:///E:/xcbh5/xcbh5/test/subPackages/aHouseholder/Traceability/Traceability.vue?8124","webpack:///E:/xcbh5/xcbh5/test/subPackages/aHouseholder/Traceability/Traceability.vue?3542","uni-app:///subPackages/aHouseholder/Traceability/Traceability.vue","webpack:///E:/xcbh5/xcbh5/test/subPackages/aHouseholder/Traceability/Traceability.vue?8872","webpack:///E:/xcbh5/xcbh5/test/subPackages/aHouseholder/Traceability/Traceability.vue?bb98"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","TraceabilityInfo","Students","productionDate","batchNumber","pesticideName","pesticideTimes","lastPesticideDate","irrigationWater","plantingCycle","soilType","feedName","feedSource","breedingCycle","epidemicPrevention","breedingEnvironment","breedingMethod","processingMaterials","foodAdditives","processingTechnology","processingEnvironment","processingEquipment","productMaterial","manufacturer","manufacturerAddress","manufacturerPhone","productCertification","transportMethod","storageConditions","shelfLife","nutritionValue","cookingMethod","notes","CLASSIFICATION","classificationIndex","index","commodityLis","commodityTempLis","currentInputValue","currentInputField","isSubmitting","certificateImages","feedCertImages","pesticideCertImages","processingCertImages","otherCertImages","computed","formCompletionRate","key","show","check","requiredFields","total","completed","onLoad","methods","loadCommodityList","api","isshow","console","changeClassification","openLocationPicker","success","title","icon","duration","chooseFeedCertificate","count","choosePesticideCertificate","chooseProcessingCertificate","chooseOtherCertificate","chooseCertificateImage","deleteCertificate","submit","commodity_id","classification","uploadTasks","Promise","results","params","setTimeout","uploadImages","filePaths","url","filePath","name","formData","type","urls","reject","fail","complete","uploadedCount","resolve","openPopup","handleInputConfirm"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,qBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAyH;AACzH;AACgE;AACL;AACa;;;AAGxE;AACqK;AACrK,gBAAgB,+KAAU;AAC1B,EAAE,kFAAM;AACR,EAAE,uFAAM;AACR,EAAE,gGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,2FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,gZAEN;AACP,KAAK;AACL;AACA,aAAa,gQAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACtCA;AAAA;AAAA;AAAA;AAAsmB,CAAgB,goBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;ACoe1nB;AAAA;AAAA;AAAA,eAEA;EACAC;IACA;MACAC;QACAC;QAAA;QACAC;QAAA;QACAC;QAAA;QACA;QACAC;QAAA;QACAC;QAAA;QACAC;QAAA;QACAC;QAAA;QACAC;QAAA;QACAC;QAAA;QACA;QACAC;QAAA;QACAC;QAAA;QACAC;QAAA;QACAC;QAAA;QACAC;QAAA;QACAC;QAAA;QACA;QACAC;QAAA;QACAC;QAAA;QACAC;QAAA;QACAC;QAAA;QACAC;QAAA;QACA;QACAC;QAAA;QACAC;QAAA;QACAC;QAAA;QACAC;QAAA;QACAC;QAAA;QACA;QACAC;QAAA;QACAC;QAAA;QACAC;QAAA;QACAC;QAAA;QACAC;QAAA;QACAC;MACA;;MACAC;MACAC;MAAA;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MACAC;MAAA;MACA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;IACA;EACA;;EACAC;IACA;IACAC;MAAA;MACA,sBACA,8BACA;QAAAC;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA;MACA;MACA;QAAAD;QAAAC;QAAAC;UAAA;QAAA;MAAA,GACA;QAAAF;QAAAC;QAAAC;UAAA;QAAA;MAAA,GACA;QAAAF;QAAAC;QAAAC;UAAA;QAAA;MAAA,GACA;QAAAF;QAAAC;QAAAC;UAAA;QAAA;MAAA,EACA;MAEA;MACA;MAEAC;QACA;UACAC;UACA;YACAC;UACA;YACAA;UACA;QACA;MACA;MAEA;IACA;EACA;EACAC;IACA;EACA;EACAC;IACA;IACAC;MAAA;MACAC;QACAC;MACA;QACA;QACA;UAAA;QAAA;MACA;QACAC;MACA;IACA;IAEA;IACAC;MACA;IACA;IAEA;IACAC;MAAA;MACAlE;QACAmE;UACA;UACAnE;YACAoE;YACAC;YACAC;UACA;QACA;MACA;IACA;IAEA;IACAC;MAAA;MACAvE;QACAwE;QACAL;UACA;QACA;MACA;IACA;IAEAM;MAAA;MACAzE;QACAwE;QACAL;UACA;QACA;MACA;IACA;IAEAO;MAAA;MACA1E;QACAwE;QACAL;UACA;QACA;MACA;IACA;IAEAQ;MAAA;MACA3E;QACAwE;QACAL;UACA;QACA;MACA;IACA;IAEAS;MAAA;MACA5E;QACAwE;QACAL;UACA;QACA;MACA;IACA;IAEA;IACAU;MACA;QACA;MACA;QACA;MACA;QACA;MACA;QACA;MACA;QACA;MACA;IACA;IAEA;IACAC;MAAA;MACA;MACA;QACA9E;UAAAoE;UAAAC;QAAA;QACA;MACA;MAEA;QACArE;UAAAoE;UAAAC;QAAA;QACA;MACA;;MAEA;MACA;QACA;UACArE;YAAAoE;YAAAC;UAAA;UACA;QACA;QACA;UACArE;YAAAoE;YAAAC;UAAA;UACA;QACA;QACA;UACArE;YAAAoE;YAAAC;UAAA;UACA;QACA;MACA;MAEA;QACA;UACArE;YAAAoE;YAAAC;UAAA;UACA;QACA;QACA;UACArE;YAAAoE;YAAAC;UAAA;UACA;QACA;MACA;MAEA;QACA;UACArE;YAAAoE;YAAAC;UAAA;UACA;QACA;QACA;UACArE;YAAAoE;YAAAC;UAAA;UACA;QACA;MACA;MAEA;QACA;UACArE;YAAAoE;YAAAC;UAAA;UACA;QACA;QACA;UACArE;YAAAoE;YAAAC;UAAA;UACA;QACA;QACA;UACArE;YAAAoE;YAAAC;UAAA;UACA;QACA;QACA;UACArE;YAAAoE;YAAAC;UAAA;UACA;QACA;MACA;MAEA;;MAEA;MACA,6CACA;QACAU;QACAC;QACA5B;MAAA,EACA;;MAEA;MACA;MAEA;QACA6B;MACA;MAEA;QACAA;MACA;MAEA;QACAA;MACA;MAEA;QACAA;MACA;MAEA;QACAA;MACA;;MAEA;MACAC;QACA;QACAC;UACA;YACAC;UACA;YACAA;UACA;YACAA;UACA;YACAA;UACA;YACAA;UACA;QACA;;QAEA;QACAtB;UACA9D;YACAoE;YACAC;YACAC;UACA;;UAEA;UACAe;YACArF;UACA;QACA;UACAA;YACAoE;YACAC;YACAC;UACA;UACAN;QACA;UACA;QACA;MACA;QACAhE;UACAoE;UACAC;UACAC;QACA;QACAN;QACA;MACA;IACA;IAEA;IACAsB;MACA;QACA;QACA;QAEAC;UACAvF;YACAwF;YAAA;YACAC;YACAC;YACAC;cACAC;YACA;YACAzB;cACA;cACA;gBACA0B;cACA;gBACAC;cACA;YACA;YACAC;cACAD;YACA;YACAE;cACAC;cACA;gBACAC;kBAAAN;kBAAAC;gBAAA;cACA;YACA;UACA;QACA;MACA;IACA;IAEA;IACAM;MACA;MACA;MACA;IACA;IAEA;IACAC;MACA;QACA;MACA;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;AC52BA;AAAA;AAAA;AAAA;AAAw3B,CAAgB,y3BAAG,EAAC,C;;;;;;;;;;;ACA54B;AACA,OAAO,KAAU,EAAE,kBAKd","file":"subPackages/aHouseholder/Traceability/Traceability.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './subPackages/aHouseholder/Traceability/Traceability.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./Traceability.vue?vue&type=template&id=e37faa0a&\"\nvar renderjs\nimport script from \"./Traceability.vue?vue&type=script&lang=js&\"\nexport * from \"./Traceability.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Traceability.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"subPackages/aHouseholder/Traceability/Traceability.vue\"\nexport default component.exports","export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./Traceability.vue?vue&type=template&id=e37faa0a&\"","var components\ntry {\n  components = {\n    uniDatetimePicker: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-datetime-picker/components/uni-datetime-picker/uni-datetime-picker\" */ \"@/uni_modules/uni-datetime-picker/components/uni-datetime-picker/uni-datetime-picker.vue\"\n      )\n    },\n    uniPopup: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-popup/components/uni-popup/uni-popup\" */ \"@/uni_modules/uni-popup/components/uni-popup/uni-popup.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./Traceability.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./Traceability.vue?vue&type=script&lang=js&\"","<template>\n  <view class=\"traceability-page\">\n    <!-- 顶部状态与标题 -->\n    <view class=\"header-container\">\n      <view class=\"progress-bar\">\n        <view class=\"progress-value\" :style=\"{ width: formCompletionRate + '%' }\"></view>\n      </view>\n      <view class=\"header-content\">\n        <text class=\"header-title\">菜品溯源信息</text>\n        <text class=\"header-subtitle\">填写越完整，消费者越放心</text>\n      </view>\n    </view>\n    \n    <!-- 消费视角提示 -->\n    <view class=\"consumer-tip\">\n      <text class=\"tip-text\">消费者最关心：产地环境、种植/养殖方式、农药/饲料使用、检测报告</text>\n    </view>\n    \n    <!-- 表单容器 -->\n    <view class=\"form-container\">\n      <!-- 产品基本信息 -->\n      <view class=\"form-section\">\n        <view class=\"section-header\">\n          <text class=\"section-title\">基本信息</text>\n          <text class=\"section-desc\">消费者必看</text>\n        </view>\n        \n        <view class=\"form-item\">\n          <view class=\"item-label\">产品名称 <text class=\"required-mark\">*</text></view>\n          <view class=\"item-content\">\n           <!-- <picker @change=\"bindPickerChange\" :range=\"commodityTempLis\" :value=\"index\">\n              <view class=\"picker-text\">\n                {{commodityLis[index].commodity_name || '请选择产品'}}\n              </view>\n            </picker> -->\n          </view>\n        </view>\n        \n        <view class=\"form-item\">\n          <view class=\"item-label\">产品分类 <text class=\"required-mark\">*</text></view>\n          <view class=\"item-content\">\n            <picker @change=\"changeClassification\" :range=\"CLASSIFICATION\" :value=\"classificationIndex\">\n              <view class=\"picker-text\">\n                {{CLASSIFICATION[classificationIndex] || '请选择分类'}}\n              </view>\n            </picker>\n          </view>\n        </view>\n        \n        <view class=\"form-item\">\n          <view class=\"item-label\">产地 <text class=\"required-mark\">*</text></view>\n          <view class=\"item-content\">\n            <view class=\"location-picker\" @click=\"openLocationPicker\">\n              <text class=\"location-text\">{{TraceabilityInfo.Students || '点击选择产地'}}</text>\n              <icon type=\"location\" size=\"16\" color=\"#36a3ff\" v-if=\"TraceabilityInfo.Students\"></icon>\n            </view>\n          </view>\n        </view>\n        \n        <view class=\"form-item\">\n          <view class=\"item-label\">生产日期 <text class=\"required-mark\">*</text></view>\n          <view class=\"item-content\">\n            <uni-datetime-picker type=\"date\" :clear-icon=\"false\"\n              v-model=\"TraceabilityInfo.productionDate\" return-type=\"timestamp\" \n              class=\"date-picker\" placeholder=\"选择生产日期\" />\n          </view>\n        </view>\n        \n        <view class=\"form-item\">\n          <view class=\"item-label\">批次号</view>\n          <view class=\"item-content\">\n            <view class=\"input-field\" @click=\"openPopup('batchNumber')\">\n              <text class=\"input-text\">{{TraceabilityInfo.batchNumber || '点击输入批次号'}}</text>\n            </view>\n          </view>\n        </view>\n      </view>\n      \n      <!-- 种植类详情 -->\n      <view class=\"form-section\" v-if=\"classificationIndex === 0\">\n        <view class=\"section-header\">\n          <text class=\"section-title\">种植信息</text>\n          <text class=\"section-desc\">消费者最关心农药使用</text>\n        </view>\n        \n        <view class=\"form-item\">\n          <view class=\"item-label\">农药名称 <text class=\"required-mark\">*</text></view>\n          <view class=\"item-content\">\n            <view class=\"input-field\" @click=\"openPopup('pesticideName')\">\n              <text class=\"input-text\">{{TraceabilityInfo.pesticideName || '点击输入农药名称'}}</text>\n            </view>\n          </view>\n        </view>\n        \n        <view class=\"form-item\">\n          <view class=\"item-label\">农药使用次数</view>\n          <view class=\"item-content\">\n            <view class=\"input-field\" @click=\"openPopup('pesticideTimes')\">\n              <text class=\"input-text\">{{TraceabilityInfo.pesticideTimes || '点击输入使用次数'}}</text>\n            </view>\n          </view>\n        </view>\n        \n        <view class=\"form-item\">\n          <view class=\"item-label\">最后施药日期</view>\n          <view class=\"item-content\">\n            <uni-datetime-picker type=\"date\" :clear-icon=\"false\"\n              v-model=\"TraceabilityInfo.lastPesticideDate\" return-type=\"timestamp\" \n              class=\"date-picker\" placeholder=\"选择日期\" />\n          </view>\n        </view>\n        \n        <view class=\"form-item\">\n          <view class=\"item-label\">农残检测报告 <text class=\"required-mark\">*</text></view>\n          <view class=\"item-content\">\n            <view class=\"upload-container\">\n              <view class=\"upload-box\" v-for=\"(item, index) in pesticideCertImages\" :key=\"index\">\n                <image :src=\"item\" mode=\"aspectFill\" class=\"upload-image\"></image>\n                <view class=\"delete-btn\" @click=\"deleteCertificate(index, 'pesticide')\">\n                  <icon type=\"cancel\" size=\"16\" color=\"#fff\"></icon>\n                </view>\n              </view>\n              <view class=\"upload-box add-box\" @click=\"choosePesticideCertificate\">\n                <icon type=\"camera\" size=\"24\" color=\"#999\"></icon>\n                <text class=\"upload-text\">上传报告</text>\n              </view>\n            </view>\n          </view>\n        </view>\n        \n        <view class=\"form-item\">\n          <view class=\"item-label\">灌溉水源</view>\n          <view class=\"item-content\">\n            <view class=\"input-field\" @click=\"openPopup('irrigationWater')\">\n              <text class=\"input-text\">{{TraceabilityInfo.irrigationWater || '点击输入灌溉水源'}}</text>\n            </view>\n          </view>\n        </view>\n        \n        <view class=\"form-item\">\n          <view class=\"item-label\">种植周期(天)</view>\n          <view class=\"item-content\">\n            <view class=\"input-field\" @click=\"openPopup('plantingCycle')\">\n              <text class=\"input-text\">{{TraceabilityInfo.plantingCycle || '点击输入种植周期'}}</text>\n            </view>\n          </view>\n        </view>\n        \n        <view class=\"form-item\">\n          <view class=\"item-label\">土壤类型</view>\n          <view class=\"item-content\">\n            <view class=\"input-field\" @click=\"openPopup('soilType')\">\n              <text class=\"input-text\">{{TraceabilityInfo.soilType || '点击输入土壤类型'}}</text>\n            </view>\n          </view>\n        </view>\n      </view>\n      \n      <!-- 养殖类详情 -->\n      <view class=\"form-section\" v-if=\"classificationIndex === 1\">\n        <view class=\"section-header\">\n          <text class=\"section-title\">养殖信息</text>\n          <text class=\"section-desc\">消费者最关心饲料与养殖环境</text>\n        </view>\n        \n        <view class=\"form-item\">\n          <view class=\"item-label\">饲料名称 <text class=\"required-mark\">*</text></view>\n          <view class=\"item-content\">\n            <view class=\"input-field\" @click=\"openPopup('feedName')\">\n              <text class=\"input-text\">{{TraceabilityInfo.feedName || '点击输入饲料名称'}}</text>\n            </view>\n          </view>\n        </view>\n        \n        <view class=\"form-item\">\n          <view class=\"item-label\">饲料来源 <text class=\"required-mark\">*</text></view>\n          <view class=\"item-content\">\n            <view class=\"input-field\" @click=\"openPopup('feedSource')\">\n              <text class=\"input-text\">{{TraceabilityInfo.feedSource || '点击输入饲料来源'}}</text>\n            </view>\n          </view>\n        </view>\n        \n        <view class=\"form-item\">\n          <view class=\"item-label\">饲料检测报告 <text class=\"required-mark\">*</text></view>\n          <view class=\"item-content\">\n            <view class=\"upload-container\">\n              <view class=\"upload-box\" v-for=\"(item, index) in feedCertImages\" :key=\"index\">\n                <image :src=\"item\" mode=\"aspectFill\" class=\"upload-image\"></image>\n                <view class=\"delete-btn\" @click=\"deleteCertificate(index, 'feed')\">\n                  <icon type=\"cancel\" size=\"16\" color=\"#fff\"></icon>\n                </view>\n              </view>\n              <view class=\"upload-box add-box\" @click=\"chooseFeedCertificate\">\n                <icon type=\"camera\" size=\"24\" color=\"#999\"></icon>\n                <text class=\"upload-text\">上传报告</text>\n              </view>\n            </view>\n          </view>\n        </view>\n        \n        <view class=\"form-item\">\n          <view class=\"item-label\">养殖周期(天)</view>\n          <view class=\"item-content\">\n            <view class=\"input-field\" @click=\"openPopup('breedingCycle')\">\n              <text class=\"input-text\">{{TraceabilityInfo.breedingCycle || '点击输入养殖周期'}}</text>\n            </view>\n          </view>\n        </view>\n        \n        <view class=\"form-item\">\n          <view class=\"item-label\">防疫记录</view>\n          <view class=\"item-content\">\n            <view class=\"input-field\" @click=\"openPopup('epidemicPrevention')\">\n              <text class=\"input-text\">{{TraceabilityInfo.epidemicPrevention || '点击输入防疫情况'}}</text>\n            </view>\n          </view>\n        </view>\n        \n        <view class=\"form-item\">\n          <view class=\"item-label\">养殖环境描述</view>\n          <view class=\"item-content\">\n            <view class=\"input-field\" @click=\"openPopup('breedingEnvironment')\">\n              <text class=\"input-text\">{{TraceabilityInfo.breedingEnvironment || '点击输入环境描述'}}</text>\n            </view>\n          </view>\n        </view>\n        \n        <view class=\"form-item\">\n          <view class=\"item-label\">养殖方式</view>\n          <view class=\"item-content\">\n            <view class=\"input-field\" @click=\"openPopup('breedingMethod')\">\n              <text class=\"input-text\">{{TraceabilityInfo.breedingMethod || '点击输入养殖方式'}}</text>\n            </view>\n          </view>\n        </view>\n      </view>\n      \n      <!-- 加工类详情 -->\n      <view class=\"form-section\" v-if=\"classificationIndex === 2\">\n        <view class=\"section-header\">\n          <text class=\"section-title\">加工信息</text>\n          <text class=\"section-desc\">消费者最关心添加剂与卫生情况</text>\n        </view>\n        \n        <view class=\"form-item\">\n          <view class=\"item-label\">加工原料 <text class=\"required-mark\">*</text></view>\n          <view class=\"item-content\">\n            <view class=\"input-field\" @click=\"openPopup('processingMaterials')\">\n              <text class=\"input-text\">{{TraceabilityInfo.processingMaterials || '点击输入加工原料'}}</text>\n            </view>\n          </view>\n        </view>\n        \n        <view class=\"form-item\">\n          <view class=\"item-label\">食品添加剂</view>\n          <view class=\"item-content\">\n            <view class=\"input-field\" @click=\"openPopup('foodAdditives')\">\n              <text class=\"input-text\">{{TraceabilityInfo.foodAdditives || '点击输入添加剂信息'}}</text>\n            </view>\n          </view>\n        </view>\n        \n        <view class=\"form-item\">\n          <view class=\"item-label\">加工工艺</view>\n          <view class=\"item-content\">\n            <view class=\"input-field\" @click=\"openPopup('processingTechnology')\">\n              <text class=\"input-text\">{{TraceabilityInfo.processingTechnology || '点击输入加工工艺'}}</text>\n            </view>\n          </view>\n        </view>\n        \n        <view class=\"form-item\">\n          <view class=\"item-label\">加工环境检测</view>\n          <view class=\"item-content\">\n            <view class=\"input-field\" @click=\"openPopup('processingEnvironment')\">\n              <text class=\"input-text\">{{TraceabilityInfo.processingEnvironment || '点击输入检测结果'}}</text>\n            </view>\n          </view>\n        </view>\n        \n        <view class=\"form-item\">\n          <view class=\"item-label\">加工设备编号</view>\n          <view class=\"item-content\">\n            <view class=\"input-field\" @click=\"openPopup('processingEquipment')\">\n              <text class=\"input-text\">{{TraceabilityInfo.processingEquipment || '点击输入设备编号'}}</text>\n            </view>\n          </view>\n        </view>\n        \n        <view class=\"form-item\">\n          <view class=\"item-label\">加工卫生许可证</view>\n          <view class=\"item-content\">\n            <view class=\"upload-container\">\n              <view class=\"upload-box\" v-for=\"(item, index) in processingCertImages\" :key=\"index\">\n                <image :src=\"item\" mode=\"aspectFill\" class=\"upload-image\"></image>\n                <view class=\"delete-btn\" @click=\"deleteCertificate(index, 'processing')\">\n                  <icon type=\"cancel\" size=\"16\" color=\"#fff\"></icon>\n                </view>\n              </view>\n              <view class=\"upload-box add-box\" @click=\"chooseProcessingCertificate\">\n                <icon type=\"camera\" size=\"24\" color=\"#999\"></icon>\n                <text class=\"upload-text\">上传证书</text>\n              </view>\n            </view>\n          </view>\n        </view>\n      </view>\n      \n      <!-- 其他类详情 -->\n      <view class=\"form-section\" v-if=\"classificationIndex === 3\">\n        <view class=\"section-header\">\n          <text class=\"section-title\">产品信息</text>\n          <text class=\"section-desc\">消费者最关心材质与安全性</text>\n        </view>\n        \n        <view class=\"form-item\">\n          <view class=\"item-label\">产品材质 <text class=\"required-mark\">*</text></view>\n          <view class=\"item-content\">\n            <view class=\"input-field\" @click=\"openPopup('productMaterial')\">\n              <text class=\"input-text\">{{TraceabilityInfo.productMaterial || '点击输入产品材质'}}</text>\n            </view>\n          </view>\n        </view>\n        \n        <view class=\"form-item\">\n          <view class=\"item-label\">生产厂家 <text class=\"required-mark\">*</text></view>\n          <view class=\"item-content\">\n            <view class=\"input-field\" @click=\"openPopup('manufacturer')\">\n              <text class=\"input-text\">{{TraceabilityInfo.manufacturer || '点击输入生产厂家'}}</text>\n            </view>\n          </view>\n        </view>\n        \n        <view class=\"form-item\">\n          <view class=\"item-label\">生产地址 <text class=\"required-mark\">*</text></view>\n          <view class=\"item-content\">\n            <view class=\"input-field\" @click=\"openPopup('manufacturerAddress')\">\n              <text class=\"input-text\">{{TraceabilityInfo.manufacturerAddress || '点击输入生产地址'}}</text>\n            </view>\n          </view>\n        </view>\n        \n        <view class=\"form-item\">\n          <view class=\"item-label\">联系方式</view>\n          <view class=\"item-content\">\n            <view class=\"input-field\" @click=\"openPopup('manufacturerPhone')\">\n              <text class=\"input-text\">{{TraceabilityInfo.manufacturerPhone || '点击输入联系电话'}}</text>\n            </view>\n          </view>\n        </view>\n        \n        <view class=\"form-item\">\n          <view class=\"item-label\">产品认证</view>\n          <view class=\"item-content\">\n            <view class=\"input-field\" @click=\"openPopup('productCertification')\">\n              <text class=\"input-text\">{{TraceabilityInfo.productCertification || '点击输入认证信息'}}</text>\n            </view>\n          </view>\n        </view>\n        \n        <view class=\"form-item\">\n          <view class=\"item-label\">安全检测报告</view>\n          <view class=\"item-content\">\n            <view class=\"upload-container\">\n              <view class=\"upload-box\" v-for=\"(item, index) in otherCertImages\" :key=\"index\">\n                <image :src=\"item\" mode=\"aspectFill\" class=\"upload-image\"></image>\n                <view class=\"delete-btn\" @click=\"deleteCertificate(index, 'other')\">\n                  <icon type=\"cancel\" size=\"16\" color=\"#fff\"></icon>\n                </view>\n              </view>\n              <view class=\"upload-box add-box\" @click=\"chooseOtherCertificate\">\n                <icon type=\"camera\" size=\"24\" color=\"#999\"></icon>\n                <text class=\"upload-text\">上传报告</text>\n              </view>\n            </view>\n          </view>\n        </view>\n      </view>\n      \n      <!-- 通用信息 -->\n      <view class=\"form-section\">\n        <view class=\"section-header\">\n          <text class=\"section-title\">通用信息</text>\n          <text class=\"section-desc\">消费者关注的附加信息</text>\n        </view>\n        \n        <view class=\"form-item\">\n          <view class=\"item-label\">运输方式</view>\n          <view class=\"item-content\">\n            <view class=\"input-field\" @click=\"openPopup('transportMethod')\">\n              <text class=\"input-text\">{{TraceabilityInfo.transportMethod || '点击输入运输方式'}}</text>\n            </view>\n          </view>\n        </view>\n        \n        <view class=\"form-item\">\n          <view class=\"item-label\">储存条件</view>\n          <view class=\"item-content\">\n            <view class=\"input-field\" @click=\"openPopup('storageConditions')\">\n              <text class=\"input-text\">{{TraceabilityInfo.storageConditions || '点击输入储存条件'}}</text>\n            </view>\n          </view>\n        </view>\n        \n        <view class=\"form-item\">\n          <view class=\"item-label\">保质期(天)</view>\n          <view class=\"item-content\">\n            <view class=\"input-field\" @click=\"openPopup('shelfLife')\">\n              <text class=\"input-text\">{{TraceabilityInfo.shelfLife || '点击输入保质期'}}</text>\n            </view>\n          </view>\n        </view>\n        \n        <view class=\"form-item\">\n          <view class=\"item-label\">营养价值</view>\n          <view class=\"item-content\">\n            <view class=\"input-field\" @click=\"openPopup('nutritionValue')\">\n              <text class=\"input-text\">{{TraceabilityInfo.nutritionValue || '点击输入营养价值'}}</text>\n            </view>\n          </view>\n        </view>\n        \n        <view class=\"form-item\">\n          <view class=\"item-label\">食用方法</view>\n          <view class=\"item-content\">\n            <view class=\"input-field\" @click=\"openPopup('cookingMethod')\">\n              <text class=\"input-text\">{{TraceabilityInfo.cookingMethod || '点击输入食用方法'}}</text>\n            </view>\n          </view>\n        </view>\n        \n        <view class=\"form-item\">\n          <view class=\"item-label\">溯源凭证</view>\n          <view class=\"item-content\">\n            <view class=\"upload-container\">\n              <view class=\"upload-box\" v-for=\"(item, index) in certificateImages\" :key=\"index\">\n                <image :src=\"item\" mode=\"aspectFill\" class=\"upload-image\"></image>\n                <view class=\"delete-btn\" @click=\"deleteCertificate(index, 'general')\">\n                  <icon type=\"cancel\" size=\"16\" color=\"#fff\"></icon>\n                </view>\n              </view>\n              <view class=\"upload-box add-box\" @click=\"chooseCertificateImage\">\n                <icon type=\"camera\" size=\"24\" color=\"#999\"></icon>\n                <text class=\"upload-text\">上传凭证</text>\n              </view>\n            </view>\n          </view>\n        </view>\n        \n        <view class=\"form-item\">\n          <view class=\"item-label\">备注信息</view>\n          <view class=\"item-content\">\n            <view class=\"input-field\" @click=\"openPopup('notes')\">\n              <text class=\"input-text\">{{TraceabilityInfo.notes || '点击输入备注信息'}}</text>\n            </view>\n          </view>\n        </view>\n      </view>\n    </view>\n    \n    <!-- 提交按钮 -->\n    <view class=\"submit-container\">\n      <button class=\"submit-button\" @click=\"submit\" :disabled=\"isSubmitting\">\n        {{isSubmitting ? '提交中...' : '提交溯源信息'}}\n      </button>\n    </view>\n    \n    <!-- 底部提示 -->\n    <view class=\"footer-tip\">\n      <text>注：<text class=\"required-mark\">*</text> 为必填项，完整填写可提升消费者信任度</text>\n    </view>\n    \n    <!-- 弹出层 -->\n    <uni-popup ref=\"popup\" type=\"bottom\" border-radius=\"12rpx 12rpx 0 0\">\n      <view class=\"popup-content\">\n        <input v-model=\"currentInputValue\" placeholder=\"请输入\" class=\"popup-input\"\n          @confirm=\"handleInputConfirm\" @blur=\"handleInputBlur\" />\n      </view>\n    </uni-popup>\n  </view>\n</template>\n\n<script>\n  import { api } from '@/api/index.js'\n  \n  export default {\n    data() {\n      return {\n        TraceabilityInfo: {\n          Students: \"\", // 产地\n          productionDate: \"\", // 生产日期\n          batchNumber: \"\", // 批次号\n          // 种植类\n          pesticideName: \"\", // 农药名称\n          pesticideTimes: \"\", // 农药使用次数\n          lastPesticideDate: \"\", // 最后一次使用日期\n          irrigationWater: \"\", // 灌溉水源\n          plantingCycle: \"\", // 种植周期\n          soilType: \"\", // 土壤类型\n          // 养殖类\n          feedName: \"\", // 饲料名称\n          feedSource: \"\", // 饲料来源\n          breedingCycle: \"\", // 养殖周期\n          epidemicPrevention: \"\", // 防疫记录\n          breedingEnvironment: \"\", // 养殖环境描述\n          breedingMethod: \"\", // 养殖方式\n          // 加工类\n          processingMaterials: \"\", // 加工原料\n          foodAdditives: \"\", // 食品添加剂\n          processingTechnology: \"\", // 加工工艺\n          processingEnvironment: \"\", // 加工环境检测\n          processingEquipment: \"\", // 加工设备编号\n          // 其他类\n          productMaterial: \"\", // 产品材质\n          manufacturer: \"\", // 生产厂家\n          manufacturerAddress: \"\", // 生产地址\n          manufacturerPhone: \"\", // 联系电话\n          productCertification: \"\", // 产品认证\n          // 通用\n          transportMethod: \"\", // 运输方式\n          storageConditions: \"\", // 储存条件\n          shelfLife: \"\", // 保质期\n          nutritionValue: \"\", // 营养价值\n          cookingMethod: \"\", // 食用方法\n          notes: \"\" // 备注\n        },\n        CLASSIFICATION: ['种植', '养殖', '加工', '其他'],\n        classificationIndex: 0, // 产品分类索引\n        index: 0,\n        commodityLis: [], // 已上架的菜品\n        commodityTempLis: [], // 临时展示的上架菜品\n        currentInputValue: \"\", // 临时输入值\n        currentInputField: \"\",\n        isSubmitting: false, // 提交状态\n        // 证书图片\n        certificateImages: [], // 通用凭证图片\n        feedCertImages: [], // 饲料检测报告\n        pesticideCertImages: [], // 农残检测报告\n        processingCertImages: [], // 加工卫生许可证\n        otherCertImages: [] // 其他类安全检测报告\n      };\n    },\n    computed: {\n      // 表单完成率\n      formCompletionRate() {\n        const requiredFields = [\n          'Students', 'productionDate', \n          {key: 'feedName', show: this.classificationIndex === 1},\n          {key: 'pesticideName', show: this.classificationIndex === 0},\n          {key: 'processingMaterials', show: this.classificationIndex === 2},\n          {key: 'productMaterial', show: this.classificationIndex === 3},\n          // 证书检查\n          {key: 'feedCertImages', show: this.classificationIndex === 1, check: () => this.feedCertImages.length > 0},\n          {key: 'pesticideCertImages', show: this.classificationIndex === 0, check: () => this.pesticideCertImages.length > 0},\n          {key: 'processingCertImages', show: this.classificationIndex === 2, check: () => this.processingCertImages.length > 0},\n          {key: 'otherCertImages', show: this.classificationIndex === 3, check: () => this.otherCertImages.length > 0}\n        ];\n        \n        let completed = 0;\n        let total = 0;\n        \n        requiredFields.forEach(field => {\n          if (field.show === undefined || field.show) {\n            total++;\n            if (field.check) {\n              completed += field.check() ? 1 : 0;\n            } else {\n              completed += this.TraceabilityInfo[field.key] ? 1 : 0;\n            }\n          }\n        });\n        \n        return Math.round((completed / total) * 100);\n      }\n    },\n    onLoad() {\n      this.loadCommodityList();\n    },\n    methods: {\n      // 加载商品列表\n      loadCommodityList() {\n        api.myShoplist({\n          isshow: 1\n        }).then((data) => {\n          this.commodityLis = data.data.listdata || [];\n          this.commodityTempLis = this.commodityLis.map((item) => item.commodity_name);\n        }).catch(err => {\n          console.error('加载商品列表失败', err);\n        });\n      },\n      \n      // 产品分类选择\n      changeClassification(e) {\n        this.classificationIndex = e.detail.value;\n      },\n      \n      // 打开地图选择地址\n      openLocationPicker() {\n        wx.chooseLocation({\n          success: (res) => {\n            this.TraceabilityInfo.Students = res.name + res.address;\n            wx.showToast({\n              title: '已选择地址',\n              icon: 'success',\n              duration: 1500\n            });\n          }\n        });\n      },\n      \n      // 选择各类证书图片\n      chooseFeedCertificate() {\n        wx.chooseImage({\n          count: 3 - this.feedCertImages.length,\n          success: (res) => {\n            this.feedCertImages = this.feedCertImages.concat(res.tempFilePaths);\n          }\n        });\n      },\n      \n      choosePesticideCertificate() {\n        wx.chooseImage({\n          count: 3 - this.pesticideCertImages.length,\n          success: (res) => {\n            this.pesticideCertImages = this.pesticideCertImages.concat(res.tempFilePaths);\n          }\n        });\n      },\n      \n      chooseProcessingCertificate() {\n        wx.chooseImage({\n          count: 3 - this.processingCertImages.length,\n          success: (res) => {\n            this.processingCertImages = this.processingCertImages.concat(res.tempFilePaths);\n          }\n        });\n      },\n      \n      chooseOtherCertificate() {\n        wx.chooseImage({\n          count: 3 - this.otherCertImages.length,\n          success: (res) => {\n            this.otherCertImages = this.otherCertImages.concat(res.tempFilePaths);\n          }\n        });\n      },\n      \n      chooseCertificateImage() {\n        wx.chooseImage({\n          count: 3 - this.certificateImages.length,\n          success: (res) => {\n            this.certificateImages = this.certificateImages.concat(res.tempFilePaths);\n          }\n        });\n      },\n      \n      // 删除证书图片\n      deleteCertificate(index, type) {\n        if (type === 'feed') {\n          this.feedCertImages.splice(index, 1);\n        } else if (type === 'pesticide') {\n          this.pesticideCertImages.splice(index, 1);\n        } else if (type === 'processing') {\n          this.processingCertImages.splice(index, 1);\n        } else if (type === 'other') {\n          this.otherCertImages.splice(index, 1);\n        } else {\n          this.certificateImages.splice(index, 1);\n        }\n      },\n      \n      // 提交表单\n      submit() {\n        // 基础验证\n        if (!this.TraceabilityInfo.Students) {\n          wx.showToast({ title: '请填写产地', icon: 'none' });\n          return;\n        }\n        \n        if (!this.TraceabilityInfo.productionDate) {\n          wx.showToast({ title: '请选择生产日期', icon: 'none' });\n          return;\n        }\n        \n        // 分类验证\n        if (this.classificationIndex === 1) {\n          if (!this.TraceabilityInfo.feedName) {\n            wx.showToast({ title: '请填写饲料名称', icon: 'none' });\n            return;\n          }\n          if (!this.TraceabilityInfo.feedSource) {\n            wx.showToast({ title: '请填写饲料来源', icon: 'none' });\n            return;\n          }\n          if (this.feedCertImages.length === 0) {\n            wx.showToast({ title: '请上传饲料检测报告', icon: 'none' });\n            return;\n          }\n        }\n        \n        if (this.classificationIndex === 0) {\n          if (!this.TraceabilityInfo.pesticideName) {\n            wx.showToast({ title: '请填写农药名称', icon: 'none' });\n            return;\n          }\n          if (this.pesticideCertImages.length === 0) {\n            wx.showToast({ title: '请上传农残检测报告', icon: 'none' });\n            return;\n          }\n        }\n        \n        if (this.classificationIndex === 2) {\n          if (!this.TraceabilityInfo.processingMaterials) {\n            wx.showToast({ title: '请填写加工原料', icon: 'none' });\n            return;\n          }\n          if (this.processingCertImages.length === 0) {\n            wx.showToast({ title: '请上传加工卫生许可证', icon: 'none' });\n            return;\n          }\n        }\n        \n        if (this.classificationIndex === 3) {\n          if (!this.TraceabilityInfo.productMaterial) {\n            wx.showToast({ title: '请填写产品材质', icon: 'none' });\n            return;\n          }\n          if (!this.TraceabilityInfo.manufacturer) {\n            wx.showToast({ title: '请填写生产厂家', icon: 'none' });\n            return;\n          }\n          if (!this.TraceabilityInfo.manufacturerAddress) {\n            wx.showToast({ title: '请填写生产地址', icon: 'none' });\n            return;\n          }\n          if (this.otherCertImages.length === 0) {\n            wx.showToast({ title: '请上传安全检测报告', icon: 'none' });\n            return;\n          }\n        }\n        \n        this.isSubmitting = true;\n        \n        // 构建参数并提交\n        const params = {\n          ...this.TraceabilityInfo,\n          commodity_id: this.commodityLis[this.index].commodity_id,\n          classification: this.classificationIndex,\n          formCompletionRate: this.formCompletionRate\n        };\n        \n        // 上传图片\n        const uploadTasks = [];\n        \n        if (this.certificateImages.length > 0) {\n          uploadTasks.push(this.uploadImages(this.certificateImages, 'certificate'));\n        }\n        \n        if (this.classificationIndex === 0 && this.pesticideCertImages.length > 0) {\n          uploadTasks.push(this.uploadImages(this.pesticideCertImages, 'pesticide'));\n        }\n        \n        if (this.classificationIndex === 1 && this.feedCertImages.length > 0) {\n          uploadTasks.push(this.uploadImages(this.feedCertImages, 'feed'));\n        }\n        \n        if (this.classificationIndex === 2 && this.processingCertImages.length > 0) {\n          uploadTasks.push(this.uploadImages(this.processingCertImages, 'processing'));\n        }\n        \n        if (this.classificationIndex === 3 && this.otherCertImages.length > 0) {\n          uploadTasks.push(this.uploadImages(this.otherCertImages, 'other'));\n        }\n        \n        // 等待所有图片上传完成后提交表单\n        Promise.all(uploadTasks).then(results => {\n          // 处理上传结果\n          results.forEach(result => {\n            if (result.type === 'certificate') {\n              params.certificateUrls = result.urls;\n            } else if (result.type === 'pesticide') {\n              params.pesticideCertUrls = result.urls;\n            } else if (result.type === 'feed') {\n              params.feedCertUrls = result.urls;\n            } else if (result.type === 'processing') {\n              params.processingCertUrls = result.urls;\n            } else if (result.type === 'other') {\n              params.otherCertUrls = result.urls;\n            }\n          });\n          \n          // 提交表单数据\n          api.submitTraceabilityInfo(params).then(res => {\n            wx.showToast({\n              title: '提交成功',\n              icon: 'success',\n              duration: 2000\n            });\n            \n            // 返回上一页\n            setTimeout(() => {\n              wx.navigateBack();\n            }, 2000);\n          }).catch(err => {\n            wx.showToast({\n              title: '提交失败',\n              icon: 'none',\n              duration: 2000\n            });\n            console.error('提交失败', err);\n          }).finally(() => {\n            this.isSubmitting = false;\n          });\n        }).catch(err => {\n          wx.showToast({\n            title: '图片上传失败',\n            icon: 'none',\n            duration: 2000\n          });\n          console.error('图片上传失败', err);\n          this.isSubmitting = false;\n        });\n      },\n      \n      // 上传图片\n      uploadImages(filePaths, type) {\n        return new Promise((resolve, reject) => {\n          const urls = [];\n          let uploadedCount = 0;\n          \n          filePaths.forEach((filePath, index) => {\n            wx.uploadFile({\n              url: 'https://your-api-domain.com/upload', // 替换为实际的上传接口\n              filePath: filePath,\n              name: 'file',\n              formData: {\n                type: type\n              },\n              success: (res) => {\n                const data = JSON.parse(res.data);\n                if (data.code === 0) {\n                  urls.push(data.data.url);\n                } else {\n                  reject(new Error(`图片上传失败: ${data.msg}`));\n                }\n              },\n              fail: (err) => {\n                reject(err);\n              },\n              complete: () => {\n                uploadedCount++;\n                if (uploadedCount === filePaths.length) {\n                  resolve({ type: type, urls: urls });\n                }\n              }\n            });\n          });\n        });\n      },\n      \n      // 打开弹出层\n      openPopup(field) {\n        this.currentInputField = field;\n        this.currentInputValue = this.TraceabilityInfo[field] || '';\n        this.$refs.popup.open();\n      },\n      \n      // 处理输入确认\n      handleInputConfirm() {\n        if (this.currentInputField) {\n          this.TraceabilityInfo[this.currentInputField] = this.currentInputValue;\n        }\n        this.$refs.popup.close();\n      }\n    }\n  };\n</script>\n\n<style>\n/* 页面整体样式 */\n.traceability-page {\n  padding: 30rpx;\n  background-color: #f5f7fa;\n  min-height: 100vh;\n}\n\n/* 顶部状态与标题 */\n.header-container {\n  margin-bottom: 30rpx;\n}\n\n.progress-bar {\n  height: 12rpx;\n  background-color: #e5e9f2;\n  border-radius: 6rpx;\n  margin-bottom: 20rpx;\n  overflow: hidden;\n}\n\n.progress-value {\n  height: 100%;\n  background-color: #36a3ff;\n  border-radius: 6rpx;\n  transition: width 0.3s ease;\n}\n\n.header-content {\n  background-color: #fff;\n  border-radius: 16rpx;\n  padding: 30rpx;\n  box-shadow: 0 4rpx 16rpx rgba(0, 0, 0, 0.05);\n}\n\n.header-title {\n  font-size: 36rpx;\n  font-weight: bold;\n  color: #333;\n  margin-bottom: 10rpx;\n}\n\n.header-subtitle {\n  font-size: 26rpx;\n  color: #666;\n}\n\n/* 消费视角提示 */\n.consumer-tip {\n  background-color: #fffbeb;\n  border-radius: 12rpx;\n  padding: 20rpx 30rpx;\n  margin-bottom: 30rpx;\n}\n\n.tip-text {\n  font-size: 26rpx;\n  color: #8c6d31;\n  line-height: 1.5;\n}\n\n/* 表单容器 */\n.form-container {\n  background-color: #fff;\n  border-radius: 16rpx;\n  padding: 30rpx;\n  box-shadow: 0 4rpx 16rpx rgba(0, 0, 0, 0.05);\n}\n\n/* 表单分区 */\n.form-section {\n  margin-bottom: 40rpx;\n}\n\n.section-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding-bottom: 20rpx;\n  border-bottom: 1rpx solid #eee;\n  margin-bottom: 30rpx;\n}\n\n.section-title {\n  font-size: 32rpx;\n  font-weight: bold;\n  color: #333;\n}\n\n.section-desc {\n  font-size: 24rpx;\n  color: #999;\n  padding: 4rpx 12rpx;\n  background-color: #f5f7fa;\n  border-radius: 8rpx;\n}\n\n/* 表单项目 */\n.form-item {\n  margin-bottom: 30rpx;\n}\n\n.item-label {\n  font-size: 28rpx;\n  color: #333;\n  margin-bottom: 16rpx;\n  display: flex;\n  align-items: center;\n}\n\n.required-mark {\n  color: #ff4d4f;\n  margin-left: 4rpx;\n}\n\n.item-content {\n  position: relative;\n}\n\n/* 选择器样式 */\n.picker-text {\n  padding: 24rpx 0;\n  border-bottom: 1rpx solid #eee;\n  font-size: 28rpx;\n  color: #666;\n  position: relative;\n}\n\n.picker-text::after {\n  content: '';\n  position: absolute;\n  right: 0;\n  top: 50%;\n  transform: translateY(-50%);\n  width: 24rpx;\n  height: 24rpx;\n  background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='24' height='24'%3E%3Cpath fill='%23999' d='M7 10l5 5 5-5z'/%3E%3C/svg%3E\");\n}\n\n/* 位置选择器 */\n.location-picker {\n  padding: 24rpx 0;\n  border-bottom: 1rpx solid #eee;\n  font-size: 28rpx;\n  color: #666;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n\n.location-text {\n  flex: 1;\n}\n\n/* 输入字段 */\n.input-field {\n  padding: 24rpx 0;\n  border-bottom: 1rpx solid #eee;\n  font-size: 28rpx;\n  color: #666;\n  position: relative;\n}\n\n.input-field::after {\n  content: '';\n  position: absolute;\n  right: 0;\n  top: 50%;\n  transform: translateY(-50%);\n  width: 24rpx;\n  height: 24rpx;\n  background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='24' height='24'%3E%3Cpath fill='%23999' d='M7 10l5 5 5-5z'/%3E%3C/svg%3E\");\n}\n\n/* 上传容器 */\n.upload-container {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 20rpx;\n}\n\n.upload-box {\n  width: calc(33.33% - 14rpx);\n  height: 200rpx;\n  border-radius: 12rpx;\n  position: relative;\n  overflow: hidden;\n  background-color: #f5f7fa;\n  border: 1rpx dashed #ddd;\n}\n\n.upload-image {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n}\n\n.delete-btn {\n  position: absolute;\n  top: 8rpx;\n  right: 8rpx;\n  width: 32rpx;\n  height: 32rpx;\n  border-radius: 50%;\n  background-color: rgba(0, 0, 0, 0.6);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.add-box {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n}\n\n.upload-text {\n  margin-top: 10rpx;\n  font-size: 24rpx;\n  color: #999;\n}\n\n/* 提交按钮 */\n.submit-container {\n  margin: 40rpx 0;\n}\n\n.submit-button {\n  width: 100%;\n  height: 90rpx;\n  background-color: #36a3ff;\n  color: #fff;\n  border-radius: 12rpx;\n  font-size: 32rpx;\n  font-weight: 500;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border: none;\n  box-shadow: 0 8rpx 24rpx rgba(54, 163, 255, 0.3);\n  transition: all 0.3s ease;\n}\n\n.submit-button:active {\n  background-color: #1890ff;\n  box-shadow: 0 4rpx 12rpx rgba(54, 163, 255, 0.3);\n}\n\n.submit-button:disabled {\n  background-color: #e6f7ff;\n  color: #36a3ff;\n  box-shadow: none;\n  cursor: not-allowed;\n}\n\n/* 底部提示 */\n.footer-tip {\n  font-size: 24rpx;\n  color: #999;\n  text-align: center;\n  margin-bottom: 40rpx;\n}\n\n/* 弹出层样式 */\n.popup-content {\n  padding: 40rpx 30rpx;\n  background-color: #fff;\n  width: 100%;\n  box-sizing: border-box;\n}\n\n.popup-input {\n  width: 100%;\n  height: 88rpx;\n  border: none;\n  border-bottom: 1rpx solid #eee;\n  font-size: 32rpx;\n  color: #333;\n  outline: none;\n}\n</style>","import mod from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./Traceability.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./Traceability.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1755047932585\n      var cssReload = require(\"D:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}