{"version":3,"file":"float-ball.js","sources":["components/float-ball/float-ball.vue","D:/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/RTov5bCP56iL5bqP6L2sYXBwL3hjYmFwcC9jb21wb25lbnRzL2Zsb2F0LWJhbGwvZmxvYXQtYmFsbC52dWU"],"sourcesContent":["<template>\r\n\t<movable-area class=\"float-container\" :style=\"[containerStyle]\">\r\n<!-- \t\t<movable-view class=\"main-ball\" :x=\"position.x\" :y=\"position.y\" direction=\"all\" inertia out-of-bounds=\"false\"\r\n\t\t\t@change=\"handleDrag\" @touchstart=\"handleTouchStart\" @touchend=\"handleTouchEnd\" :disabled=\"isExpanded\"> -->\r\n\t\t\t<movable-view class=\"main-ball\" :x=\"position.x\" :y=\"position.y\" direction=\"all\" inertia out-of-bounds=\"false\"\r\n\t\t\t\t @touchstart=\"handleTouchStart\" @touchend=\"handleTouchEnd\" :disabled=\"isExpanded\">\r\n\t\t\t<view class=\"ball-core\" :class=\"{ expanded: isExpanded }\" @click.stop=\"toggleMenu\">\r\n\t\t\t\t{{ isExpanded ? '×' : '+' }}\r\n\t\t\t</view>\r\n\r\n\t\t\t<view  v-show=\"isShowItem\" v-for=\"(item, index) in menuList\" :key=\"item.path\" class=\"sub-item\" :style=\"[getSubStyle(index)]\"\r\n\t\t\t\t@tap.stop=\"navigateTo(item.path)\">\r\n\t\t\t\t{{ item.label }}\r\n\t\t\t</view>\r\n\t\t</movable-view>\r\n\t</movable-area>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t\tprops: {\r\n\t\t\tmenuList: {\r\n\t\t\t\ttype: Array,\r\n\t\t\t\tdefault: () => [\r\n\t\t\t\t\t{\r\n\t\t\t\t\tpath: '/pages/myComplaint/myComplaint',\r\n\t\t\t\t\tlabel: '我的投诉'\r\n\t\t\t\t},{\r\n\t\t\t\t\tpath:'/pages/orders/orders',\r\n\t\t\t\t\tlabel:'我的订单'\r\n\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t}\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tisShowItem:false,\r\n\t\t\t\tposition: {\r\n\t\t\t\t\tx: 0,\r\n\t\t\t\t\ty: 0\r\n\t\t\t\t},\r\n\t\t\t\tisExpanded: false,\r\n\t\t\t\tsystemInfo: {},\r\n\t\t\t\tstartY: 0,\r\n\t\t\t\tisDragging: false\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\tcontainerStyle() {\r\n\t\t\t\treturn {\r\n\t\t\t\t\twidth: `${this.systemInfo.windowWidth}px`,\r\n\t\t\t\t\theight: `${this.systemInfo.windowHeight}px`\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tthis.initPosition()\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tinitPosition() {\r\n\t\t\t\tthis.systemInfo = uni.getSystemInfoSync()\r\n\t\t\t\tconst savedPos = uni.getStorageSync('floatPos') || {\r\n\t\t\t\t\tx: this.systemInfo.windowWidth - 80,\r\n\t\t\t\t\ty: this.systemInfo.windowHeight * 0.7\r\n\t\t\t\t}\r\n\t\t\t\tthis.position = savedPos\r\n\t\t\t},\r\n\r\n\t\t\thandleTouchStart(e) {\r\n\t\t\t\tthis.startY = e.touches[0].clientY\r\n\t\t\t\tthis.isDragging = false\r\n\t\t\t},\r\n\r\n\t\t\t// handleDrag(e) {\r\n\t\t\t// \t// 判断是否为有效拖拽（Y轴移动超过5px）\r\n\t\t\t// \tif (Math.abs(e.touches[0].clientY - this.startY) > 5) {\r\n\t\t\t// \t\tthis.isDragging = true\r\n\t\t\t// \t\tthis.position = {\r\n\t\t\t// \t\t\tx: e.detail.x,\r\n\t\t\t// \t\t\ty: e.detail.y\r\n\t\t\t// \t\t}\r\n\t\t\t// \t}\r\n\t\t\t// },\r\n\r\n\t\t\thandleTouchEnd() {\r\n\t\t\t\tif (!this.isDragging) return\r\n\t\t\t\tthis.autoDock()\r\n\t\t\t\tuni.setStorageSync('floatPos', this.position)\r\n\t\t\t},\r\n\r\n\t\t\tautoDock() {\r\n\t\t\t\tconst {\r\n\t\t\t\t\twindowWidth\r\n\t\t\t\t} = this.systemInfo\r\n\t\t\t\tthis.position.x = this.position.x > windowWidth / 2 ?\r\n\t\t\t\t\twindowWidth - 60 :\r\n\t\t\t\t\t20\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t\r\n\t\t\ttoggleMenu() {\r\n\t\t\t\tthis.isShowItem = !this.isShowItem\r\n\t\t\t\tconsole.log(this.isShowItem)\r\n\t\t\t\tif (this.isDragging) return\r\n\t\t\t\tthis.isExpanded = !this.isExpanded\r\n\t\t\t},\r\n\r\n\t\t\tnavigateTo(path) {\r\n\t\t\t\tthis.isExpanded = false\r\n\t\t\t\tthis.isShowItem = false\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: path\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// containerStyle() {\r\n\t\t\t// \treturn {\r\n\t\t\t// \t\twidth: `${this.systemInfo.windowWidth}px`,\r\n\t\t\t// \t\theight: `${this.systemInfo.windowHeight}px`\r\n\t\t\t// \t}\r\n\t\t\t// },\r\n\t\t\tlayoutParams() {\r\n\t\t\t\tconst count = this.menuList.length\r\n\t\t\t\tconst minRadius = 60 // 基础半径\r\n\t\t\t\tconst itemSize = 80 // 子项直径\r\n\r\n\t\t\t\t// 动态半径公式：R = 基础半径 + 数量系数\r\n\t\t\t\tconst radius = minRadius + Math.min(count, 6) * 8\r\n\r\n\t\t\t\t// 动态角度间隔：保证最小间隔30度\r\n\t\t\t\tconst angleStep = Math.max(360 / count, 30)\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\tradius,\r\n\t\t\t\t\tangleStep,\r\n\t\t\t\t\titemSize\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgetSubStyle(index) {\r\n\t\t\t\tif (!this.isExpanded) return {\r\n\t\t\t\t\topacity: 0\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// 极坐标计算\r\n\t\t\t\tconst {\r\n\t\t\t\t\tradius,\r\n\t\t\t\t\tangleStep,\r\n\t\t\t\t\titemSize\r\n\t\t\t\t} = this.layoutParams\r\n\t\t\t\tconst angle = (-90 + angleStep * index) * Math.PI / 180\r\n\t\t\t\tconst diameter = itemSize / 2\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\ttransform: `translate(\r\n\t\t\t          ${Math.cos(angle) * radius - diameter}px,\r\n\t\t\t          ${Math.sin(angle) * radius - diameter}px\r\n\t\t\t        )`,\r\n\t\t\t\t\twidth: `${itemSize}px`,\r\n\t\t\t\t\theight: `${itemSize}px`,\r\n\t\t\t\t\ttransitionDelay: `${index * 30}ms`,\r\n\t\t\t\t\topacity: 1,\r\n\t\t\t\t\tzIndex: this.menuList.length - index // 层级控制\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t$primary: #007aff;\r\n\t$secondary: #007aff;\r\n\t$text-dark: #2B593E;\r\n\r\n\t.float-container {\r\n\t\tposition: fixed;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\tpointer-events: none;\r\n\t\tz-index: 9999;\r\n\t}\r\n\r\n\t.main-ball {\r\n\t\twidth: 120rpx;\r\n\t\theight: 120rpx;\r\n\t\tpointer-events: auto;\r\n\t\tz-index: 9999;\r\n\t}\r\n\r\n\t.ball-core {\r\n\t\topacity: .8;\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tborder-radius: 50%;\r\n\t\tbackground: $primary;\r\n\t\tbox-shadow: 10rpx 8rpx 24rpx rgba(141, 201, 178, 0.3);\r\n\t\ttext-align: center;\r\n\t\tline-height: 120rpx;\r\n\t\tcolor: white;\r\n\t\tfont-size: 40rpx;\r\n\t\ttransition: all 0.3s;\r\n\t}\r\n\r\n\t.sub-item {\r\n\t\tcolor: white;\r\n\t\ttext-align: center;\r\n\t\tline-height: 120rpx;\r\n\t\twidth: 120rpx;\r\n\t\theight: 120rpx;\r\n\t\tborder-radius: 50%;\r\n\t\tbackground-color: $primary;\r\n\t\tfont-size: 25rpx\r\n\t}\r\n</style>","import Component from 'E:/小程序转app/xcbapp/components/float-ball/float-ball.vue'\nwx.createComponent(Component)"],"names":["uni"],"mappings":"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"}