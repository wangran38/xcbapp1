{"version":3,"file":"demo.js","sources":["pages/demo/demo.vue","D:/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvZGVtby9kZW1vLnZ1ZQ"],"sourcesContent":["<template>\r\n\t<canvas canvas-id=\"pureCanvas\" style=\"width: 700rpx; height: 600rpx;\"></canvas>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t\tmixins: [],\r\n\t\tcomponents: {},\r\n\t\tdata() {\r\n\t\t\treturn {};\r\n\t\t},\r\n\t\tonReady() {\r\n\t\t\tthis.drawPureCanvas();\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t// 加载图片返回本地路径\r\n\t\t\tloadImageUrl(url) {\r\n\t\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\t\tuni.getImageInfo({\r\n\t\t\t\t\t\tsrc: url,\r\n\t\t\t\t\t\tsuccess: (res) => resolve(res.path),\r\n\t\t\t\t\t\tfail: (err) => reject(new Error(`图片加载失败：${err.errMsg}`))\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * 绘制带圆角的矩形\r\n\t\t\t * @param {Object} ctx - Canvas上下文\r\n\t\t\t * @param {number} x - 左上角x坐标\r\n\t\t\t * @param {number} y - 左上角y坐标\r\n\t\t\t * @param {number} width - 宽度\r\n\t\t\t * @param {number} height - 高度\r\n\t\t\t * @param {number} radius - 圆角半径\r\n\t\t\t */\r\n\t\t\tdrawRoundRect(ctx, x, y, width, height, radius) {\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\t// 左上角圆角\r\n\t\t\t\tctx.arc(x + radius, y + radius, radius, Math.PI, Math.PI * 1.5);\r\n\t\t\t\t// 右上角圆角\r\n\t\t\t\tctx.arc(x + width - radius, y + radius, radius, Math.PI * 1.5, Math.PI * 2);\r\n\t\t\t\t// 右下角圆角\r\n\t\t\t\tctx.arc(x + width - radius, y + height - radius, radius, 0, Math.PI * 0.5);\r\n\t\t\t\t// 左下角圆角\r\n\t\t\t\tctx.arc(x + radius, y + height - radius, radius, Math.PI * 0.5, Math.PI);\r\n\t\t\t\tctx.closePath(); // 闭合路径\r\n\t\t\t},\r\n\r\n\t\t\tasync drawPureCanvas() {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst ctx = uni.createCanvasContext('pureCanvas', this);\r\n\t\t\t\t\tconst canvasWidth = 400;\r\n\t\t\t\t\tconst canvasHeight = 200;\r\n\r\n\t\t\t\t\t// 1. 绘制渐变背景\r\n\t\t\t\t\tconst gradient = ctx.createLinearGradient(0, 0, 0, canvasHeight);\r\n\t\t\t\t\tgradient.addColorStop(0, '#409EFF');\r\n\t\t\t\t\tgradient.addColorStop(1, '#B37EF1');\r\n\t\t\t\t\tctx.setFillStyle(gradient);\r\n\t\t\t\t\tctx.fillRect(0, 0, canvasWidth, canvasHeight);\r\n\r\n\t\t\t\t\t// 2. 绘制用户名\r\n\t\t\t\t\tctx.setFillStyle('#FFFFFF');\r\n\t\t\t\t\tctx.setFontSize(18);\r\n\t\t\t\t\tctx.fillText('王启军', 20, 40);\r\n\r\n\t\t\t\t\t// 3. 绘制邀请语\r\n\t\t\t\t\tctx.setFontSize(12);\r\n\t\t\t\t\tctx.fillText('我在这个平台发现了好东西，邀请你一起加入～', 20, 70);\r\n\r\n\t\t\t\t\t// 4. 绘制带圆角的白色卡片（圆角半径8px，放大图片后保持卡片尺寸不变）\r\n\t\t\t\t\tconst cardX = 20;\r\n\t\t\t\t\tconst cardY = 90;\r\n\t\t\t\t\tconst cardWidth = canvasWidth - 90;\r\n\t\t\t\t\tconst cardHeight = 90;\r\n\t\t\t\t\tconst cornerRadius = 8; // 圆角大小\r\n\r\n\t\t\t\t\tctx.setFillStyle('#FFFFFF');\r\n\t\t\t\t\tthis.drawRoundRect(ctx, cardX, cardY, cardWidth, cardHeight, cornerRadius);\r\n\t\t\t\t\tctx.fill(); // 填充圆角矩形\r\n\r\n\t\t\t\t\t// 5. 绘制卡片标题\r\n\t\t\t\t\tctx.setFillStyle('#333333');\r\n\t\t\t\t\tctx.setFontSize(12);\r\n\t\t\t\t\tctx.fillText('邀请你加入\"农链天下\"', 40, 130);\r\n\r\n\t\t\t\t\t// 6. 绘制放大后的图片（从60x60调整为70x70，保持居中）\r\n\t\t\t\t\tconst imageUrl =\r\n\t\t\t\t\t\t'https://image.xcbdsc.com/group1/default/20241103/15/40/8/d772fe7b3a949cf0f63a97cd0c7cd258.jpg';\r\n\t\t\t\t\tconst imgPath = await this.loadImageUrl(imageUrl);\r\n\r\n\t\t\t\t\t// 图片尺寸放大到70x70（原60x60）\r\n\t\t\t\t\tconst imgSize = 80;\r\n\t\t\t\t\t// 计算位置：右距20px，垂直居中\r\n\t\t\t\t\tconst imgX = canvasWidth - 80 - imgSize;\r\n\t\t\t\t\tconst imgY = cardY + (cardHeight - imgSize) / 2;\r\n\r\n\t\t\t\t\tctx.drawImage(imgPath, imgX, imgY, imgSize, imgSize);\r\n\r\n\t\t\t\t\t// 7. 渲染所有内容\r\n\t\t\t\t\tctx.draw();\r\n\r\n\t\t\t\t} catch (err) {\r\n\t\t\t\t\tconsole.error('Canvas绘制错误：', err);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n</script>\r\n\r\n<style scoped>\r\n</style>","import MiniProgramPage from 'E:/小程序转app/xcbapp/pages/demo/demo.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":";;AAKC,MAAK,YAAU;AAAA,EACd,QAAQ,CAAE;AAAA,EACV,YAAY,CAAE;AAAA,EACd,OAAO;AACN,WAAO;EACP;AAAA,EACD,UAAU;AACT,SAAK,eAAc;AAAA,EACnB;AAAA,EACD,SAAS;AAAA;AAAA,IAER,aAAa,KAAK;AACjB,aAAO,IAAI,QAAQ,CAAC,SAAS,WAAW;AACvCA,sBAAAA,MAAI,aAAa;AAAA,UAChB,KAAK;AAAA,UACL,SAAS,CAAC,QAAQ,QAAQ,IAAI,IAAI;AAAA,UAClC,MAAM,CAAC,QAAQ,OAAO,IAAI,MAAM,UAAU,IAAI,MAAM,EAAE,CAAC;AAAA,QACxD,CAAC;AAAA,MACF,CAAC;AAAA,IACD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAWD,cAAc,KAAK,GAAG,GAAG,OAAO,QAAQ,QAAQ;AAC/C,UAAI,UAAS;AAEb,UAAI,IAAI,IAAI,QAAQ,IAAI,QAAQ,QAAQ,KAAK,IAAI,KAAK,KAAK,GAAG;AAE9D,UAAI,IAAI,IAAI,QAAQ,QAAQ,IAAI,QAAQ,QAAQ,KAAK,KAAK,KAAK,KAAK,KAAK,CAAC;AAE1E,UAAI,IAAI,IAAI,QAAQ,QAAQ,IAAI,SAAS,QAAQ,QAAQ,GAAG,KAAK,KAAK,GAAG;AAEzE,UAAI,IAAI,IAAI,QAAQ,IAAI,SAAS,QAAQ,QAAQ,KAAK,KAAK,KAAK,KAAK,EAAE;AACvE,UAAI,UAAS;AAAA,IACb;AAAA,IAED,MAAM,iBAAiB;AACtB,UAAI;AACH,cAAM,MAAMA,cAAG,MAAC,oBAAoB,cAAc,IAAI;AACtD,cAAM,cAAc;AACpB,cAAM,eAAe;AAGrB,cAAM,WAAW,IAAI,qBAAqB,GAAG,GAAG,GAAG,YAAY;AAC/D,iBAAS,aAAa,GAAG,SAAS;AAClC,iBAAS,aAAa,GAAG,SAAS;AAClC,YAAI,aAAa,QAAQ;AACzB,YAAI,SAAS,GAAG,GAAG,aAAa,YAAY;AAG5C,YAAI,aAAa,SAAS;AAC1B,YAAI,YAAY,EAAE;AAClB,YAAI,SAAS,OAAO,IAAI,EAAE;AAG1B,YAAI,YAAY,EAAE;AAClB,YAAI,SAAS,yBAAyB,IAAI,EAAE;AAG5C,cAAM,QAAQ;AACd,cAAM,QAAQ;AACd,cAAM,YAAY,cAAc;AAChC,cAAM,aAAa;AACnB,cAAM,eAAe;AAErB,YAAI,aAAa,SAAS;AAC1B,aAAK,cAAc,KAAK,OAAO,OAAO,WAAW,YAAY,YAAY;AACzE,YAAI,KAAI;AAGR,YAAI,aAAa,SAAS;AAC1B,YAAI,YAAY,EAAE;AAClB,YAAI,SAAS,eAAe,IAAI,GAAG;AAGnC,cAAM,WACL;AACD,cAAM,UAAU,MAAM,KAAK,aAAa,QAAQ;AAGhD,cAAM,UAAU;AAEhB,cAAM,OAAO,cAAc,KAAK;AAChC,cAAM,OAAO,SAAS,aAAa,WAAW;AAE9C,YAAI,UAAU,SAAS,MAAM,MAAM,SAAS,OAAO;AAGnD,YAAI,KAAI;AAAA,MAEP,SAAO,KAAK;AACbA,sBAAA,MAAA,MAAA,SAAA,8BAAc,eAAe,GAAG;AAAA,MACjC;AAAA,IACD;AAAA,EACD;;;;;;ACzGF,GAAG,WAAW,eAAe;"}