{"version":3,"file":"login.js","sources":["pages/login/login.vue","D:/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbG9naW4vbG9naW4udnVl"],"sourcesContent":["<template>\r\n\t<view class=\"login-container\">\r\n\t\t<view class=\"decorative-circle circle-1\"></view>\r\n\t\t<view class=\"decorative-circle circle-2\"></view>\r\n\t\t<view class=\"content-wrapper\">\r\n\t\t\t<view class=\"header\">\r\n\t\t\t\t<text class=\"title\">农链天下</text>\r\n\t\t\t\t<text class=\"subtitle\">请登录您的账号</text>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"form-wrapper\">\r\n\t\t\t\t<view class=\"input-group\">\r\n\t\t\t\t\t<uni-icons type=\"phone\" size=\"24\" color=\"#409EFF\"></uni-icons>\r\n\t\t\t\t\t<input class=\"form-input\" type=\"number\" v-model=\"form.username\" placeholder=\"手机号码\" maxlength=\"11\" />\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"input-group\">\r\n\t\t\t\t\t<uni-icons type=\"locked\" size=\"24\" color=\"#409EFF\"></uni-icons>\r\n\t\t\t\t\t<!-- \t\t\t\t\t<input class=\"form-input\"  v-model=\"form.password\"\r\n\t\t\t\t\t\tplaceholder=\"密码\" /> -->\r\n\t\t\t\t\t<input class=\"form-input\" v-show=\"showPassword\" type=\"password\" :value=\"form.password\"\r\n\t\t\t\t\t\tplaceholder=\"密码\" maxlength=\"11\" @input=\"e => form.password = e.detail.value\" />\r\n\t\t\t\t\t<input class=\"form-input\" v-show=\"!showPassword\" type=\"text\" :value=\"form.password\" placeholder=\"密码\"\r\n\t\t\t\t\t\tmaxlength=\"11\" @input=\"e => form.password = e.detail.value\" />\r\n\t\t\t\t\t<uni-icons :type=\"showPassword ? 'eye' : 'eye-slash'\" size=\"24\" color=\"#999\"\r\n\t\t\t\t\t\t@click=\"showPassword = !showPassword\" />\r\n\t\t\t\t</view>\r\n\t\t\t\t<button class=\"login-btn\" :class=\"{ 'active': formValid}\" @click=\"login\">\r\n\t\t\t\t\t<text v-if=\"!loading\">登 录</text>\r\n\t\t\t\t\t<uni-icons v-else type=\"spinner-cycle\" size=\"24\" color=\"#fff\" class=\"loading-icon\"></uni-icons>\r\n\t\t\t\t</button>\r\n\t\t\t\t<view class=\"assist-links\">\r\n\t\t\t\t\t<text class=\"link-text\" @click=\"gotoRegster\">注册账号</text>\r\n\t\t\t\t\t<text class=\"link-text\" @click=\"gotoUptdatePwd\">忘记密码</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n<script>\r\n\timport Vue from 'vue'\r\n\timport {\r\n\t\tapi\r\n\t} from '../../api/index.js';\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tform: {\r\n\t\t\t\t\tusername: '',\r\n\t\t\t\t\tpassword: ''\r\n\t\t\t\t},\r\n\t\t\t\tshowPassword: false,\r\n\t\t\t\tloading: false\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\tformValid() {\r\n\t\t\t\treturn /^1[3-9]\\d{9}$/.test(this.form.username) && this.form.password.length >= 6\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\ttogglePassword() {\r\n\t\t\t\tthis.showPassword = !this.showPassword\r\n\t\t\t},\r\n\t\t\tasync login() {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst response = await api.login(this.form.username, this.form.password);\r\n\t\t\t\t\tif (response.code === 200) {\r\n\t\t\t\t\t\tconst token = response.data.token;\r\n\t\t\t\t\t\t// 保存token\r\n\t\t\t\t\t\tuni.setStorageSync('token', token);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// console.log(uni.getStorageSync('registerID'),'这是设备id')\r\n\t\t\t\t\t\tlet registerID = uni.getStorageSync('registerID')\r\n\t\t\t\t\t\tif(registerID){\r\n\t\t\t\t\t\t\tlet res = await api.editUserProfile({'registration_id':registerID})\r\n\t\t\t\t\t\t\tconsole.log(\"已覆盖设备id\",res)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tlet promise = new Promise((res, rej) => {\r\n\t\t\t\t\t\t\tif (this.form.password == '123456') {\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ticon: 'error',\r\n\t\t\t\t\t\t\t\t\ttitle: '密码过于简单,请用户自行修改以确保账号安全',\r\n\t\t\t\t\t\t\t\t\tduration: 1000\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\t\tres(200)\r\n\t\t\t\t\t\t\t\t}, 2000)\r\n\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tres(201)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tpromise.then((code) => {\r\n\t\t\t\t\t\t\tif (code == 200) {\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ticon: 'loading',\r\n\t\t\t\t\t\t\t\t\ttitle: '正在登录.....',\r\n\t\t\t\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\t\t// console.log(code,\"正在登录\")\r\n\t\t\t\t\t\t\t\t\treturn code\r\n\t\t\t\t\t\t\t\t}, 1500)\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ticon: 'loading',\r\n\t\t\t\t\t\t\t\t\ttitle: '正在登录.....',\r\n\t\t\t\t\t\t\t\t\tduration: 1000\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\treturn code\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}).then((code) => {\r\n\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\tuni.switchTab({\r\n\t\t\t\t\t\t\t\t\turl: '/pages/index/index'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}, 1000)\r\n\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: response.msg || response.message,\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.log(error)\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: `登录失败`,\r\n\t\t\t\t\t\ticon: 'error'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgotoRegster() {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '/pages/register/register'\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tgotoUptdatePwd() {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '/subPackages/settings/updatePwd/updatePwd'\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\t$primary: #409EFF;\r\n\t$gradient-start: #6AB3FD;\r\n\t$gradient-end: #409EFF;\r\n\t$text-dark: #2c3e50;\r\n\t$text-light: #7f8c8d;\r\n\r\n\t.login-container {\r\n\t\tmin-height: 100vh;\r\n\t\tbackground: linear-gradient(135deg, #f5f9ff 0%, #ffffff 100%);\r\n\t\tposition: relative;\r\n\t\toverflow: hidden;\r\n\r\n\t\t.decorative-circle {\r\n\t\t\tposition: absolute;\r\n\t\t\tborder-radius: 50%;\r\n\t\t\tbackground: linear-gradient(45deg, rgba($primary, 0.1) 0%, rgba($primary, 0.05) 100%);\r\n\r\n\t\t\t&.circle-1 {\r\n\t\t\t\twidth: 600rpx;\r\n\t\t\t\theight: 600rpx;\r\n\t\t\t\ttop: -300rpx;\r\n\t\t\t\tright: -300rpx;\r\n\t\t\t}\r\n\r\n\t\t\t&.circle-2 {\r\n\t\t\t\twidth: 400rpx;\r\n\t\t\t\theight: 400rpx;\r\n\t\t\t\tbottom: -200rpx;\r\n\t\t\t\tleft: -200rpx;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.content-wrapper {\r\n\t\t\tpadding: 60rpx 50rpx;\r\n\t\t\tposition: relative;\r\n\t\t\tz-index: 1;\r\n\r\n\t\t\t.header {\r\n\t\t\t\tmargin-bottom: 80rpx;\r\n\r\n\t\t\t\t.title {\r\n\t\t\t\t\tdisplay: block;\r\n\t\t\t\t\tfont-size: 48rpx;\r\n\t\t\t\t\tfont-weight: 600;\r\n\t\t\t\t\tcolor: $text-dark;\r\n\t\t\t\t\tmargin-bottom: 16rpx;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.subtitle {\r\n\t\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\t\tcolor: $text-light;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t.form-wrapper {\r\n\t\t\t\t.input-group {\r\n\t\t\t\t\theight: 100rpx;\r\n\t\t\t\t\tbackground: #fff;\r\n\t\t\t\t\tborder-radius: 16rpx;\r\n\t\t\t\t\tmargin-bottom: 40rpx;\r\n\t\t\t\t\tpadding: 0 32rpx;\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\talign-items: center;\r\n\t\t\t\t\tbox-shadow: 0 6rpx 20rpx rgba(0, 0, 0, 0.03);\r\n\t\t\t\t\ttransition: all 0.3s ease;\r\n\r\n\t\t\t\t\t&.focus {\r\n\t\t\t\t\t\tbox-shadow: 0 8rpx 24rpx rgba($primary, 0.1);\r\n\t\t\t\t\t\ttransform: translateY(-2rpx);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.form-input {\r\n\t\t\t\t\t\tflex: 1;\r\n\t\t\t\t\t\theight: 100%;\r\n\t\t\t\t\t\tmargin: 0 24rpx;\r\n\t\t\t\t\t\tfont-size: 30rpx;\r\n\t\t\t\t\t\tcolor: $text-dark;\r\n\t\t\t\t\t\tborder: none;\r\n\t\t\t\t\t\toutline: none;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.login-btn {\r\n\t\t\t\t\theight: 96rpx;\r\n\t\t\t\t\tline-height: 96rpx;\r\n\t\t\t\t\tfont-size: 34rpx;\r\n\t\t\t\t\tcolor: #fff;\r\n\t\t\t\t\tbackground: linear-gradient(45deg, $gradient-start, $gradient-end);\r\n\t\t\t\t\tborder-radius: 48rpx;\r\n\t\t\t\t\tmargin-top: 60rpx;\r\n\t\t\t\t\ttransition: all 0.3s;\r\n\t\t\t\t\tbox-shadow: 0 8rpx 24rpx rgba($primary, 0.2);\r\n\r\n\t\t\t\t\t&:not(.active) {\r\n\t\t\t\t\t\topacity: 0.6;\r\n\t\t\t\t\t\tbackground: #c0dfff;\r\n\t\t\t\t\t\tbox-shadow: none;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t&.loading {\r\n\t\t\t\t\t\topacity: 0.9;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.loading-icon {\r\n\t\t\t\t\t\tanimation: rotate 1s linear infinite;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.assist-links {\r\n\t\t\t\t\tmargin-top: 40rpx;\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\tjustify-content: space-between;\r\n\r\n\t\t\t\t\t.link-text {\r\n\t\t\t\t\t\tcolor: $primary;\r\n\t\t\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\t\t\tposition: relative;\r\n\r\n\t\t\t\t\t\t&::after {\r\n\t\t\t\t\t\t\tcontent: '';\r\n\t\t\t\t\t\t\tposition: absolute;\r\n\t\t\t\t\t\t\tbottom: -4rpx;\r\n\t\t\t\t\t\t\tleft: 0;\r\n\t\t\t\t\t\t\twidth: 0;\r\n\t\t\t\t\t\t\theight: 2rpx;\r\n\t\t\t\t\t\t\tbackground: $primary;\r\n\t\t\t\t\t\t\ttransition: width 0.3s;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t&:active::after {\r\n\t\t\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t@keyframes rotate {\r\n\t\tfrom {\r\n\t\t\ttransform: rotate(0deg);\r\n\t\t}\r\n\r\n\t\tto {\r\n\t\t\ttransform: rotate(360deg);\r\n\t\t}\r\n\t}\r\n</style>","import MiniProgramPage from 'E:/小程序转app/xcbapp/pages/login/login.vue'\nwx.createPage(MiniProgramPage)"],"names":["api","uni"],"mappings":";;;AA0CC,MAAK,YAAU;AAAA,EACd,OAAO;AACN,WAAO;AAAA,MACN,MAAM;AAAA,QACL,UAAU;AAAA,QACV,UAAU;AAAA,MACV;AAAA,MACD,cAAc;AAAA,MACd,SAAS;AAAA,IACV;AAAA,EACA;AAAA,EACD,UAAU;AAAA,IACT,YAAY;AACX,aAAO,gBAAgB,KAAK,KAAK,KAAK,QAAQ,KAAK,KAAK,KAAK,SAAS,UAAU;AAAA,IACjF;AAAA,EACA;AAAA,EACD,SAAS;AAAA,IACR,iBAAiB;AAChB,WAAK,eAAe,CAAC,KAAK;AAAA,IAC1B;AAAA,IACD,MAAM,QAAQ;AACb,UAAI;AACH,cAAM,WAAW,MAAMA,cAAI,MAAM,KAAK,KAAK,UAAU,KAAK,KAAK,QAAQ;AACvE,YAAI,SAAS,SAAS,KAAK;AAC1B,gBAAM,QAAQ,SAAS,KAAK;AAE5BC,wBAAAA,MAAI,eAAe,SAAS,KAAK;AAGjC,cAAI,aAAaA,cAAAA,MAAI,eAAe,YAAY;AAChD,cAAG,YAAW;AACb,gBAAI,MAAM,MAAMD,UAAG,IAAC,gBAAgB,EAAC,mBAAkB,WAAU,CAAC;AAClEC,0BAAAA,MAAA,MAAA,OAAA,+BAAY,WAAU,GAAG;AAAA,UAC1B;AAEA,cAAI,UAAU,IAAI,QAAQ,CAAC,KAAK,QAAQ;AACvC,gBAAI,KAAK,KAAK,YAAY,UAAU;AACnCA,4BAAAA,MAAI,UAAU;AAAA,gBACb,MAAM;AAAA,gBACN,OAAO;AAAA,gBACP,UAAU;AAAA,eACV;AACD,yBAAW,MAAM;AAChB,oBAAI,GAAG;AAAA,cACP,GAAE,GAAI;AAAA,mBAED;AACN,kBAAI,GAAG;AAAA,YACR;AAAA,WACA;AACD,kBAAQ,KAAK,CAAC,SAAS;AACtB,gBAAI,QAAQ,KAAK;AAChBA,4BAAAA,MAAI,UAAU;AAAA,gBACb,MAAM;AAAA,gBACN,OAAO;AAAA,gBACP,UAAU;AAAA,eACV;AAED,yBAAW,MAAM;AAEhB,uBAAO;AAAA,cACP,GAAE,IAAI;AAAA,mBACD;AACNA,4BAAAA,MAAI,UAAU;AAAA,gBACb,MAAM;AAAA,gBACN,OAAO;AAAA,gBACP,UAAU;AAAA,eACV;AACD,qBAAO;AAAA,YACR;AAAA,UACD,CAAC,EAAE,KAAK,CAAC,SAAS;AACjB,uBAAW,MAAM;AAChBA,4BAAAA,MAAI,UAAU;AAAA,gBACb,KAAK;AAAA,cACN,CAAC;AAAA,YACD,GAAE,GAAI;AAAA,WACP;AAAA,eAEK;AACNA,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO,SAAS,OAAO,SAAS;AAAA,YAChC,MAAM;AAAA,UACP,CAAC;AAAA,QACF;AAAA,MACC,SAAO,OAAO;AACfA,sBAAAA,MAAA,MAAA,OAAA,gCAAY,KAAK;AACjBA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QACP,CAAC;AAAA,MACF;AAAA,IACA;AAAA,IACD,cAAc;AACbA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK;AAAA,OACL;AAAA,IACD;AAAA,IACD,iBAAiB;AAChBA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK;AAAA,OACL;AAAA,IACF;AAAA,EACD;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChJD,GAAG,WAAW,eAAe;"}