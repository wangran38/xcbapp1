{"version":3,"file":"additionalinformation.js","sources":["pages/additionalinformation/additionalinformation.vue","D:/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvYWRkaXRpb25hbGluZm9ybWF0aW9uL2FkZGl0aW9uYWxpbmZvcm1hdGlvbi52dWU"],"sourcesContent":["<template>\r\n\t<view class=\"container\">\r\n\t\t<!-- 浅色背景 -->\r\n\t\t<view class=\"background-wave\"></view>\r\n\t\t<!-- 商品选择 -->\r\n\t\t<view class=\"product-selector\">\r\n\t\t\t<uni-forms-item label=\"选择菜品\" label-width=\"80\" label-align=\"right\">\r\n\t\t\t\t<uni-data-select v-model=\"selectedProduct\" :localdata=\"products\" placeholder=\"请选择菜品\"\r\n\t\t\t\t\tclass=\"nature-select\" />\r\n\t\t\t</uni-forms-item>\r\n\t\t</view>\r\n\t\t<scroll-view scroll-y=\"true\" class=\"timeline-container\"\r\n\t\t\t:style=\"{visibility: timelineData.length ? 'visible' : 'hidden'}\">\r\n\t\t\t<view v-for=\"(item, index) in timelineData\" :key=\"index\" class=\"timeline-item\">\r\n\t\t\t\t<view class=\"timeline-marker\">\r\n\t\t\t\t\t<view class=\"marker-icon\">\r\n\t\t\t\t\t\t<uni-icons type=\"calendar\" size=\"28\" color=\"#fff\" />\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"timeline-connector\"></view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<!-- 内容卡片 -->\r\n\t\t\t\t<view class=\"nature-card\" @click=\"handleDayClick(item)\">\r\n\t\t\t\t\t<view class=\"card-header\">\r\n\t\t\t\t\t\t<text class=\"date-label\">{{ initTime(item.created) }}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"card-content\">\r\n\t\t\t\t\t\t<text class=\"content-text\">点击查看生长情况</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"status-tag\" :class=\"'completed'\">\r\n\t\t\t\t\t\t已完成\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</scroll-view>\r\n\r\n\t\t<uni-popup ref=\"editPanel\" type=\"bottom\">\r\n\t\t\t<view class=\"edit-panel\">\r\n\t\t\t\t<view class=\"panel-header\">\r\n\t\t\t\t\t<text class=\"panel-title\">{{ currentDate }} 生长记录</text>\r\n\t\t\t\t\t<!-- <uni-icons type=\"close\" size=\"24\" color=\"#666\" @click=\"closeEditor\" /> -->\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"panel-body\">\r\n\t\t\t\t\t<button class=\"action-button\" @click=\"selectImage\">\r\n\t\t\t\t\t\t<uni-icons type=\"camera\" size=\"20\" color=\"#fff\" />\r\n\t\t\t\t\t\t<text>上传照片</text>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<view class=\"delete-icon\" @click=\"editPanelClosePopup\">×</view>\r\n\r\n\t\t\t\t\t<scroll-view class=\"preview-container\" scroll-x=\"true\">\r\n\t\t\t\t\t\t<view v-for=\"(item, index) in fileList\" :key=\"index\" class=\"preview-item\">\r\n\t\t\t\t\t\t\t<image\r\n\t\t\t\t\t\t\t  v-if=\"item.fileType === 'image'\"\r\n\t\t\t\t\t\t\t  :src=\"item.tempFilePath\"\r\n\t\t\t\t\t\t\t  mode=\"aspectFill\"\r\n\t\t\t\t\t\t\t  class=\"media-content\"  @click=\"viewImage(item.tempFilePath)\"/>\r\n\t\t\t\t\t\t\t<video\r\n\t\t\t\t\t\t\t  v-else\r\n\t\t\t\t\t\t\t  :src=\"item.tempFilePath\"\r\n\t\t\t\t\t\t\t  controls\r\n\t\t\t\t\t\t\t  class=\"media-content\"\r\n\t\t\t\t\t\t\t  objectFit=\"cover\"></video>\r\n\t\t\t\t\t\t\t<view class=\"delete-icon\" @click=\"handleDelete(index)\">×</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</scroll-view>\r\n\r\n\r\n\r\n\t\t\t\t\t<image v-if=\"tempImage\" :src=\"tempImage\" class=\"image-preview\" mode=\"aspectFit\" />\r\n\t\t\t\t\t<textarea v-model=\"tempText\" placeholder=\"请输入详细记录...\" class=\"record-textarea\"/>\r\n\t\t\t\t\t<button class=\"confirm-button\" @click=\"saveContent\">保存记录</button>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</uni-popup>\r\n\r\n\t\t<view v-if=\"!timelineData.length\" class=\"empty-state\">\r\n\t\t\t<text class=\"empty-text\">请先选择种植商品</text>\r\n\t\t</view>\r\n\r\n\t\t<uni-popup ref=\"viewPanel\" type=\"bottom\">\r\n\t\t\t<view class=\"edit-panel\">\r\n\t\t\t\t<view class=\"panel-header\">\r\n\t\t\t\t\t<text class=\"panel-title\">{{ currentDate }} 生长记录</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"panel-body\">\r\n\t\t\t\t\t<view class=\"delete-icon\" @click=\"viewPanelClosePopup\">×</view>\r\n\r\n\t\t\t\t\t<scroll-view class=\"preview-container\" scroll-x=\"true\">\r\n\t\t\t\t\t\t<view v-for=\"(item, index) in viewImgAndVideo\" :key=\"index\" class=\"preview-item\">\r\n\t\t\t\t\t\t\t<image\r\n\t\t\t\t\t\t\t  v-if=\"item.fileType === 'image'\"\r\n\t\t\t\t\t\t\t  :src=\"item.path\"\r\n\t\t\t\t\t\t\t  mode=\"aspectFill\"\r\n\t\t\t\t\t\t\t  class=\"media-content\" @click=\"viewImage(item.path)\"/>\r\n\t\t\t\t\t\t\t<video\r\n\t\t\t\t\t\t\t  v-else\r\n\t\t\t\t\t\t\t  :src=\"item.path\"\r\n\t\t\t\t\t\t\t  controls\r\n\t\t\t\t\t\t\t  class=\"media-content\"\r\n\t\t\t\t\t\t\t  objectFit=\"cover\"></video>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</scroll-view>\r\n\r\n\t\t\t\t\t<image v-if=\"tempImage\" :src=\"tempImage\" class=\"image-preview\" mode=\"aspectFit\" />\r\n\t\t\t\t\t<textarea v-model=\"tempText\" placeholder=\"\" class=\"record-textarea\" disabled/>\r\n\t\t\t\t\t<button class=\"confirm-button\"  style=\"background-color: red;\" @click=\"removeItem\">删除记录</button>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</uni-popup>\r\n\r\n\t <view class=\"float-btn\" @click=\"addRecord\">\r\n\t\t  <uni-icons type=\"plusempty\" size=\"30\" color=\"#fff\" />\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport dayjs from 'dayjs'\r\n\timport {\r\n\t\tapi,\r\n\t\tUPLOAD_URL\r\n\t} from '../../api/index.js';\r\n\timport {\r\n\t\tmyMixin\r\n\t} from '@/utils/public.js'\r\n\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tselectedProduct: null,\r\n\t\t\t\tproducts: [],\r\n\t\t\t\ttimelineData: [],\r\n\t\t\t\tactiveIndex: -1,\r\n\t\t\t\ttempImage: '',\r\n\t\t\t\ttempText: '',\r\n\t\t\t\tcurrentDate: '',\r\n\t\t\t\tformData: {\r\n\t\t\t\t\tpage: 1,\r\n\t\t\t\t\tlimit: 30\r\n\t\t\t\t},\r\n\t\t\t\tfileList: [],\r\n\t\t\t\tviewImgAndVideo:null,\r\n\t\t\t\topenId:null,\r\n\t\t\t}\r\n\t\t},\r\n\t\tmixins: [myMixin],\r\n\t\twatch: {\r\n\t\t\tselectedProduct(newValue, oldValue) {\r\n\t\t\t\tthis.lifeCycleData()\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync onLoad() {\r\n\t\t\tlet data = await api.goodslist(this.formData)\r\n\t\t\tif (data.code == 200) {\r\n\t\t\t\tlet items = data.data.listdata.map((item, index) => {\r\n\t\t\t\t\tlet beginTime = item.sellbegintime\r\n\t\t\t\t\tlet endTime = item.sellendtime\r\n\t\t\t\t\tlet initBeginTime =\r\n\t\t\t\t\t\t`${dayjs(beginTime).$y}-${dayjs(beginTime).month()+1}-${dayjs(beginTime).date()}`\r\n\t\t\t\t\tlet initEndTime =\r\n\t\t\t\t\t\t`${dayjs(endTime).$y}-${dayjs(endTime).month()+1}-${dayjs(endTime).date()}`\r\n\t\t\t\t\tconst date1 = dayjs(initBeginTime)\r\n\t\t\t\t\tconst date2 = dayjs(initEndTime)\r\n\t\t\t\t\tlet diff = date2.diff(date1, 'day')\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tvalue: item.id,\r\n\t\t\t\t\t\ttext: item.goodsname\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tthis.products = items\r\n\t\t\t\tif (this.products) {\r\n\t\t\t\t\tthis.selectedProduct = this.products[0].value\r\n\t\t\t\t\tthis.lifeCycleData()\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tviewImage(url){\r\n\t\t\t\tconsole.log(url)\r\n\t\t\t\tuni.previewImage({\r\n\t\t\t\t\tshowmenu:false,\r\n\t\t\t\t\turls:[url]\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 删除预卖菜品的生命周期内容\r\n\t\t\tasync removeItem(){\r\n\t\t\t\tlet res = await api.delMoments({id:this.openId})\r\n\t\t\t\tif(res.code == 200){\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ticon:'success',\r\n\t\t\t\t\t\ttitle:res.message|| res.msg\r\n\t\t\t\t\t}).then(data=>{\r\n\t\t\t\t\t\tthis.initPorp()\r\n\t\t\t\t\t\tthis.lifeCycleData() // 更新数据\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\teditPanelClosePopup(){\r\n\t\t\t\tthis.initPorp()\r\n\t\t\t},\r\n\t\t\tviewPanelClosePopup(){\r\n\t\t\t\tthis.initPorp()\r\n\t\t\t},\r\n\t\t\t// 获取生命周期数据 \r\n\t\t\tasync lifeCycleData() {\r\n\t\t\t\tlet data = await api.goodsinfoList({\r\n\t\t\t\t\tpage: 1,\r\n\t\t\t\t\tlimit: 100,\r\n\t\t\t\t\tfarmersgoods_id: this.selectedProduct\r\n\t\t\t\t})\r\n\r\n\t\t\t\t// 处理数据\r\n\t\t\t\tlet existId = []\r\n\t\t\t\tdata.data.listdata.forEach((item) => {\r\n\t\t\t\t\t// if (existId.find((chilen)=>{item.id==chilen.id}))\r\n\t\t\t\t\texistId.find((chilen) => {\r\n\t\t\t\t\t\t// console.log(\"这是大项\", item.user_id, \"这是小项\", chilen.user_id)\r\n\t\t\t\t\t})\r\n\t\t\t\t\texistId.push(item)\r\n\t\t\t\t})\r\n\t\t\t\tthis.timelineData = data.data.listdata\r\n\t\t\t},\r\n\t\t\t// 删除图片或视频\r\n\t\t\thandleDelete(index) {\r\n\t\t\t\tthis.fileList.splice(index, 1)\r\n\t\t\t},\r\n\t\t\taddRecord() {\r\n\t\t\t\tthis.$refs.editPanel.open()\r\n\r\n\t\t\t},\r\n\t\t\tgenerateTimeline() {\r\n\t\t\t\tif (!this.selectedProduct) {\r\n\t\t\t\t\tthis.timelineData = []\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst product = this.products.find(p => p.value === this.selectedProduct)\r\n\t\t\t\tthis.timelineData = Array.from({\r\n\t\t\t\t\tlength: product.days\r\n\t\t\t\t}, (_, i) => ({\r\n\t\t\t\t\tday: i + 1,\r\n\t\t\t\t\tdate: dayjs(product.endDate).subtract(product.days - i - 1, 'day').format('MM/DD'),\r\n\t\t\t\t\tfullDate: dayjs(product.endDate).subtract(product.days - i - 1, 'day').format(\r\n\t\t\t\t\t\t'YYYY-MM-DD'),\r\n\t\t\t\t\timage: '',\r\n\t\t\t\t\ttext: '',\r\n\t\t\t\t\tstatus: 'pending'\r\n\t\t\t\t}))\r\n\t\t\t},\r\n\t\t\thandleDayClick(item) {\r\n\t\t\t\tthis.$refs.viewPanel.open()\r\n\t\t\t\tthis.tempText = item.content\r\n\t\t\t\tif(item.imgs){ // 存在图片就做处理\r\n\t\t\t\t\tlet i = []\r\n\t\t\t\t\ti =  item.imgs.split(',')\r\n\t\t\t\t\tlet initData =  i.map((anlien)=>{\r\n\t\t\t\t\t\tif (anlien.slice(anlien.length-3) == 'mp4'){\r\n\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\tfileType:'video',\r\n\t\t\t\t\t\t\t\tpath:anlien\r\n\t\t\t\t\t\t\t} \r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\tfileType:'image',\r\n\t\t\t\t\t\t\t\tpath:anlien\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.viewImgAndVideo = initData\r\n\t\t\t\t}\r\n\t\t\t\tthis.openId = item.id\r\n\t\t\t},\r\n\t\t\tsaveImage(path) {\r\n\t\t\t\treturn new Promise((res, rej) => {\r\n\t\t\t\t\tuni.uploadFile({\r\n\t\t\t\t\t\turl: 'https://image.xcbdsc.com/group1/upload',\r\n\t\t\t\t\t\tname: 'file',\r\n\t\t\t\t\t\tfilePath: path,\r\n\t\t\t\t\t\tformData: {\r\n\t\t\t\t\t\t\toutput: 'json2'\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tsuccess: (reponse) => {\r\n\t\t\t\t\t\t\tres(JSON.parse(reponse.data))\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t\t\trej(err)\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '上传失败',\r\n\t\t\t\t\t\t\t\ticon: 'error'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\t\t\tinitPorp() {\r\n\t\t\t\tuni.hideLoading();\r\n\t\t\t\tthis.$refs.editPanel.close()\r\n\t\t\t\tthis.$refs.viewPanel.close()\r\n\t\t\t\tthis.tempText = ''\r\n\t\t\t\tthis.fileList = []\r\n\t\t\t},\r\n\t\t\tasync selectImage() {\r\n\t\t\t\t// const [res] = await uni.chooseImage({\r\n\t\t\t\t// \tcount: 1\r\n\t\t\t\t// })\r\n\t\t\t\t// this.tempImage = res.tempFilePaths[0]\r\n\t\t\t\t\r\n\t\t\t\tuni.chooseImage({\r\n\t\t\t\t\tcount: 9,\r\n\t\t\t\t\tmediaType: 'mix',\r\n\t\t\t\t\tsourceType: ['album', 'camera'],\r\n\t\t\t\t\tmaxDuration: 30,\r\n\t\t\t\t\tcamera: 'back',\r\n\t\t\t\t\tmediaType: ['image'],\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tlet newImageArray = res.tempFiles.map(item=>{\r\n\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t...item,\r\n\t\t\t\t\t\t\t\tfileType:'image'\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tthis.fileList = [...this.fileList, ...newImageArray]\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t// uni.chooseMedia({\r\n\t\t\t\t// \tcount: 9,\r\n\t\t\t\t// \tmediaType: 'mix',\r\n\t\t\t\t// \tsourceType: ['album', 'camera'],\r\n\t\t\t\t// \tmaxDuration: 30,\r\n\t\t\t\t// \tcamera: 'back',\r\n\t\t\t\t// \tsuccess: (res) => {\r\n\t\t\t\t// \t\tthis.fileList = [...this.fileList, ...res.tempFiles]\r\n\t\t\t\t// \t\t// console.log(this.fileList)\r\n\t\t\t\t// \t}\r\n\t\t\t\t// })\r\n\t\t\t},\r\n\t\t\tsaveContent() {\r\n\r\n\t\t\t\tif (this.selectedProduct == null) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '请选择菜品',\r\n\t\t\t\t\t\ticon: 'error'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '正在上传中.....'\r\n\t\t\t\t});\r\n\t\t\t\t// 构建请求包\r\n\t\t\t\tconst imgUploadPromises = this.fileList.map(item => {\r\n\t\t\t\t\treturn this.saveImage(item.tempFilePath)\r\n\t\t\t\t})\r\n\r\n\t\t\t\t// const videoUploadPromises = this.fileList.map(item => {\r\n\t\t\t\t// \tif (item.fileType == 'video') {\r\n\t\t\t\t// \t\treturn this.saveImage(item.tempFilePath)\r\n\t\t\t\t// \t}\r\n\t\t\t\t// })\r\n\r\n\r\n\r\n\t\t\t\tPromise.all(imgUploadPromises)\r\n\t\t\t\t\t.then(urlList => {\r\n\t\t\t\t\t\tlet imgs = []\r\n\t\t\t\t\t\turlList.forEach((item) => {\r\n\t\t\t\t\t\t\tif (item) {\r\n\t\t\t\t\t\t\t\timgs.push(item.data.url)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tlet data = {\r\n\t\t\t\t\t\t\t'farmersgoods_id': this.selectedProduct,\r\n\t\t\t\t\t\t\t'imgs': imgs.join(','),\r\n\t\t\t\t\t\t\t'type': 1,\r\n\t\t\t\t\t\t\t'content': this.tempText\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tapi.addinfos(data).then((res) => {\r\n\t\t\t\t\t\t\tthis.initPorp()\r\n\t\t\t\t\t\t\tthis.lifeCycleData()\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(err => {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '部分文件上传失败',\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\r\n\t\t\t\t// Promise.all(videoUploadPromises)\r\n\t\t\t\t// \t.then(urlList => {\r\n\t\t\t\t// \t\tlet imgs = []\r\n\t\t\t\t// \t\turlList.forEach((item) => {\r\n\t\t\t\t// \t\t\tif (item) {\r\n\t\t\t\t// \t\t\t\timgs.push(item.data.url)\r\n\t\t\t\t// \t\t\t}\r\n\t\t\t\t// \t\t})\r\n\t\t\t\t// \t\tif (imgs.length == 0) {\r\n\t\t\t\t// \t\t\tthis.initPorp()\r\n\t\t\t\t// \t\t\treturn\r\n\t\t\t\t// \t\t}\r\n\t\t\t\t// \t\tlet data = {\r\n\t\t\t\t// \t\t\t'farmersgoods_id': this.selectedProduct,\r\n\t\t\t\t// \t\t\t'imgs': imgs.join(','),\r\n\t\t\t\t// \t\t\t'type': 2,\r\n\t\t\t\t// \t\t\t'content': this.tempText\r\n\t\t\t\t// \t\t}\r\n\t\t\t\t// \t\tapi.addinfos(data).then((res) => {\r\n\t\t\t\t// \t\t\tthis.initPorp()\r\n\t\t\t\t// \t\t})\r\n\t\t\t\t// \t})\r\n\t\t\t\t// \t.catch(err => {\r\n\t\t\t\t// \t\tuni.showToast({\r\n\t\t\t\t// \t\t\ttitle: '部分视频文件上传失败',\r\n\t\t\t\t// \t\t\ticon: 'none'\r\n\t\t\t\t// \t\t})\r\n\t\t\t\t// \t})\r\n\r\n\t\t\t},\r\n\t\t\tgetStatusClass(day) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tcompleted: day.status === 'completed',\r\n\t\t\t\t\tpending: day.status === 'pending'\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tcloseEditor() {\r\n\t\t\t\tthis.$refs.editPanel.close()\r\n\t\t\t\tthis.tempImage = ''\r\n\t\t\t\tthis.tempText = ''\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style scoped>\r\n\t.media-content {\r\n\t  width: 100%;\r\n\t  height: 100%;\r\n\t}\r\n\t.float-btn {\r\n\t  position: fixed;\r\n\t  bottom: 100rpx;\r\n\t  right: 40rpx;\r\n\t  width: 100rpx;\r\n\t  height: 100rpx;\r\n\t  background: linear-gradient(45deg, #FF8E8E, #FF6B6B);\r\n\t  border-radius: 50%;\r\n\t  display: flex;\r\n\t  align-items: center;\r\n\t  justify-content: center;\r\n\t  box-shadow: 0 12rpx 24rpx rgba(255,107,107,0.3);\r\n\t  transition: transform 0.3s;\r\n\t  \r\n\t}\r\n\t.preview-container {\r\n\t\twhite-space: nowrap;\r\n\t\t/* height: 200rpx; */\r\n\t\tdisplay: flex;\r\n\t\tpadding: 20rpx;\r\n\t}\r\n\r\n\t.preview-item {\r\n\t\tdisplay: inline-block;\r\n\t\tposition: relative;\r\n\t\twidth: 320rpx;\r\n\t\theight: 320rpx;\r\n\t\tmargin: 10rpx;\r\n\t\tborder-radius: 16rpx;\r\n\t\toverflow: hidden;\r\n\t\tbackground: #f5f5f5;\r\n\t}\r\n\r\n\t.preview-image,\r\n\t.preview-video {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tobject-fit: cover;\r\n\t}\r\n\r\n\t.delete-icon {\r\n\t\tposition: absolute;\r\n\t\tright: 10rpx;\r\n\t\ttop: 10rpx;\r\n\t\twidth: 40rpx;\r\n\t\theight: 40rpx;\r\n\t\tbackground: rgba(0, 0, 0, 0.5);\r\n\t\tborder-radius: 50%;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tpadding: 15rpx;\r\n\t\tfont-size: 50rpx;\r\n\t\tz-index: 2;\r\n\t\tcolor: white;\r\n\t}\r\n\r\n\t.video-wrapper {\r\n\t\tposition: relative;\r\n\t}\r\n\r\n\r\n\t/* 适配小程序特殊样式 */\r\n\tvideo::-webkit-media-controls-enclosure {\r\n\t\tdisplay: none !important;\r\n\t}\r\n\r\n\t.preview-video {\r\n\t\t-webkit-object-fit: cover;\r\n\t\tobject-fit: cover;\r\n\t}\r\n\r\n\t/* 处理小程序边框显示问题 */\r\n\t.preview-item::after {\r\n\t\tcontent: \"\";\r\n\t\tposition: absolute;\r\n\t\tleft: 0;\r\n\t\ttop: 0;\r\n\t\twidth: 200%;\r\n\t\theight: 200%;\r\n\t\tborder: 2rpx solid #eee;\r\n\t\ttransform-origin: 0 0;\r\n\t\ttransform: scale(0.5);\r\n\t\tbox-sizing: border-box;\r\n\t\tpointer-events: none;\r\n\t}\r\n</style>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t/* 主色调 */\r\n\t$primary-color: #55ff7f; // 海绿色\r\n\t$secondary-color: #00aaff; // 中绿松石色\r\n\t$background-color: #F5FFFA; // 薄荷乳白色\r\n\r\n\t.container {\r\n\t\tbackground: $background-color;\r\n\t\tmin-height: 100vh;\r\n\t}\r\n\r\n\t.background-wave {\r\n\t\tposition: fixed;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\theight: 200rpx;\r\n\t\tbackground: linear-gradient(160deg, #55FFED 20%, $secondary-color 80%);\r\n\t\tborder-radius: 0 0 30% 30%;\r\n\t\tz-index: 0;\r\n\t}\r\n\r\n\t.product-selector {\r\n\t\tpadding: 30rpx;\r\n\t\tposition: relative;\r\n\t\tz-index: 1;\r\n\r\n\t\t:deep(.uni-forms-item__label) {\r\n\t\t\tfont-size: 32rpx;\r\n\t\t\tcolor: #333;\r\n\t\t}\r\n\t}\r\n\r\n\t.nature-select {\r\n\t\t:deep(.uni-select__input) {\r\n\t\t\tfont-size: 28rpx;\r\n\t\t\tcolor: #333;\r\n\t\t\tbackground: #fff;\r\n\t\t\tborder: 2rpx solid $primary-color !important;\r\n\t\t\tborder-radius: 10rpx;\r\n\t\t\tpadding: 20rpx;\r\n\t\t}\r\n\t}\r\n\r\n\t.timeline-container {\r\n\t\theight: 80vh;\r\n\t\tpadding: 0 30rpx;\r\n\t}\r\n\r\n\t.timeline-item {\r\n\t\tdisplay: flex;\r\n\t\tmargin-bottom: 40rpx;\r\n\r\n\t\t.timeline-marker {\r\n\t\t\twidth: 80rpx;\r\n\t\t\tposition: relative;\r\n\r\n\t\t\t.marker-icon {\r\n\t\t\t\twidth: 60rpx;\r\n\t\t\t\theight: 60rpx;\r\n\t\t\t\tbackground: $primary-color;\r\n\t\t\t\tborder-radius: 50%;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tjustify-content: center;\r\n\t\t\t\tbox-shadow: 0 4rpx 12rpx rgba(46, 139, 87, 0.3);\r\n\t\t\t}\r\n\r\n\t\t\t.timeline-connector {\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\tleft: 50%;\r\n\t\t\t\ttop: 60rpx;\r\n\t\t\t\tbottom: -40rpx;\r\n\t\t\t\twidth: 4rpx;\r\n\t\t\t\tbackground: #B0E0E6;\r\n\t\t\t\ttransform: translateX(-50%);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.nature-card {\r\n\t\tmax-width: 550rpx;\r\n\t\tposition: relative;\r\n\t\tflex: 1;\r\n\t\tbackground: #fff;\r\n\t\tborder-radius: 16rpx;\r\n\t\tpadding: 30rpx;\r\n\t\tmargin-left: 20rpx;\r\n\t\tbox-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.08);\r\n\r\n\t\t.card-header {\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: space-between;\r\n\t\t\talign-items: center;\r\n\t\t\tmargin-bottom: 20rpx;\r\n\r\n\t\t\t.day-title {\r\n\t\t\t\tfont-size: 32rpx;\r\n\t\t\t\tcolor: $primary-color;\r\n\t\t\t\tfont-weight: 500;\r\n\t\t\t}\r\n\r\n\t\t\t.date-label {\r\n\t\t\t\tfont-size: 26rpx;\r\n\t\t\t\tcolor: #666;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.content-image {\r\n\t\t\twidth: 100%;\r\n\t\t\theight: 300rpx;\r\n\t\t\tborder-radius: 12rpx;\r\n\t\t\tmargin-bottom: 20rpx;\r\n\t\t\tborder: 2rpx solid $secondary-color;\r\n\t\t}\r\n\r\n\t\t.content-text {\r\n\t\t\tfont-size: 28rpx;\r\n\t\t\tcolor: #666;\r\n\t\t\tline-height: 1.6;\r\n\t\t\tdisplay: -webkit-box;\r\n\t\t\t-webkit-box-orient: vertical;\r\n\t\t\t-webkit-line-clamp: 2;\r\n\t\t\toverflow: hidden;\r\n\r\n\t\t\t&:empty::before {\r\n\t\t\t\tcontent: '点击记录生长情况';\r\n\t\t\t\tcolor: #999;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.status-tag {\r\n\t\t\tposition: absolute;\r\n\t\t\tright: 30rpx;\r\n\t\t\ttop: 90rpx;\r\n\t\t\tbackground: rgba(72, 209, 204, 0.1);\r\n\t\t\tcolor: red;\r\n\t\t\tpadding: 8rpx 20rpx;\r\n\t\t\tborder-radius: 20rpx;\r\n\t\t\tfont-size: 24rpx;\r\n\r\n\t\t\t&.completed {\r\n\t\t\t\tbackground: rgba(46, 139, 87, 0.1);\r\n\t\t\t\tcolor: $primary-color;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.edit-panel {\r\n\t\tbackground: #fff;\r\n\t\tborder-radius: 40rpx 40rpx 0 0;\r\n\t\tpadding: 40rpx;\r\n\r\n\t\t.panel-title {\r\n\t\t\tfont-size: 36rpx;\r\n\t\t\tcolor: $primary-color;\r\n\t\t\tfont-weight: 500;\r\n\t\t\tmargin-bottom: 30rpx;\r\n\t\t\tdisplay: block;\r\n\t\t\ttext-align: center;\r\n\t\t}\r\n\r\n\t\t.action-button {\r\n\t\t\tmargin-bottom: 20rpx;\r\n\t\t\tbackground: $secondary-color;\r\n\t\t\tcolor: #fff;\r\n\t\t\tborder-radius: 50rpx;\r\n\t\t\tpadding: 10rpx;\r\n\t\t\tfont-size: 28rpx;\r\n\t\t\tdisplay: inline-flex;\r\n\t\t\talign-items: center;\r\n\r\n\t\t\tuni-icons {\r\n\t\t\t\tmargin-right: 15rpx;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.image-preview {\r\n\t\t\twidth: 100%;\r\n\t\t\theight: 400rpx;\r\n\t\t\tborder-radius: 20rpx;\r\n\t\t\tmargin: 30rpx 0;\r\n\t\t\tborder: 2rpx solid $primary-color;\r\n\t\t}\r\n\r\n\t\t.record-textarea {\r\n\t\t\twidth: 100%;\r\n\t\t\tmin-height: 200rpx;\r\n\t\t\tbackground: #f8f8f8;\r\n\t\t\tborder-radius: 20rpx;\r\n\t\t\tpadding: 20rpx;\r\n\t\t\tfont-size: 28rpx;\r\n\t\t\tcolor: #333;\r\n\t\t\tmargin-bottom: 30rpx;\r\n\t\t}\r\n\r\n\t\t.confirm-button {\r\n\t\t\tbackground: $primary-color;\r\n\t\t\tcolor: #fff;\r\n\t\t\tborder-radius: 50rpx;\r\n\t\t\tpadding: 10rpx;\r\n\t\t\tfont-size: 32rpx;\r\n\t\t}\r\n\t}\r\n\r\n\t.empty-state {\r\n\t\ttext-align: center;\r\n\t\tpadding-top: 200rpx;\r\n\r\n\t\t.empty-icon {\r\n\t\t\twidth: 200rpx;\r\n\t\t\theight: 200rpx;\r\n\t\t\topacity: 0.3;\r\n\t\t}\r\n\r\n\t\t.empty-text {\r\n\t\t\tdisplay: block;\r\n\t\t\tcolor: #999;\r\n\t\t\tfont-size: 28rpx;\r\n\t\t\tmargin-top: 30rpx;\r\n\t\t}\r\n\t}\r\n</style>","import MiniProgramPage from 'E:/小程序转app/xcbapp/pages/additionalinformation/additionalinformation.vue'\nwx.createPage(MiniProgramPage)"],"names":["myMixin","api","dayjs","uni"],"mappings":"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"}