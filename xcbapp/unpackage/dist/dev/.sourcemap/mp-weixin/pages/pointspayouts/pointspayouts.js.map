{"version":3,"file":"pointspayouts.js","sources":["pages/pointspayouts/pointspayouts.vue","D:/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcG9pbnRzcGF5b3V0cy9wb2ludHNwYXlvdXRzLnZ1ZQ"],"sourcesContent":["<template>\r\n\t<view class=\"me-container\">\r\n\t\t<!-- 输入区域 -->\r\n\t\t<view class=\"input-section\">\r\n\t\t\t<view class=\"input-box\">\r\n\t\t\t\t<input class=\"input-field\" type=\"number\" v-model.number=\"displayValue\"\r\n\t\t\t\t\t:placeholder=\"'可提现总积分为 ' + (pagedata.hasmoney.toFixed(1) || '0')\" inputmode=\"numeric\" />\r\n\t\t\t\t<text class=\"withdraw-all\" @click=\"handleWithdrawAll\">提现全部</text>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 转换金额显示 -->\r\n\t\t<view class=\"amount-display\">\r\n\t\t\t<text class=\"amount-label\">积分转换后的额度(元)</text>\r\n\t\t\t<view class=\"amount-value\">{{displayValueConvert}}</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 操作按钮 -->\r\n\t\t<view class=\"action-section\">\r\n\t\t\t<view class=\"submit-btn\" @click=\"submitSettlement\">申请结算</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 结算记录 -->\r\n\t\t<view class=\"record-section\" @click=\"gotoSettrecords\">\r\n\t\t\t<text class=\"record-text\">积分结算记录</text>\r\n\t\t\t<uni-icons type=\"arrowright\" size=\"16\" color=\"#666\" />\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<style lang=\"scss\">\r\n\t.me-container {\r\n\t\tpadding: 40rpx;\r\n\t\tmin-height: 100vh;\r\n\t\tbackground: #f8f8f8;\r\n\t}\r\n\r\n\t/* 输入区域 */\r\n\t.input-section {\r\n\t\tmargin-bottom: 40rpx;\r\n\r\n\t\t.input-box {\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t\tbackground: #fff;\r\n\t\t\tborder-radius: 12rpx;\r\n\t\t\tpadding: 0 28rpx;\r\n\t\t\theight: 96rpx;\r\n\t\t\tbox-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.04);\r\n\r\n\t\t\t.input-field {\r\n\t\t\t\tflex: 1;\r\n\t\t\t\tfont-size: 32rpx;\r\n\t\t\t\tcolor: #333;\r\n\t\t\t\theight: 100%;\r\n\r\n\t\t\t\t&::placeholder {\r\n\t\t\t\t\tcolor: #999;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t.withdraw-all {\r\n\t\t\t\tcolor: #2979FF;\r\n\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\tmargin-left: 20rpx;\r\n\t\t\t\tpadding: 8rpx 16rpx;\r\n\t\t\t\tborder-radius: 8rpx;\r\n\t\t\t\tbackground: rgba(41, 121, 255, 0.1);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/* 金额显示 */\r\n\t.amount-display {\r\n\t\tbackground: #fff;\r\n\t\tborder-radius: 12rpx;\r\n\t\tpadding: 32rpx;\r\n\t\tmargin-bottom: 40rpx;\r\n\t\tbox-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.04);\r\n\r\n\t\t.amount-label {\r\n\t\t\tfont-size: 28rpx;\r\n\t\t\tcolor: #666;\r\n\t\t\tmargin-bottom: 16rpx;\r\n\t\t\tdisplay: block;\r\n\t\t}\r\n\r\n\t\t.amount-value {\r\n\t\t\tfont-size: 48rpx;\r\n\t\t\tcolor: #ff6b6b;\r\n\t\t\tfont-weight: 600;\r\n\t\t}\r\n\t}\r\n\r\n\t/* 操作按钮 */\r\n\t.action-section {\r\n\t\tmargin-bottom: 40rpx;\r\n\r\n\t\t.submit-btn {\r\n\t\t\tbackground: linear-gradient(135deg, #2979FF, #00B8FF);\r\n\t\t\tcolor: #fff;\r\n\t\t\theight: 96rpx;\r\n\t\t\tborder-radius: 48rpx;\r\n\t\t\tfont-size: 32rpx;\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t\tjustify-content: center;\r\n\t\t\ttransition: opacity 0.2s;\r\n\r\n\t\t\t&:active {\r\n\t\t\t\topacity: 0.9;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/* 结算记录 */\r\n\t.record-section {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: space-between;\r\n\t\tbackground: #fff;\r\n\t\tpadding: 28rpx;\r\n\t\tborder-radius: 12rpx;\r\n\t\tbox-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.04);\r\n\r\n\t\t.record-text {\r\n\t\t\tfont-size: 28rpx;\r\n\t\t\tcolor: #333;\r\n\t\t}\r\n\t}\r\n</style>\r\n\r\n\r\n<script>\r\n\timport {\r\n\t\tapi\r\n\t} from '@/api/index'\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tpagedata: {\r\n\t\t\t\t\thasmoney: 0 // 给 truemoney 设置一个默认值\r\n\t\t\t\t},\r\n\t\t\t\tdisplayValue: '' // 需要提现的积分\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tthis.fetchData(); // 在页面加载时调用接口\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\tdisplayValueConvert: function() {\r\n\t\t\t\treturn (this.displayValue/10).toFixed(1) || 0\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t// 提取全部\r\n\t\t\thandleWithdrawAll() {\r\n\t\t\t\tthis.displayValue = this.pagedata.hasmoney.toFixed(1)\r\n\t\t\t},\r\n\t\t\tasync fetchData() {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst response = await api.mysorce(); // 请求接口\r\n\t\t\t\t\tthis.pagedata = response.data; // 将接口返回的数据保存到 pagedata 中\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.error(\"获取积分数据失败：\", error); // 错误处理\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync submitSettlement() {\r\n\t\t\t\tif (!this.displayValue || isNaN(this.displayValue) || Number(this.displayValue) <= 0) {\r\n\t\t\t\t\t// 检查输入值是否有效\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '请输入有效的积分数',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst shopscore = Number(this.displayValue);\r\n\r\n\t\t\t\t// 检查积分是否大于100\r\n\t\t\t\tif (shopscore < 100) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '积分必须大于100',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst response = await api.settlement({\r\n\t\t\t\t\t\tshopscore\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (response.code === 200) {\r\n\t\t\t\t\t\t// 积分结算成功\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '积分结算申请成功',\r\n\t\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// 处理返回的错误信息\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: response.message || '积分结算失败',\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.error(\"提交请求失败\", error); // 错误处理\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '提交请求失败，请稍后重试',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgotoSettrecords() {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '/pages/Settrecords/Settrecords'\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t}\r\n\t}\r\n</script>","import MiniProgramPage from 'E:/小程序转app/xcbapp/pages/pointspayouts/pointspayouts.vue'\nwx.createPage(MiniProgramPage)"],"names":["api","uni"],"mappings":";;;AAyIC,MAAK,YAAU;AAAA,EACd,OAAO;AACN,WAAO;AAAA,MACN,UAAU;AAAA,QACT,UAAU;AAAA;AAAA,MACV;AAAA,MACD,cAAc;AAAA;AAAA,IACf;AAAA,EACA;AAAA,EACD,UAAU;AACT,SAAK,UAAS;AAAA,EACd;AAAA,EACD,UAAU;AAAA,IACT,qBAAqB,WAAW;AAC/B,cAAQ,KAAK,eAAa,IAAI,QAAQ,CAAC,KAAK;AAAA,IAC7C;AAAA,EACA;AAAA,EACD,SAAS;AAAA;AAAA,IAER,oBAAoB;AACnB,WAAK,eAAe,KAAK,SAAS,SAAS,QAAQ,CAAC;AAAA,IACpD;AAAA,IACD,MAAM,YAAY;AACjB,UAAI;AACH,cAAM,WAAW,MAAMA,cAAI;AAC3B,aAAK,WAAW,SAAS;AAAA,MACxB,SAAO,OAAO;AACfC,2FAAc,aAAa,KAAK;AAAA,MACjC;AAAA,IACA;AAAA,IACD,MAAM,mBAAmB;AACxB,UAAI,CAAC,KAAK,gBAAgB,MAAM,KAAK,YAAY,KAAK,OAAO,KAAK,YAAY,KAAK,GAAG;AAErFA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QACP,CAAC;AACD;AAAA,MACD;AACA,YAAM,YAAY,OAAO,KAAK,YAAY;AAG1C,UAAI,YAAY,KAAK;AACpBA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QACP,CAAC;AACD;AAAA,MACD;AACA,UAAI;AACH,cAAM,WAAW,MAAMD,UAAG,IAAC,WAAW;AAAA,UACrC;AAAA,QACD,CAAC;AACD,YAAI,SAAS,SAAS,KAAK;AAE1BC,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO;AAAA,YACP,MAAM;AAAA,UACP,CAAC;AAAA,eACK;AAENA,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO,SAAS,WAAW;AAAA,YAC3B,MAAM;AAAA,UACP,CAAC;AAAA,QACF;AAAA,MACC,SAAO,OAAO;AACfA,sBAAc,MAAA,MAAA,SAAA,gDAAA,UAAU,KAAK;AAC7BA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QACP,CAAC;AAAA,MACF;AAAA,IACA;AAAA,IACD,kBAAkB;AACjBA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK;AAAA,MACN,CAAC;AAAA,IACD;AAAA,EACF;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxND,GAAG,WAAW,eAAe;"}