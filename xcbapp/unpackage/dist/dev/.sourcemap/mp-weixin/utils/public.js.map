{"version":3,"file":"public.js","sources":["utils/public.js"],"sourcesContent":["import {\r\n\tapi\r\n} from '@/api/index.js'\r\nexport const myMixin = {\r\n\tmethods: {\r\n\t\t/**\r\n\t\t * 检查账号代理商申请状态\r\n\t\t */\r\n\t\tasync checkApplyStatus() {\r\n\t\t\tlet data = await api.getqrcode()\r\n\t\t\tlet res = await api.viewAgentInfo({\r\n\t\t\t\tuserid: data.data.userid\r\n\t\t\t})\r\n\t\t\tif (res.code == 200) {\r\n\t\t\t\treturn res.data.listdata[0].status\r\n\t\t\t}else{\r\n\t\t\t\treturn 0\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 手机号隐藏处理\r\n\t\thidePhone(val) {\r\n\t\t\treturn val.replace(/(\\d{3})\\d{4}(\\d{4})/, '$1****$2')\r\n\t\t},\r\n\t\t// 获取今天日期\r\n\t\tgetNowDate() {\r\n\t\t\treturn this.initDate(Date.now())\r\n\t\t},\r\n\t\t// 计算时间间隔\r\n\t\tgetChineseTimeDiff(t1, t2) {\r\n\t\t\tconst diff = Math.abs(t1 - t2);\r\n\t\t\tconst units = [{\r\n\t\t\t\t\tvalue: 86400000,\r\n\t\t\t\t\tname: '天'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tvalue: 3600000,\r\n\t\t\t\t\tname: '小时'\r\n\t\t\t\t},\r\n\t\t\t];\r\n\r\n\t\t\tlet remaining = diff;\r\n\t\t\tconst result = units.map(unit => {\r\n\t\t\t\tconst val = Math.floor(remaining / unit.value);\r\n\t\t\t\tremaining %= unit.value;\r\n\t\t\t\treturn {\r\n\t\t\t\t\tval,\r\n\t\t\t\t\tname: unit.name\r\n\t\t\t\t};\r\n\t\t\t});\r\n\t\t\tconst output = result\r\n\t\t\t\t.filter(item => item.val > 0)\r\n\t\t\t\t.map(item => `${item.val}${item.name}`)\r\n\t\t\t\t.join('');\r\n\r\n\t\t\treturn output || '0秒';\r\n\t\t},\r\n\t\t/**\r\n\t\t * 返回上一页\r\n\t\t */\r\n\t\tasync customizeBack() {\r\n\t\t\tlet canNavBack = await getCurrentPages()\r\n\t\t\tif (canNavBack && canNavBack.length > 1) {\r\n\t\t\t\tuni.navigateBack()\r\n\t\t\t} else {\r\n\t\t\t\thistory.back();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t *\r\n\t\t * 时间格式化\r\n\t\t * {parmars} str   utc时间\r\n\t\t * {returns} timeStr   格式化后的时间\r\n\t\t */\r\n\t\tinitTime(str) {\r\n\t\t\tlet timestamp = new Date(str).getTime()\r\n\t\t\tvar time = String(timestamp).length === 10 ? new Date(parseInt(timestamp) * 1000) : new Date(parseInt(\r\n\t\t\t\ttimestamp))\r\n\t\t\tvar y = time.getFullYear() // 年\r\n\t\t\tvar m = time.getMonth() + 1 // 月\r\n\t\t\tif (m < 10) {\r\n\t\t\t\tm = '0' + m\r\n\t\t\t}\r\n\t\t\tvar d = time.getDate() // 日\r\n\t\t\tif (d < 10) {\r\n\t\t\t\td = '0' + d\r\n\t\t\t}\r\n\t\t\tvar h = time.getHours() // 时\r\n\t\t\tif (h < 10) {\r\n\t\t\t\th = '0' + h\r\n\t\t\t}\r\n\t\t\tvar mm = time.getMinutes() // 分\r\n\t\t\tif (mm < 10) {\r\n\t\t\t\tmm = '0' + mm\r\n\t\t\t}\r\n\t\t\tvar s = time.getSeconds() // 秒\r\n\t\t\tif (s < 10) {\r\n\t\t\t\ts = '0' + s\r\n\t\t\t}\r\n\t\t\tvar timeStr = y + '-' + m + '-' + d + ' ' + h + ':' + mm + ':' + s\r\n\t\t\treturn timeStr\r\n\t\t},\r\n\t\t// 年月日\r\n\t\tinitDate(str) {\r\n\t\t\tlet timestamp = new Date(str).getTime()\r\n\t\t\tvar time = String(timestamp).length === 10 ? new Date(parseInt(timestamp) * 1000) : new Date(parseInt(\r\n\t\t\t\ttimestamp))\r\n\t\t\tvar y = time.getFullYear() // 年\r\n\t\t\tvar m = time.getMonth() + 1 // 月\r\n\t\t\tif (m < 10) {\r\n\t\t\t\tm = '0' + m\r\n\t\t\t}\r\n\t\t\tvar d = time.getDate() // 日\r\n\t\t\tif (d < 10) {\r\n\t\t\t\td = '0' + d\r\n\t\t\t}\r\n\t\t\tvar h = time.getHours() // 时\r\n\t\t\tif (h < 10) {\r\n\t\t\t\th = '0' + h\r\n\t\t\t}\r\n\t\t\tvar mm = time.getMinutes() // 分\r\n\t\t\tif (mm < 10) {\r\n\t\t\t\tmm = '0' + mm\r\n\t\t\t}\r\n\t\t\tvar s = time.getSeconds() // 秒\r\n\t\t\tif (s < 10) {\r\n\t\t\t\ts = '0' + s\r\n\t\t\t}\r\n\t\t\tvar timeStr = y + '-' + m + '-' + d\r\n\t\t\treturn timeStr\r\n\t\t}\r\n\t}\r\n};"],"names":["api","uni"],"mappings":"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"}