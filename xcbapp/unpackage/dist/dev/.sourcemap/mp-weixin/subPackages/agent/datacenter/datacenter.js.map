{"version":3,"file":"datacenter.js","sources":["subPackages/agent/datacenter/datacenter.vue","D:/HBuilderX/plugins/uniapp-cli-vite/uniPage:/c3ViUGFja2FnZXNcYWdlbnRcZGF0YWNlbnRlclxkYXRhY2VudGVyLnZ1ZQ"],"sourcesContent":["<template>\n  <view class=\"agent-data-page\">\n    <!-- 页面标题区域 -->\n    <view class=\"page-header\">\n      <view class=\"header-title\">代理商数据中心</view>\n      <view class=\"header-subtitle\">实时查看您的业务数据概况</view>\n    </view>\n\n    <!-- 数据容器 -->\n    <view class=\"data-container\">\n      <!-- 核心数据卡片 -->\n      <view class=\"data-card\">\n        <view class=\"section-header\">\n          <view class=\"section-icon\">\n            <uni-icons type=\"chart\" size=\"20\" color=\"#4285F4\" />\n          </view>\n          <view class=\"section-name\">核心业务数据</view>\n        </view>\n\n        <view class=\"data-grid\">\n          <view class=\"data-item\">\n            <view class=\"data-label\">累计销售额</view>\n            <view class=\"data-value\">¥{{ coreData.totalSales.toLocaleString() }}</view>\n            <view class=\"data-desc\">本月：¥{{ coreData.monthSales.toLocaleString() }}</view>\n          </view>\n          <view class=\"data-item\">\n            <view class=\"data-label\">累计订单数</view>\n            <view class=\"data-value\">{{ coreData.totalOrders.toLocaleString() }}</view>\n            <view class=\"data-desc\">本月：{{ coreData.monthOrders.toLocaleString() }}</view>\n          </view>\n          <view class=\"data-item\">\n            <view class=\"data-label\">服务客户数</view>\n            <view class=\"data-value\">{{ coreData.totalCustomers.toLocaleString() }}</view>\n            <view class=\"data-desc\">新增：{{ coreData.newCustomers.toLocaleString() }}</view>\n          </view>\n          <view class=\"data-item\">\n            <view class=\"data-label\">累计收益</view>\n            <view class=\"data-value\">¥{{ coreData.totalProfit.toLocaleString() }}</view>\n            <view class=\"data-desc\">本月：¥{{ coreData.monthProfit.toLocaleString() }}</view>\n          </view>\n        </view>\n      </view>\n\n      <!-- 业绩达成卡片 -->\n      <view class=\"data-card\">\n<!--        <view class=\"section-header\">\n          <view class=\"section-icon\">\n            <uni-icons type=\"star\" size=\"20\" color=\"#FBBC05\" />\n          </view>\n          <view class=\"section-name\">本月业绩目标</view>\n        </view> -->\n\n        <view class=\"target-progress\">\n          <view class=\"target-info\">\n            <view class=\"target-label\">业绩达成率</view>\n            <view class=\"target-value\">{{ coreData.targetRate }}%</view>\n          </view>\n          <view class=\"progress-bar\">\n            <view class=\"progress-fill\" :style=\"{ width: coreData.targetRate + '%' }\"></view>\n          </view>\n          <view class=\"target-detail\">\n            <view class=\"detail-item\">目标：¥{{ coreData.targetAmount.toLocaleString() }}</view>\n            <view class=\"detail-item\">已完成：¥{{ coreData.completedAmount.toLocaleString() }}</view>\n          </view>\n        </view>\n      </view>\n\n      <!-- 近期订单卡片 -->\n      <view class=\"data-card\">\n        <view class=\"section-header\">\n          <view class=\"section-icon\">\n            <uni-icons type=\"orders-o\" size=\"20\" color=\"#34A853\" />\n          </view>\n          <view class=\"section-name\">近期订单明细</view>\n        </view>\n\n        <view class=\"order-list\">\n          <view class=\"order-item\" v-for=\"order in recentOrders\" :key=\"order.id\">\n            <view class=\"order-left\">\n              <view class=\"order-no\">订单号：{{ order.orderNo }}</view>\n              <view class=\"order-date\">{{ formatDate(order.createTime) }}</view>\n            </view>\n            <view class=\"order-right\">\n              <view class=\"order-amount\">¥{{ order.amount.toFixed(2) }}</view>\n              <view class=\"order-status\" :class=\"'status-' + order.status\">\n                {{ getStatusText(order.status) }}\n              </view>\n            </view>\n          </view>\n          <view class=\"view-all\" @click=\"viewAllOrders\">查看全部订单 →</view>\n        </view>\n      </view>\n\n      <!-- 数据统计卡片 -->\n      <view class=\"data-card\">\n        <view class=\"section-header\">\n          <view class=\"section-icon\">\n            <uni-icons type=\"calendar\" size=\"20\" color=\"#EA4335\" />\n          </view>\n          <view class=\"section-name\">数据统计趋势</view>\n        </view>\n\n        <view class=\"trend-filter\">\n          <picker mode=\"selector\" :range=\"trendRange\" :value=\"selectedTrendRange\" @change=\"changeTrendRange\">\n            <view class=\"filter-text\">{{ trendRange[selectedTrendRange] }}</view>\n            <uni-icons type=\"down\" size=\"14\" class=\"filter-icon\" />\n          </picker>\n        </view>\n\n        <view class=\"trend-chart\">\n        </view>\n      </view>\n    </view>\n</view>\r\n  </template>\n\n<script>\nimport { api } from '@/api/index.js'\r\n\n// import { formatDate } from '@/utils/date.js'\n\nexport default {\r\n\n  data() {\n    return {\n      // 核心数据\n      coreData: {\n        totalSales: 0,\n        monthSales: 0,\n        totalOrders: 0,\n        monthOrders: 0,\n        totalCustomers: 0,\n        newCustomers: 0,\n        totalProfit: 0,\n        monthProfit: 0,\n        targetRate: 0,\n        targetAmount: 0,\n        completedAmount: 0\n      },\n      // 近期订单\n      recentOrders: [],\n      // 趋势筛选\n      trendRange: ['近7天', '近30天', '近90天'],\n      selectedTrendRange: 1,\n      // 图表数据\n      trendData: {},\n      // 图表配置\n      chartOpts: {\n        color: ['#4285F4'],\n        padding: [15, 15, 0, 15],\n        legend: { show: false },\n        xAxis: {\n          type: 'grid',\n          gridType: 'dash',\n          dashLength: 2,\n          axisLine: false,\n          labelCount: 5,\n          fontSize: 11,\n          color: '#999'\n        },\n        yAxis: {\n          gridType: 'dash',\n          dashLength: 2,\n          axisLine: false,\n          labelCount: 4,\n          fontSize: 11,\n          color: '#999'\n        },\n        extra: {\n          line: { width: 2, type: 'curve' }\n        }\n      }\n    }\n  },\n\n  onLoad() {\n    this.loadData()\n  },\n\n  methods: {\n    // 加载数据\n    async loadData() {\n      try {\n        uni.showLoading({ title: '加载中...', mask: true })\n        \n        // 并行请求数据\n        const [coreRes, orderRes, trendRes] = await Promise.all([\n          api.getAgentCoreData(),\n          api.getRecentOrders({ limit: 5 }),\n          api.getSalesTrend({ range: this.trendRange[this.selectedTrendRange] })\n        ])\n\n        // 处理核心数据\n        if (coreRes.code === 200) {\n          this.coreData = coreRes.data\n        }\n\n        // 处理订单数据\n        if (orderRes.code === 200) {\n          this.recentOrders = orderRes.data\n        }\n\n        // 处理趋势数据\n        if (trendRes.code === 200) {\n          this.trendData = trendRes.data\n        }\n      } catch (error) {\n        console.error('数据加载失败:', error)\n        uni.showToast({ title: '数据加载失败', icon: 'none', duration: 2000 })\n      } finally {\n        uni.hideLoading()\n      }\n    },\n\n    // 切换趋势时间范围\n    changeTrendRange(e) {\n      this.selectedTrendRange = e.detail.value\n      this.loadData()\n    },\n\n    // 格式化日期\n    formatDate(dateStr) {\n      return formatDate(dateStr, 'YYYY-MM-DD HH:mm')\n    },\n\n    // 订单状态文本\n    getStatusText(status) {\n      const statusMap = {\n        'PENDING': '待支付',\n        'PAID': '已支付',\n        'SHIPPED': '已发货',\n        'COMPLETED': '已完成',\n        'CANCELLED': '已取消'\n      }\n      return statusMap[status] || status\n    },\n\n    // 查看全部订单\n    viewAllOrders() {\n      uni.navigateTo({ url: '/pages/agent/all-orders' })\n    }\n  }\n}\n</script>\n\n<style scoped>\n/* 页面基础样式 */\n.agent-data-page {\n  background-color: #f8f9fa;\n  min-height: 100vh;\n  font-size: 14px;\n  padding-bottom: 30px;\n}\n\n/* 页面标题 */\n.page-header {\n  text-align: center;\n  padding: 30px 20px 20px;\n}\n\n.header-title {\n  font-size: 22px;\n  font-weight: 600;\n  color: #2d3748;\n  margin-bottom: 8px;\n}\n\n.header-subtitle {\n  font-size: 13px;\n  color: #718096;\n}\n\n/* 数据容器 */\n.data-container {\n  width: 92%;\n  margin: 0 auto;\n}\n\n/* 数据卡片样式（复用申请表卡片风格） */\n.data-card {\n  background-color: #fff;\n  border-radius: 12px;\n  padding: 20px 18px;\n  margin-bottom: 16px;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.03);\n}\n\n/* section头部（复用申请表风格） */\n.section-header {\n  display: flex;\n  align-items: center;\n  margin-bottom: 18px;\n}\n\n.section-icon {\n  width: 28px;\n  height: 28px;\n  border-radius: 8px;\n  background-color: rgba(66, 133, 244, 0.1);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-right: 10px;\n}\n\n.data-card:nth-child(2) .section-icon {\n  background-color: rgba(251, 188, 5, 0.1);\n}\n\n.data-card:nth-child(3) .section-icon {\n  background-color: rgba(52, 168, 83, 0.1);\n}\n\n.data-card:nth-child(4) .section-icon {\n  background-color: rgba(234, 67, 53, 0.1);\n}\n\n.section-name {\n  font-size: 16px;\n  font-weight: 500;\n  color: #2d3748;\n}\n\n/* 核心数据网格 */\n.data-grid {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 16px;\n}\n\n.data-item {\n  background-color: #f9fafb;\n  border-radius: 8px;\n  padding: 14px;\n}\n\n.data-label {\n  font-size: 13px;\n  color: #718096;\n  margin-bottom: 6px;\n}\n\n.data-value {\n  font-size: 20px;\n  font-weight: 600;\n  color: #2d3748;\n  margin-bottom: 4px;\n}\n\n.data-desc {\n  font-size: 12px;\n  color: #999;\n}\n\n/* 业绩目标进度 */\n.target-progress {\n  padding: 8px 0;\n}\n\n.target-info {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 12px;\n}\n\n.target-label {\n  font-size: 14px;\n  color: #718096;\n}\n\n.target-value {\n  font-size: 24px;\n  font-weight: 600;\n  color: #4285F4;\n}\n\n.progress-bar {\n  height: 8px;\n  background-color: #f0f0f0;\n  border-radius: 4px;\n  overflow: hidden;\n  margin-bottom: 12px;\n}\n\n.progress-fill {\n  height: 100%;\n  background-color: #4285F4;\n  border-radius: 4px;\n  transition: width 0.5s ease;\n}\n\n.target-detail {\n  display: flex;\n  justify-content: space-between;\n  font-size: 12px;\n  color: #999;\n}\n\n/* 订单列表 */\n.order-list {\n  margin-top: 8px;\n}\n\n.order-item {\n  display: flex;\n  justify-content: space-between;\n  padding: 14px 0;\n  border-bottom: 1px solid #f5f5f5;\n}\n\n.order-item:last-child {\n  border-bottom: none;\n}\n\n.order-no {\n  font-size: 14px;\n  color: #2d3748;\n  font-weight: 500;\n  margin-bottom: 4px;\n}\n\n.order-date {\n  font-size: 12px;\n  color: #999;\n}\n\n.order-amount {\n  font-size: 16px;\n  font-weight: 600;\n  color: #2d3748;\n  text-align: right;\n  margin-bottom: 4px;\n}\n\n.order-status {\n  font-size: 12px;\n  padding: 2px 8px;\n  border-radius: 12px;\n  display: inline-block;\n  float: right;\n}\n\n.status-pending {\n  background-color: rgba(251, 188, 5, 0.1);\n  color: #FBBC05;\n}\n\n.status-paid {\n  background-color: rgba(52, 168, 83, 0.1);\n  color: #34A853;\n}\n\n.status-shipped {\n  background-color: rgba(66, 133, 244, 0.1);\n  color: #4285F4;\n}\n\n.status-completed {\n  background-color: rgba(103, 80, 229, 0.1);\n  color: #6750E3;\n}\n\n.status-cancelled {\n  background-color: rgba(234, 67, 53, 0.1);\n  color: #EA4335;\n}\n\n.view-all {\n  text-align: center;\n  font-size: 13px;\n  color: #4285F4;\n  margin-top: 16px;\n  cursor: pointer;\n}\n\n/* 趋势筛选 */\n.trend-filter {\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n  margin-bottom: 16px;\n  color: #4285F4;\n  font-size: 13px;\n}\n\n.filter-text {\n  margin-right: 6px;\n}\n\n/* 趋势图表 */\n.trend-chart {\n  height: 220px;\n  width: 100%;\n}\n\n/* 响应式调整 */\n@media (min-width: 768px) {\n  .data-container {\n    width: 60%;\n    max-width: 500px;\n  }\n}\n</style>","import MiniProgramPage from 'E:/小程序转app/xcbapp/subPackages/agent/datacenter/datacenter.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","api"],"mappings":";;;AAyHA,MAAK,YAAU;AAAA,EAEb,OAAO;AACL,WAAO;AAAA;AAAA,MAEL,UAAU;AAAA,QACR,YAAY;AAAA,QACZ,YAAY;AAAA,QACZ,aAAa;AAAA,QACb,aAAa;AAAA,QACb,gBAAgB;AAAA,QAChB,cAAc;AAAA,QACd,aAAa;AAAA,QACb,aAAa;AAAA,QACb,YAAY;AAAA,QACZ,cAAc;AAAA,QACd,iBAAiB;AAAA,MAClB;AAAA;AAAA,MAED,cAAc,CAAE;AAAA;AAAA,MAEhB,YAAY,CAAC,OAAO,QAAQ,MAAM;AAAA,MAClC,oBAAoB;AAAA;AAAA,MAEpB,WAAW,CAAE;AAAA;AAAA,MAEb,WAAW;AAAA,QACT,OAAO,CAAC,SAAS;AAAA,QACjB,SAAS,CAAC,IAAI,IAAI,GAAG,EAAE;AAAA,QACvB,QAAQ,EAAE,MAAM,MAAO;AAAA,QACvB,OAAO;AAAA,UACL,MAAM;AAAA,UACN,UAAU;AAAA,UACV,YAAY;AAAA,UACZ,UAAU;AAAA,UACV,YAAY;AAAA,UACZ,UAAU;AAAA,UACV,OAAO;AAAA,QACR;AAAA,QACD,OAAO;AAAA,UACL,UAAU;AAAA,UACV,YAAY;AAAA,UACZ,UAAU;AAAA,UACV,YAAY;AAAA,UACZ,UAAU;AAAA,UACV,OAAO;AAAA,QACR;AAAA,QACD,OAAO;AAAA,UACL,MAAM,EAAE,OAAO,GAAG,MAAM,QAAQ;AAAA,QAClC;AAAA,MACF;AAAA,IACF;AAAA,EACD;AAAA,EAED,SAAS;AACP,SAAK,SAAS;AAAA,EACf;AAAA,EAED,SAAS;AAAA;AAAA,IAEP,MAAM,WAAW;AACf,UAAI;AACFA,sBAAG,MAAC,YAAY,EAAE,OAAO,UAAU,MAAM,MAAM;AAG/C,cAAM,CAAC,SAAS,UAAU,QAAQ,IAAI,MAAM,QAAQ,IAAI;AAAA,UACtDC,UAAAA,IAAI,iBAAkB;AAAA,UACtBA,UAAAA,IAAI,gBAAgB,EAAE,OAAO,EAAE,CAAC;AAAA,UAChCA,cAAI,cAAc,EAAE,OAAO,KAAK,WAAW,KAAK,kBAAkB,GAAG;AAAA,SACtE;AAGD,YAAI,QAAQ,SAAS,KAAK;AACxB,eAAK,WAAW,QAAQ;AAAA,QAC1B;AAGA,YAAI,SAAS,SAAS,KAAK;AACzB,eAAK,eAAe,SAAS;AAAA,QAC/B;AAGA,YAAI,SAAS,SAAS,KAAK;AACzB,eAAK,YAAY,SAAS;AAAA,QAC5B;AAAA,MACA,SAAO,OAAO;AACdD,sBAAAA,MAAA,MAAA,SAAA,sDAAc,WAAW,KAAK;AAC9BA,4BAAI,UAAU,EAAE,OAAO,UAAU,MAAM,QAAQ,UAAU,KAAM;AAAA,MACjE,UAAU;AACRA,sBAAAA,MAAI,YAAY;AAAA,MAClB;AAAA,IACD;AAAA;AAAA,IAGD,iBAAiB,GAAG;AAClB,WAAK,qBAAqB,EAAE,OAAO;AACnC,WAAK,SAAS;AAAA,IACf;AAAA;AAAA,IAGD,WAAW,SAAS;AAClB,aAAO,WAAW,SAAS,kBAAkB;AAAA,IAC9C;AAAA;AAAA,IAGD,cAAc,QAAQ;AACpB,YAAM,YAAY;AAAA,QAChB,WAAW;AAAA,QACX,QAAQ;AAAA,QACR,WAAW;AAAA,QACX,aAAa;AAAA,QACb,aAAa;AAAA,MACf;AACA,aAAO,UAAU,MAAM,KAAK;AAAA,IAC7B;AAAA;AAAA,IAGD,gBAAgB;AACdA,oBAAAA,MAAI,WAAW,EAAE,KAAK,2BAA2B;AAAA,IACnD;AAAA,EACF;AACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjPA,GAAG,WAAW,eAAe;"}