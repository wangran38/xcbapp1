{"version":3,"file":"prePurchaseDeposit.js","sources":["subPackages/shoppingPageList/prePurchaseDeposit/prePurchaseDeposit.vue","D:/HBuilderX/plugins/uniapp-cli-vite/uniPage:/c3ViUGFja2FnZXNcc2hvcHBpbmdQYWdlTGlzdFxwcmVQdXJjaGFzZURlcG9zaXRccHJlUHVyY2hhc2VEZXBvc2l0LnZ1ZQ"],"sourcesContent":["<template>\r\n\t<view class=\"container\">\r\n\t\t<!-- 1. 商品轮播图 -->\r\n\t\t<view class=\"carousel-container\">\r\n\t\t\t<swiper class=\"product-swiper\" indicator-dots autoplay interval=\"3000\" duration=\"500\" circular\r\n\t\t\t\t@change=\"onSwiperChange\">\r\n\t\t\t\t<swiper-item v-for=\"(img, index) in productImages\" :key=\"index\">\r\n\t\t\t\t\t<image :src=\"img\" mode=\"aspectFill\" class=\"carousel-image\"></image>\r\n\t\t\t\t</swiper-item>\r\n\t\t\t</swiper>\r\n\t\t\t<!-- 轮播图页码 -->\r\n\t\t\t<view class=\"carousel-counter\">\r\n\t\t\t\t{{ currentSwiperIndex + 1 }}/{{ productImages.length }}\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 2. 商品基础信息 -->\r\n\t\t<view class=\"product-base-info\">\r\n\t\t\t<text class=\"product-name\">{{ product.goodsname || '未命名商品' }}</text>\r\n\r\n\r\n\r\n\t\t\t<!-- 价格与销量 -->\r\n\t\t\t<view class=\"price-section\">\r\n\t\t\t\t<text class=\"current-price\">¥{{ product.price || 0 }}</text>\r\n\t\t\t\t<text class=\"original-price\" v-if=\"product.originalPrice\">¥{{ product.originalPrice }}</text>\r\n\t\t\t\t<text class=\"product-unit\">{{ product.unit }}</text>\r\n\t\t\t\t<view class=\"sales-volume\">已售 {{ product.sales || 0 }} 件</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 3. 商品溯源卡片 -->\r\n\t\t<view class=\"traceability-card\" @click=\"showTraceability = true\">\r\n\t\t\t<view class=\"traceability-header\">\r\n\t\t\t\t<text class=\"trace-title\">基础信息</text>\r\n\t\t\t\t<uni-icons type=\"right\" size=\"16\" color=\"#999\"></uni-icons>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"trace-content\">\r\n\t\t\t\t<view class=\"detail-text\">\r\n\t\t\t\t\t{{product.content || '暂无信息'}}\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 4. 商品详情折叠面板 -->\r\n\t\t<view class=\"detail-panel\">\r\n\t\t\t<view class=\"panel-header\" @click=\"toggleDetail\">\r\n\t\t\t\t<text class=\"panel-title\">溯源信息</text>\r\n\t\t\t\t<uni-icons type=\"down\" size=\"18\" color=\"#999\" :class=\"{ 'rotate': showDetail }\"></uni-icons>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"panel-content\" v-if=\"showDetail\">\r\n\t\t\t\t<view class=\"detail-text\">\r\n\t\t\t\t\t{{product.fromcontent || '暂无信息'}}\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 5. 购买区域 -->\r\n\t\t<view class=\"purchase-card\">\r\n\t\t\t<!-- 购买数量 -->\r\n\t\t\t<view class=\"form-group quantity-group\">\r\n\t\t\t\t<text class=\"form-label\">购买数量</text>\r\n\t\t\t\t<view class=\"quantity-selector\">\r\n\t\t\t\t\t<button class=\"quantity-btn minus\" :class=\"{'disabled': fromData.goods_num <= 1}\"\r\n\t\t\t\t\t\t@click=\"minusGoods_num\">\r\n\t\t\t\t\t\t<uni-icons type=\"minus\" size=\"20\"></uni-icons>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<input class=\"quantity-input\" type=\"digit\" v-model=\"fromData.goods_num\" @input=\"onKeyInput\"\r\n\t\t\t\t\t\tplaceholder=\"请输入数量\" />\r\n\t\t\t\t\t<button class=\"quantity-btn plus\" @click=\"addGoods_num\">\r\n\t\t\t\t\t\t<uni-icons type=\"plus\" size=\"20\"></uni-icons>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<!-- 提货点选择 -->\r\n\t\t\t<!-- \t\t\t<view class=\"form-group pickup-group\">\r\n\t\t\t\t<text class=\"form-label\">提货点</text>\r\n\t\t\t\t<view class=\"pickup-list\">\r\n\t\t\t\t\t<view \r\n\t\t\t\t\t\tv-for=\"(point, index) in deliveryPoints\" \r\n\t\t\t\t\t\t:key=\"index\" \r\n\t\t\t\t\t\tclass=\"pickup-item\"\r\n\t\t\t\t\t\t:class=\"{'selected': selectedPoint === point.id}\" \r\n\t\t\t\t\t\t@click=\"selectPoint(point.id)\">\r\n\t\t\t\t\t\t<view class=\"point-info\">\r\n\t\t\t\t\t\t\t<text class=\"point-name\">{{ point.name }}</text>\r\n\t\t\t\t\t\t\t<text class=\"point-address\">{{ point.address }}</text>\r\n\t\t\t\t\t\t\t<text class=\"point-time\">{{ point.pickupTime }}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"pickup-check\" v-if=\"selectedPoint === point.id\">\r\n\t\t\t\t\t\t\t<uni-icons type=\"check\" size=\"24\" color=\"#1890FF\"></uni-icons>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view v-if=\"!deliveryPoints.length\" class=\"no-point\">\r\n\t\t\t\t\t\t<uni-icons type=\"empty\" size=\"40\" color=\"#ccc\"></uni-icons>\r\n\t\t\t\t\t\t<text>暂无可用提货点</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t -->\r\n\r\n\r\n\t\t</view>\r\n\r\n\t\t<!-- 6. 预售规则 -->\r\n\t\t<view class=\"rules-card\">\r\n\t\t\t<text class=\"section-title\">预售规则</text>\r\n\t\t\t<view class=\"rules-list\">\r\n\t\t\t\t<view v-for=\"(rule, index) in shortRules\" :key=\"index\" class=\"rule-item\">\r\n\t\t\t\t\t<uni-icons type=\"circle\" size=\"12\" color=\"#1890FF\" class=\"rule-icon\"></uni-icons>\r\n\t\t\t\t\t<text class=\"rule-text\">{{ rule }}</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"view-more\" @click=\"showFullRules = true\">\r\n\t\t\t\t\t<text>查看全部规则</text>\r\n\t\t\t\t\t<uni-icons type=\"right\" size=\"14\" color=\"#1890FF\"></uni-icons>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 7. 底部操作栏 -->\r\n\t\t<view class=\"footer\">\r\n\t\t\t<view class=\"total-info\">\r\n\t\t\t\t<text class=\"total-label\">总计：</text>\r\n\t\t\t\t<text class=\"total-amount\">¥{{ totalAmount.toFixed(2) }}</text>\r\n\t\t\t</view>\r\n\t\t\t<button class=\"submit-btn\" @click=\"handleSubmit\" :disabled=\"!selectedPoint\">\r\n\t\t\t\t立即预订\r\n\t\t\t</button>\r\n\t\t</view>\r\n\r\n\t\t<!-- 8. 溯源弹窗 -->\r\n\t\t<uni-popup v-model=\"showTraceability\" mode=\"bottom\" class=\"trace-popup\">\r\n\t\t\t<view class=\"popup-header\">\r\n\t\t\t\t<text class=\"popup-title\">商品全程溯源</text>\r\n\t\t\t\t<uni-icons type=\"close\" size=\"22\" color=\"#999\" @click=\"showTraceability = false\"></uni-icons>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"trace-detail\">\r\n\t\t\t\t<!-- 溯源二维码 -->\r\n\t\t\t\t<view class=\"trace-qrcode\">\r\n\t\t\t\t\t<image src=\"/static/images/trace-qrcode.png\" mode=\"widthFix\"></image>\r\n\t\t\t\t\t<text>扫码查看完整溯源信息</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<!-- 生长周期 -->\r\n\t\t\t\t<view class=\"trace-process\">\r\n\t\t\t\t\t<text class=\"process-title\">生长周期</text>\r\n\t\t\t\t\t<view class=\"process-steps\">\r\n\t\t\t\t\t\t<view class=\"process-step active\">\r\n\t\t\t\t\t\t\t<view class=\"step-dot\"></view>\r\n\t\t\t\t\t\t\t<view class=\"step-line\"></view>\r\n\t\t\t\t\t\t\t<view class=\"step-info\">\r\n\t\t\t\t\t\t\t\t<text class=\"step-time\">3月15日</text>\r\n\t\t\t\t\t\t\t\t<text class=\"step-desc\">播种育苗</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"process-step active\">\r\n\t\t\t\t\t\t\t<view class=\"step-dot\"></view>\r\n\t\t\t\t\t\t\t<view class=\"step-line\"></view>\r\n\t\t\t\t\t\t\t<view class=\"step-info\">\r\n\t\t\t\t\t\t\t\t<text class=\"step-time\">5月20日</text>\r\n\t\t\t\t\t\t\t\t<text class=\"step-desc\">开花结果</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"process-step active\">\r\n\t\t\t\t\t\t\t<view class=\"step-dot\"></view>\r\n\t\t\t\t\t\t\t<view class=\"step-line\"></view>\r\n\t\t\t\t\t\t\t<view class=\"step-info\">\r\n\t\t\t\t\t\t\t\t<text class=\"step-time\">6月30日</text>\r\n\t\t\t\t\t\t\t\t<text class=\"step-desc\">成熟采收</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"process-step active\">\r\n\t\t\t\t\t\t\t<view class=\"step-dot\"></view>\r\n\t\t\t\t\t\t\t<view class=\"step-info\">\r\n\t\t\t\t\t\t\t\t<text class=\"step-time\">7月1日</text>\r\n\t\t\t\t\t\t\t\t<text class=\"step-desc\">质检包装</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<!-- 生产者信息 -->\r\n\t\t\t\t<view class=\"farmer-info\">\r\n\t\t\t\t\t<text class=\"farmer-title\">生产者信息</text>\r\n\t\t\t\t\t<view class=\"farmer-card\">\r\n\t\t\t\t\t\t<image src=\"/static/images/farmer-avatar.png\" mode=\"widthFix\" class=\"farmer-avatar\"></image>\r\n\t\t\t\t\t\t<view class=\"farmer-details\">\r\n\t\t\t\t\t\t\t<text class=\"farmer-name\">{{ product.trace && product.trace.farmer || '张建国' }}</text>\r\n\t\t\t\t\t\t\t<text class=\"farmer-cert\">已认证种植户</text>\r\n\t\t\t\t\t\t\t<text class=\"farmer-experience\">15年种植经验 | 绿色种植认证</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"verify-tag\">\r\n\t\t\t\t\t\t\t<uni-icons type=\"verified\" size=\"18\" color=\"#1890FF\"></uni-icons>\r\n\t\t\t\t\t\t\t<text>已实名认证</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</uni-popup>\r\n\r\n\t\t<!-- 9. 完整规则弹窗 -->\r\n\t\t<uni-popup v-model=\"showFullRules\" mode=\"center\" class=\"rules-popup\">\r\n\t\t\t<view class=\"rules-popup-header\">\r\n\t\t\t\t<text>预售规则详情</text>\r\n\t\t\t\t<uni-icons type=\"close\" size=\"22\" color=\"#999\" @click=\"showFullRules = false\"></uni-icons>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"rules-popup-content\">\r\n\t\t\t\t<view class=\"full-rule-item\" v-for=\"(rule, index) in fullRules\" :key=\"index\">\r\n\t\t\t\t\t<text class=\"rule-number\">{{ index + 1 }}.</text>\r\n\t\t\t\t\t<text class=\"rule-content\">{{ rule }}</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</uni-popup>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\t// 1. 引入依赖（确保项目已安装对应包）\r\n\timport Decimal from 'decimal'\r\n\timport {\r\n\t\tmyMixin\r\n\t} from '@/utils/public.js'\r\n\timport {\r\n\t\tapi\r\n\t} from '@/api/index.js'\r\n\r\n\texport default {\r\n\t\t// 4. 混入公共方法\r\n\t\tmixins: [myMixin],\r\n\t\t// 5. 数据定义\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tproduct: {}, // 从上一页传递的商品数据\r\n\t\t\t\tproductImages: [], // 商品轮播图（默认3张占位图）\r\n\t\t\t\tcurrentSwiperIndex: 0, // 当前轮播图索引\r\n\t\t\t\tshowDetail: false, // 是否展开商品详情\r\n\t\t\t\tshowTraceability: false, // 是否显示溯源弹窗\r\n\t\t\t\tshowFullRules: false, // 是否显示完整规则\r\n\r\n\t\t\t\tselectedPoint: null, // 选中的提货点ID\r\n\t\t\t\tdeliveryPoints: [ // 提货点列表\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 1,\r\n\t\t\t\t\t\tname: '绿鲜社区店',\r\n\t\t\t\t\t\taddress: '朝阳区光华路8号底商',\r\n\t\t\t\t\t\tpickupTime: '09:00-21:00'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 2,\r\n\t\t\t\t\t\tname: '智慧生活超市',\r\n\t\t\t\t\t\taddress: '海淀区中关村大街12号',\r\n\t\t\t\t\t\tpickupTime: '08:30-22:00'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 3,\r\n\t\t\t\t\t\tname: '生鲜便利店',\r\n\t\t\t\t\t\taddress: '西城区西单北大街109号',\r\n\t\t\t\t\t\tpickupTime: '10:00-20:00'\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\r\n\t\t\t\t// 规则文本\r\n\t\t\t\tshortRules: [\r\n\t\t\t\t\t'定金支付后不可退换',\r\n\t\t\t\t\t'提货时需出示订单二维码',\r\n\t\t\t\t\t'预售商品到货后统一配送'\r\n\t\t\t\t],\r\n\t\t\t\tfullRules: [\r\n\t\t\t\t\t'定金支付后不可退换，如商品未按约定时间到货，系统将自动退款并补偿5元优惠券',\r\n\t\t\t\t\t'提货时需出示订单二维码，核对身份信息后方可提货，代提需提供双方有效证件',\r\n\t\t\t\t\t'预售商品到货后将统一配送到您选择的提货点，到货后会通过短信通知，请在3天内提货',\r\n\t\t\t\t\t'预订商品数量有限，每个用户ID限购5份，超出部分将按原价结算，不享受预售优惠',\r\n\t\t\t\t\t'商品保质期为到货后3天，请在保质期内提货并食用，逾期未提视为自动放弃',\r\n\t\t\t\t\t'如对商品质量有异议，请在提货后24小时内联系客服处理，逾期将不再受理'\r\n\t\t\t\t],\r\n\r\n\t\t\t\t// 提交表单数据\r\n\t\t\t\tfromData: {\r\n\t\t\t\t\tfarmer_id: '',\r\n\t\t\t\t\tgoods_num: 1, // 默认购买1件\r\n\t\t\t\t\tprice: 0,\r\n\t\t\t\t\tpayprice: 0,\r\n\t\t\t\t\tpayway: 2, // 支付方式：2=微信支付\r\n\t\t\t\t\tgoods_arr: [],\r\n\t\t\t\t\tmoney: 0 // 商品单价\r\n\t\t\t\t},\r\n\t\t\t\tquery: {\r\n\t\t\t\t\tfarmersgoods_id: null,\r\n\t\t\t\t\tpage: 1,\r\n\t\t\t\t\tlimit: 10\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\t},\r\n\r\n\r\n\t\t// 6. 页面加载时初始化\r\n\t\tonLoad({\r\n\t\t\tquery\r\n\t\t}) {\r\n\t\t\t// 解析上一页传递的商品参数（兼容字符串/JSON）\r\n\t\t\tconst jsonQuery = typeof query === 'string' ? JSON.parse(query) : query\r\n\t\t\tthis.product = jsonQuery || {}\r\n\r\n\t\t\tthis.query.farmersgoods_id = jsonQuery.farmersgoods_id\r\n\r\n\t\t\tthis.getData()\r\n\r\n\t\t\t// console.log(this.product)\r\n\r\n\t\t\t// 初始化表单基础数据\r\n\t\t\tthis.fromData.farmer_id = this.product.id || ''\r\n\t\t\tthis.fromData.money = parseFloat(this.product.price) || 0\r\n\r\n\t\t\t// 默认选中第一个提货点\r\n\t\t\tif (this.deliveryPoints.length > 0) {\r\n\t\t\t\tthis.selectedPoint = this.deliveryPoints[0].id\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\t// 7. 计算属性（总金额）\r\n\t\tcomputed: {\r\n\t\t\ttotalAmount() {\r\n\t\t\t\t// 避免NaN，确保金额计算合法\r\n\t\t\t\tif (isNaN(this.fromData.money) || isNaN(this.fromData.goods_num) || this.fromData.goods_num < 1) {\r\n\t\t\t\t\treturn 0\r\n\t\t\t\t}\r\n\t\t\t\treturn new Decimal(this.fromData.money).mul(this.fromData.goods_num).toNumber()\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 8. 方法定义\r\n\t\tmethods: {\r\n\t\t\tasync getData() {\r\n\t\t\t\tlet data = await api.goodsinfoList(this.query)\r\n\t\t\t\tthis.productImages = [this.product.imglogo]\r\n\t\t\t\tdata.data.listdata.forEach(item => {\r\n\t\t\t\t\tif (item.imgs.split(',').length > 1 && this.productImages.length < 10) {\r\n\t\t\t\t\t\tconsole.log(item.imgs.split(','))\r\n\t\t\t\t\t\tthis.productImages = [...this.productImages, ...item.imgs.split(',')]\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 轮播图切换事件\r\n\t\t\tonSwiperChange(e) {\r\n\t\t\t\tthis.currentSwiperIndex = e.detail.current\r\n\t\t\t},\r\n\r\n\t\t\t// 展开/收起商品详情\r\n\t\t\ttoggleDetail() {\r\n\t\t\t\tthis.showDetail = !this.showDetail\r\n\t\t\t},\r\n\r\n\t\t\t// 选择提货点\r\n\t\t\tselectPoint(id) {\r\n\t\t\t\tthis.selectedPoint = id\r\n\t\t\t},\r\n\r\n\t\t\t// 数量输入框变化（限制正整数）\r\n\t\t\tonKeyInput(e) {\r\n\t\t\t\tconst inputVal = e.detail.value.trim()\r\n\t\t\t\tconst num = parseInt(inputVal)\r\n\t\t\t\tthis.fromData.goods_num = isNaN(num) || num < 1 ? 1 : num\r\n\t\t\t},\r\n\r\n\t\t\t// 减少购买数量\r\n\t\t\tminusGoods_num() {\r\n\t\t\t\tif (this.fromData.goods_num > 1) {\r\n\t\t\t\t\tthis.fromData.goods_num--\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t// 增加购买数量\r\n\t\t\taddGoods_num() {\r\n\t\t\t\tthis.fromData.goods_num++\r\n\t\t\t},\r\n\r\n\t\t\t// 加入购物车（模拟）\r\n\t\t\taddToCart() {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '已加入购物车',\r\n\t\t\t\t\ticon: 'success',\r\n\t\t\t\t\tduration: 1500\r\n\t\t\t\t})\r\n\t\t\t\t// 实际项目需调用购物车接口，此处省略\r\n\t\t\t},\r\n\r\n\t\t\t// 提交预售订单\r\n\t\t\tasync handleSubmit() {\r\n\t\t\t\t// 基础验证\r\n\t\t\t\tif (!this.selectedPoint) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '请选择提货点',\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tif (this.fromData.goods_num < 1) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '购买数量不能小于1',\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tif (this.fromData.money <= 0) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '商品价格异常，请刷新',\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// 组装提交数据\r\n\t\t\t\tthis.fromData.price = this.totalAmount\r\n\t\t\t\tthis.fromData.payprice = this.totalAmount\r\n\t\t\t\tthis.fromData.goods_arr = [{\r\n\t\t\t\t\tgoods_id: this.product.id || '',\r\n\t\t\t\t\tgoodsname: this.product.goodsname || '',\r\n\t\t\t\t\tgoodsnum: this.fromData.goods_num,\r\n\t\t\t\t\tprice: this.fromData.price,\r\n\t\t\t\t\tpay_time: Date.now()\r\n\t\t\t\t}]\r\n\r\n\t\t\t\t// 调用接口提交\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst res = await api.prePurchaseOrder(this.fromData)\r\n\t\t\t\t\tif (res.code === 200 && res.data?.out_trade_no) {\r\n\t\t\t\t\t\t// 提交成功，发起支付\r\n\t\t\t\t\t\tthis.startPayment(res.data.out_trade_no)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: res.msg || '订单提交失败',\r\n\t\t\t\t\t\t\ticon: 'error',\r\n\t\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tthis.fromData.goods_arr = []\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (err) {\r\n\t\t\t\t\tconsole.error('提交订单异常：', err)\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '网络异常，请稍后重试',\r\n\t\t\t\t\t\ticon: 'error',\r\n\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.fromData.goods_arr = []\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t// 发起微信支付\r\n\t\t\tasync startPayment(out_trade_no) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\t// 获取支付参数\r\n\t\t\t\t\tconst payRes = await api.wechatpay({\r\n\t\t\t\t\t\tout_trade_no\r\n\t\t\t\t\t})\r\n\r\n\t\t\t\t\tif (payRes.code === 200 && payRes.data) {\r\n\t\t\t\t\t\t// 格式化支付参数（微信要求timeStamp为字符串）\r\n\t\t\t\t\t\tconst payParams = {\r\n\t\t\t\t\t\t\t...payRes.data,\r\n\t\t\t\t\t\t\ttimeStamp: payRes.data.timeStamp.toString(),\r\n\t\t\t\t\t\t\tnonceStr: payRes.data.nonceStr || '',\r\n\t\t\t\t\t\t\tpackage: payRes.data.package || '',\r\n\t\t\t\t\t\t\tsignType: payRes.data.signType || 'MD5',\r\n\t\t\t\t\t\t\tpaySign: payRes.data.paySign || ''\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// 调用微信支付\r\n\t\t\t\t\t\tuni.requestPayment({\r\n\t\t\t\t\t\t\t...payParams,\r\n\t\t\t\t\t\t\tsuccess: () => {\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: '预订成功',\r\n\t\t\t\t\t\t\t\t\ticon: 'success',\r\n\t\t\t\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t// 支付成功返回上一页\r\n\t\t\t\t\t\t\t\tsetTimeout(() => uni.navigateBack({\r\n\t\t\t\t\t\t\t\t\tdelta: 1\r\n\t\t\t\t\t\t\t\t}), 2000)\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfail: () => {\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: '支付已取消',\r\n\t\t\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tcomplete: () => {\r\n\t\t\t\t\t\t\t\tthis.fromData.goods_arr = []\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} else if (payRes.code === 202) {\r\n\t\t\t\t\t\t// 未绑定OpenID，自动绑定后重试\r\n\t\t\t\t\t\tawait this.bindOpenIDAndPay(out_trade_no)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: payRes.msg || '获取支付参数失败',\r\n\t\t\t\t\t\t\ticon: 'error',\r\n\t\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (err) {\r\n\t\t\t\t\tconsole.error('支付异常：', err)\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '支付服务异常',\r\n\t\t\t\t\t\ticon: 'error',\r\n\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t// 绑定OpenID并重新支付\r\n\t\t\tasync bindOpenIDAndPay(out_trade_no) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\t// 获取微信登录Code\r\n\t\t\t\t\tconst loginRes = await new Promise((resolve, reject) => {\r\n\t\t\t\t\t\tuni.login({\r\n\t\t\t\t\t\t\tprovider: 'weixin',\r\n\t\t\t\t\t\t\tsuccess: resolve,\r\n\t\t\t\t\t\t\tfail: reject\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\r\n\t\t\t\t\tif (loginRes.code) {\r\n\t\t\t\t\t\t// 调用绑定接口\r\n\t\t\t\t\t\tconst bindRes = await api.bindingOpenid({\r\n\t\t\t\t\t\t\tcode: loginRes.code\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tif (bindRes.code === 200) {\r\n\t\t\t\t\t\t\t// 绑定成功，重新支付\r\n\t\t\t\t\t\t\tawait this.startPayment(out_trade_no)\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '账号绑定失败',\r\n\t\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '获取微信登录信息失败',\r\n\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (err) {\r\n\t\t\t\t\tconsole.error('绑定OpenID异常：', err)\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '绑定服务异常',\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style scoped>\r\n\t/* 基础容器 */\r\n\t.container {\r\n\t\tfont-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\r\n\t\tbackground-color: #f5f7fa;\r\n\t\tmin-height: 100vh;\r\n\t\tpadding-bottom: 120rpx;\r\n\t\t/* 给底部操作栏留空间 */\r\n\t}\r\n\r\n\t/* 1. 轮播图样式 */\r\n\t.carousel-container {\r\n\t\tposition: relative;\r\n\t\twidth: 100%;\r\n\t}\r\n\r\n\t.product-swiper {\r\n\t\twidth: 100%;\r\n\t\theight: 450rpx;\r\n\t}\r\n\r\n\t.carousel-image {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t}\r\n\r\n\t.carousel-counter {\r\n\t\tposition: absolute;\r\n\t\tright: 20rpx;\r\n\t\tbottom: 20rpx;\r\n\t\tbackground: rgba(0, 0, 0, 0.5);\r\n\t\tcolor: #fff;\r\n\t\tfont-size: 24rpx;\r\n\t\tpadding: 6rpx 12rpx;\r\n\t\tborder-radius: 14rpx;\r\n\t\tz-index: 10;\r\n\t}\r\n\r\n\t/* 2. 商品基础信息 */\r\n\t.product-base-info {\r\n\t\tbackground: #fff;\r\n\t\tpadding: 24rpx;\r\n\t}\r\n\r\n\t.product-name {\r\n\t\tfont-size: 34rpx;\r\n\t\tcolor: #333;\r\n\t\tfont-weight: 500;\r\n\t\tline-height: 1.4;\r\n\t\tmargin-bottom: 16rpx;\r\n\t\tdisplay: block;\r\n\t}\r\n\r\n\t.product-tags {\r\n\t\tdisplay: flex;\r\n\t\tgap: 12rpx;\r\n\t\tmargin-bottom: 20rpx;\r\n\t\tflex-wrap: wrap;\r\n\t}\r\n\r\n\t.tag {\r\n\t\tfont-size: 24rpx;\r\n\t\tpadding: 6rpx 16rpx;\r\n\t\tborder-radius: 20rpx;\r\n\t}\r\n\r\n\t.primary-tag {\r\n\t\tbackground: #fff0f0;\r\n\t\tcolor: #e53e3e;\r\n\t}\r\n\r\n\t.origin-tag {\r\n\t\tbackground: #e6fff0;\r\n\t\tcolor: #22c55e;\r\n\t\tborder: 1px solid #b8e986;\r\n\t}\r\n\r\n\t.fresh-tag {\r\n\t\tbackground: #e6f7ff;\r\n\t\tcolor: #1890ff;\r\n\t}\r\n\r\n\t.price-section {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tgap: 12rpx;\r\n\t}\r\n\r\n\t.current-price {\r\n\t\tfont-size: 40rpx;\r\n\t\tcolor: #e53e3e;\r\n\t\tfont-weight: 600;\r\n\t}\r\n\r\n\t.original-price {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #999;\r\n\t\ttext-decoration: line-through;\r\n\t}\r\n\r\n\t.product-unit {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #666;\r\n\t}\r\n\r\n\t.sales-volume {\r\n\t\tfont-size: 26rpx;\r\n\t\tcolor: #999;\r\n\t\tmargin-left: auto;\r\n\t}\r\n\r\n\t/* 3. 溯源卡片 */\r\n\t.traceability-card {\r\n\t\tbackground: #fff;\r\n\t\tmargin: 16rpx;\r\n\t\tborder-radius: 16rpx;\r\n\t\tpadding: 24rpx;\r\n\t\tbox-shadow: 0 2px 10px rgba(0, 0, 0, 0.03);\r\n\t}\r\n\r\n\t.traceability-header {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t\tmargin-bottom: 20rpx;\r\n\t}\r\n\r\n\t.trace-title {\r\n\t\tfont-size: 30rpx;\r\n\t\tcolor: #333;\r\n\t\tfont-weight: 500;\r\n\t}\r\n\r\n\t.trace-content {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tgap: 20rpx;\r\n\t}\r\n\r\n\t.trace-logo {\r\n\t\twidth: 120rpx;\r\n\t\theight: 120rpx;\r\n\t\tflex-shrink: 0;\r\n\t}\r\n\r\n\t.trace-info {\r\n\t\tflex: 1;\r\n\t}\r\n\r\n\t.trace-item {\r\n\t\tdisplay: flex;\r\n\t\tmargin-bottom: 10rpx;\r\n\t}\r\n\r\n\t.trace-label {\r\n\t\tfont-size: 26rpx;\r\n\t\tcolor: #666;\r\n\t\twidth: 140rpx;\r\n\t\tflex-shrink: 0;\r\n\t}\r\n\r\n\t.trace-value {\r\n\t\tfont-size: 26rpx;\r\n\t\tcolor: #333;\r\n\t\tflex: 1;\r\n\t}\r\n\r\n\t/* 4. 商品详情面板 */\r\n\t.detail-panel {\r\n\t\tbackground: #fff;\r\n\t\tmargin: 0 16rpx 16rpx;\r\n\t\tborder-radius: 16rpx;\r\n\t\tbox-shadow: 0 2px 10px rgba(0, 0, 0, 0.03);\r\n\t}\r\n\r\n\t.panel-header {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t\tpadding: 24rpx;\r\n\t}\r\n\r\n\t.panel-title {\r\n\t\tfont-size: 30rpx;\r\n\t\tcolor: #333;\r\n\t\tfont-weight: 500;\r\n\t}\r\n\r\n\t.rotate {\r\n\t\ttransform: rotate(180deg);\r\n\t\ttransition: transform 0.3s;\r\n\t}\r\n\r\n\t.panel-content {\r\n\t\tpadding: 0 24rpx 24rpx;\r\n\t}\r\n\r\n\t.detail-image {\r\n\t\twidth: 100%;\r\n\t\tborder-radius: 8rpx;\r\n\t\tmargin-bottom: 20rpx;\r\n\t}\r\n\r\n\t.detail-text {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #666;\r\n\t\tline-height: 1.6;\r\n\t}\r\n\r\n\t.detail-section {\r\n\t\tmargin-bottom: 24rpx;\r\n\t}\r\n\r\n\t.detail-section-title {\r\n\t\tfont-size: 30rpx;\r\n\t\tcolor: #333;\r\n\t\tfont-weight: 500;\r\n\t\tmargin-bottom: 12rpx;\r\n\t\tdisplay: block;\r\n\t}\r\n\r\n\t/* 5. 购买区域 */\r\n\t.purchase-card {\r\n\t\tbackground: #fff;\r\n\t\tmargin: 0 16rpx 16rpx;\r\n\t\tborder-radius: 16rpx;\r\n\t\tpadding: 24rpx;\r\n\t\tbox-shadow: 0 2px 10px rgba(0, 0, 0, 0.03);\r\n\t}\r\n\r\n\t.form-group {\r\n\t\tmargin-bottom: 30rpx;\r\n\t}\r\n\r\n\t.form-group:last-child {\r\n\t\tmargin-bottom: 0;\r\n\t}\r\n\r\n\t.form-label {\r\n\t\tfont-size: 30rpx;\r\n\t\tcolor: #333;\r\n\t\tmargin-bottom: 16rpx;\r\n\t\tdisplay: block;\r\n\t}\r\n\r\n\t/* 数量选择器 */\r\n\t.quantity-selector {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\twidth: 300rpx;\r\n\t}\r\n\r\n\t.quantity-btn {\r\n\t\twidth: 80rpx;\r\n\t\theight: 80rpx;\r\n\t\tborder-radius: 8rpx;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tbackground: #f5f5f5;\r\n\t\tcolor: #333;\r\n\t\tfont-size: 36rpx;\r\n\t}\r\n\r\n\t.quantity-btn.minus.disabled {\r\n\t\tbackground: #f1f1f1;\r\n\t\tcolor: #ccc;\r\n\t}\r\n\r\n\t.quantity-input {\r\n\t\twidth: 140rpx;\r\n\t\theight: 80rpx;\r\n\t\ttext-align: center;\r\n\t\tfont-size: 30rpx;\r\n\t\tborder-top: 1px solid #f5f5f5;\r\n\t\tborder-bottom: 1px solid #f5f5f5;\r\n\t}\r\n\r\n\t/* 提货点选择 */\r\n\t.pickup-list {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tgap: 16rpx;\r\n\t}\r\n\r\n\t.pickup-item {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t\tpadding: 20rpx;\r\n\t\tborder: 1px solid #e5e5e5;\r\n\t\tborder-radius: 12rpx;\r\n\t\ttransition: all 0.2s;\r\n\t}\r\n\r\n\t.pickup-item.selected {\r\n\t\tborder-color: #1890FF;\r\n\t\tbackground: #f0f7ff;\r\n\t}\r\n\r\n\t.point-info {\r\n\t\tflex: 1;\r\n\t}\r\n\r\n\t.point-name {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #333;\r\n\t\tfont-weight: 500;\r\n\t\tdisplay: block;\r\n\t\tmargin-bottom: 4rpx;\r\n\t}\r\n\r\n\t.point-address {\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #666;\r\n\t\tdisplay: block;\r\n\t\tmargin-bottom: 4rpx;\r\n\t}\r\n\r\n\t.point-time {\r\n\t\tfont-size: 22rpx;\r\n\t\tcolor: #999;\r\n\t\tdisplay: block;\r\n\t}\r\n\r\n\t.no-point {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tpadding: 60rpx 20rpx;\r\n\t\tcolor: #999;\r\n\t\tfont-size: 26rpx;\r\n\t}\r\n\r\n\t.no-point text {\r\n\t\tmargin-top: 20rpx;\r\n\t}\r\n\r\n\t/* 6. 预售规则 */\r\n\t.rules-card {\r\n\t\tbackground: #fff;\r\n\t\tmargin: 0 16rpx 16rpx;\r\n\t\tborder-radius: 16rpx;\r\n\t\tpadding: 24rpx;\r\n\t\tbox-shadow: 0 2px 10px rgba(0, 0, 0, 0.03);\r\n\t}\r\n\r\n\t.section-title {\r\n\t\tfont-size: 30rpx;\r\n\t\tcolor: #333;\r\n\t\tfont-weight: 500;\r\n\t\tmargin-bottom: 20rpx;\r\n\t\tdisplay: block;\r\n\t}\r\n\r\n\t.rules-list {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tgap: 16rpx;\r\n\t}\r\n\r\n\t.rule-item {\r\n\t\tdisplay: flex;\r\n\t\talign-items: flex-start;\r\n\t\tfont-size: 26rpx;\r\n\t\tcolor: #666;\r\n\t\tline-height: 1.5;\r\n\t}\r\n\r\n\t.rule-icon {\r\n\t\tmargin-right: 12rpx;\r\n\t\tmargin-top: 6rpx;\r\n\t}\r\n\r\n\t.view-more {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tfont-size: 26rpx;\r\n\t\tcolor: #1890FF;\r\n\t\tmargin-top: 10rpx;\r\n\t\tpadding: 10rpx 0;\r\n\t}\r\n\r\n\t/* 7. 底部操作栏 */\r\n\t.footer {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tposition: fixed;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\tbottom: 0;\r\n\t\theight: 120rpx;\r\n\t\tbackground: #fff;\r\n\t\tborder-top: 1px solid #f0f0f0;\r\n\t\tpadding: 0 24rpx;\r\n\t}\r\n\r\n\t.cart-btn {\r\n\t\twidth: 140rpx;\r\n\t\theight: 70rpx;\r\n\t\tbackground: #f5f5f5;\r\n\t\tcolor: #333;\r\n\t\tborder-radius: 35rpx;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tfont-size: 26rpx;\r\n\t\tgap: 8rpx;\r\n\t\tmargin-right: 20rpx;\r\n\t}\r\n\r\n\t.total-info {\r\n\t\tflex: 1;\r\n\t}\r\n\r\n\t.total-label {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #666;\r\n\t}\r\n\r\n\t.total-amount {\r\n\t\tfont-size: 36rpx;\r\n\t\tcolor: #e53e3e;\r\n\t\tfont-weight: 600;\r\n\t}\r\n\r\n\t.submit-btn {\r\n\t\twidth: 280rpx;\r\n\t\theight: 80rpx;\r\n\t\tbackground: #1890FF;\r\n\t\tcolor: #fff;\r\n\t\tborder-radius: 40rpx;\r\n\t\tfont-size: 30rpx;\r\n\t\tfont-weight: 500;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t}\r\n\r\n\t.submit-btn:disabled {\r\n\t\tbackground: #a0cfff;\r\n\t}\r\n\r\n\t/* 8. 溯源弹窗 */\r\n\t.trace-popup {\r\n\t\tpadding-bottom: 0;\r\n\t}\r\n\r\n\t.popup-header {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t\tpadding: 24rpx;\r\n\t\tborder-bottom: 1px solid #f0f0f0;\r\n\t}\r\n\r\n\t.popup-title {\r\n\t\tfont-size: 32rpx;\r\n\t\tcolor: #333;\r\n\t\tfont-weight: 500;\r\n\t}\r\n\r\n\t.trace-detail {\r\n\t\tpadding: 24rpx;\r\n\t\tmax-height: 580rpx;\r\n\t\toverflow-y: auto;\r\n\t}\r\n\r\n\t.trace-qrcode {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tmargin-bottom: 30rpx;\r\n\t\tpadding-bottom: 30rpx;\r\n\t\tborder-bottom: 1px dashed #f0f0f0;\r\n\t}\r\n\r\n\t.trace-qrcode image {\r\n\t\twidth: 200rpx;\r\n\t\theight: 200rpx;\r\n\t\tmargin-bottom: 16rpx;\r\n\t}\r\n\r\n\t.trace-qrcode text {\r\n\t\tfont-size: 26rpx;\r\n\t\tcolor: #666;\r\n\t}\r\n\r\n\t.trace-process {\r\n\t\tmargin-bottom: 30rpx;\r\n\t}\r\n\r\n\t.process-title {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #333;\r\n\t\tfont-weight: 500;\r\n\t\tmargin-bottom: 20rpx;\r\n\t\tdisplay: block;\r\n\t}\r\n\r\n\t.process-steps {\r\n\t\tposition: relative;\r\n\t\tpadding-left: 30rpx;\r\n\t}\r\n\r\n\t.process-steps::before {\r\n\t\tcontent: '';\r\n\t\tposition: absolute;\r\n\t\tleft: 14rpx;\r\n\t\ttop: 0;\r\n\t\tbottom: 0;\r\n\t\twidth: 2rpx;\r\n\t\tbackground: #e5e5e5;\r\n\t}\r\n\r\n\t.process-step {\r\n\t\tposition: relative;\r\n\t\tpadding-bottom: 30rpx;\r\n\t}\r\n\r\n\t.process-step:last-child {\r\n\t\tpadding-bottom: 0;\r\n\t}\r\n\r\n\t.step-dot {\r\n\t\tposition: absolute;\r\n\t\tleft: -30rpx;\r\n\t\ttop: 0;\r\n\t\twidth: 30rpx;\r\n\t\theight: 30rpx;\r\n\t\tborder-radius: 50%;\r\n\t\tbackground: #e5e5e5;\r\n\t}\r\n\r\n\t.process-step.active .step-dot {\r\n\t\tbackground: #1890FF;\r\n\t}\r\n\r\n\t.step-line {\r\n\t\tposition: absolute;\r\n\t\tleft: -24rpx;\r\n\t\ttop: 30rpx;\r\n\t\twidth: 2rpx;\r\n\t\theight: calc(100% - 30rpx);\r\n\t\tbackground: #e5e5e5;\r\n\t}\r\n\r\n\t.process-step.active .step-line {\r\n\t\tbackground: #1890FF;\r\n\t}\r\n\r\n\t.step-info {\r\n\t\tpadding-left: 10rpx;\r\n\t}\r\n\r\n\t.step-time {\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #999;\r\n\t\tdisplay: block;\r\n\t\tmargin-bottom: 4rpx;\r\n\t}\r\n\r\n\t.step-desc {\r\n\t\tfont-size: 26rpx;\r\n\t\tcolor: #333;\r\n\t}\r\n\r\n\t.farmer-info {}\r\n\r\n\t.farmer-title {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #333;\r\n\t\tfont-weight: 500;\r\n\t\tmargin-bottom: 20rpx;\r\n\t\tdisplay: block;\r\n\t}\r\n\r\n\t.farmer-card {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tbackground: #fafafa;\r\n\t\tborder-radius: 12rpx;\r\n\t\tpadding: 20rpx;\r\n\t}\r\n\r\n\t.farmer-avatar {\r\n\t\twidth: 120rpx;\r\n\t\theight: 120rpx;\r\n\t\tborder-radius: 50%;\r\n\t\tmargin-right: 20rpx;\r\n\t}\r\n\r\n\t.farmer-details {\r\n\t\tflex: 1;\r\n\t}\r\n\r\n\t.farmer-name {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #333;\r\n\t\tfont-weight: 500;\r\n\t\tdisplay: block;\r\n\t\tmargin-bottom: 6rpx;\r\n\t}\r\n\r\n\t.farmer-cert {\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #1890FF;\r\n\t\tdisplay: block;\r\n\t\tmargin-bottom: 6rpx;\r\n\t}\r\n\r\n\t.farmer-experience {\r\n\t\tfont-size: 22rpx;\r\n\t\tcolor: #666;\r\n\t}\r\n\r\n\t.verify-tag {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tgap: 6rpx;\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #1890FF;\r\n\t\tbackground: #e6f7ff;\r\n\t\tpadding: 6rpx 12rpx;\r\n\t\tborder-radius: 4rpx;\r\n\t}\r\n\r\n\t/* 9. 规则弹窗 */\r\n\t.rules-popup {\r\n\t\tborder-radius: 16rpx;\r\n\t}\r\n\r\n\t.rules-popup-header {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t\tpadding: 24rpx;\r\n\t\tborder-bottom: 1px solid #f0f0f0;\r\n\t}\r\n\r\n\t.rules-popup-header text {\r\n\t\tfont-size: 30rpx;\r\n\t\tcolor: #333;\r\n\t\tfont-weight: 500;\r\n\t}\r\n\r\n\t.rules-popup-content {\r\n\t\tmax-height: 500rpx;\r\n\t\toverflow-y: auto;\r\n\t\tpadding: 24rpx;\r\n\t}\r\n\r\n\t.full-rule-item {\r\n\t\tdisplay: flex;\r\n\t\tmargin-bottom: 20rpx;\r\n\t\tline-height: 1.6;\r\n\t}\r\n\r\n\t.full-rule-item:last-child {\r\n\t\tmargin-bottom: 0;\r\n\t}\r\n\r\n\t.rule-number {\r\n\t\tfont-size: 26rpx;\r\n\t\tcolor: #1890FF;\r\n\t\tfont-weight: 500;\r\n\t\tmargin-right: 12rpx;\r\n\t\tflex-shrink: 0;\r\n\t}\r\n\r\n\t.rule-content {\r\n\t\tfont-size: 26rpx;\r\n\t\tcolor: #666;\r\n\t\tflex: 1;\r\n\t}\r\n\r\n\t/* 响应式调整（小屏幕适配） */\r\n\t@media (max-width: 375px) {\r\n\t\t.product-swiper {\r\n\t\t\theight: 380rpx;\r\n\t\t}\r\n\r\n\t\t.footer {\r\n\t\t\theight: 100rpx;\r\n\t\t}\r\n\r\n\t\t.submit-btn {\r\n\t\t\twidth: 220rpx;\r\n\t\t\theight: 70rpx;\r\n\t\t\tfont-size: 28rpx;\r\n\t\t}\r\n\r\n\t\t.id-upload-area {\r\n\t\t\tflex-direction: column;\r\n\t\t}\r\n\t}\r\n</style>","import MiniProgramPage from 'E:/小程序转app/xcbapp/subPackages/shoppingPageList/prePurchaseDeposit/prePurchaseDeposit.vue'\nwx.createPage(MiniProgramPage)"],"names":["myMixin","Decimal","api","uni"],"mappings":"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"}