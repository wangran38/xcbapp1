{"version":3,"file":"realTimeInfo.js","sources":["subPackages/shoppingPageList/realTimeInfo/realTimeInfo.vue","D:/HBuilderX/plugins/uniapp-cli-vite/uniPage:/c3ViUGFja2FnZXNcc2hvcHBpbmdQYWdlTGlzdFxyZWFsVGltZUluZm9ccmVhbFRpbWVJbmZvLnZ1ZQ"],"sourcesContent":["<template>\r\n\t<view class=\"news-container\">\r\n\t\t<view class=\"search-bar\">\r\n\t\t\t<view class=\"search-box\">\r\n\t\t\t\t<uni-icons type=\"search\" size=\"18\" color=\"#999\" />\r\n\t\t\t\t<input class=\"search-input\" placeholder=\"请输入关键词搜索\" placeholder-class=\"placeholder\"\r\n\t\t\t\t\t@input=\"onSearchInput\" />\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<scroll-view class=\"category-nav\" scroll-x>\r\n\t\t\t<view v-for=\"(item, index) in categories\" :key=\"item.id\" class=\"category-item\"\r\n\t\t\t\t:class=\"{ active: activeCategory === index }\" @click=\"switchCategory(index)\">\r\n\t\t\t\t{{ item.name }}\r\n\t\t\t\t<view v-if=\"activeCategory === index\" class=\"indicator\"></view>\r\n\t\t\t</view>\r\n\t\t</scroll-view>\r\n\r\n\t\t<scroll-view class=\"news-list\" scroll-y :style=\"{ height: scrollHeight + 'px' }\" @scrolltolower=\"changePage\">\r\n\t\t\t<view v-for=\"news in newsList\" :key=\"news.id\" class=\"news-item\" @click=\"navigateToDetail(news)\">\r\n\t\t\t\t<image class=\"news-image\"\r\n\t\t\t\t\t:src=\"news.cover ? news.cover :'https://img0.baidu.com/it/u=3524251599,1183611687&fm=253&fmt=auto&app=138&f=GIF?w=285&h=285'\"\r\n\t\t\t\t\tmode=\"aspectFill\" />\r\n\t\t\t\t<view class=\"news-content\">\r\n\t\t\t\t\t<text class=\"news-title\">{{ news.title }}</text>\r\n\t\t\t\t\t<text class=\"news-summary\">{{ news.description }}</text>\r\n\t\t\t\t\t<view class=\"news-meta\">\r\n\t\t\t\t\t\t<text class=\"meta-item\">{{ initTime(news.createtime) }}</text>\r\n\t\t\t\t\t\t<view class=\"meta-item\">\r\n\t\t\t\t\t\t\t<uni-icons type=\"hand-up\" size=\"14\" />\r\n\t\t\t\t\t\t\t<text>{{ news.likeCount }}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</scroll-view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport {\r\n\t\tapi\r\n\t} from '@/api/index.js'\r\n\timport {\r\n\t\tmyMixin\r\n\t} from '@/utils/public.js'\r\n\texport default {\r\n\t\tmixins: [myMixin],\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tactiveCategory: 0,\r\n\t\t\t\tsearchText: '',\r\n\t\t\t\tscrollHeight: 0,\r\n\t\t\t\tcategories: [],\r\n\t\t\t\tquery: {\r\n\t\t\t\t\tcategory_name: null, // 分类\r\n\t\t\t\t\tpage: 1,\r\n\t\t\t\t\tlimit: 10,\r\n\t\t\t\t},\r\n\t\t\t\tnewsList: [\r\n\r\n\t\t\t\t],\r\n\t\t\t\tisNext:false\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tthis.calcScrollHeight()\r\n\t\t\tthis.initClassification()\r\n\t\t\tthis.getData()\r\n\r\n\t\t},\r\n\t\twatch: {\r\n\t\t\tactiveCategory(newValue, oldValue) {\r\n\t\t\t\t// 重置页码\r\n\t\t\t\tthis.query.page = 1\r\n\t\t\t\t// 解除翻页锁\r\n\t\t\t\tthis.isNext = false\r\n\t\t\t\t\r\n\t\t\t\t// 更新数据\r\n\t\t\t\tthis.query.category_name = this.categories[newValue].name\r\n\t\t\t\tthis.getData(true)\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t// 翻页\r\n\t\t\tchangePage(){\r\n\t\t\t\tif (!this.isNext){\r\n\t\t\t\t\tthis.query.page+=1\r\n\t\t\t\t\tthis.getData()\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 分类数据\r\n\t\t\tasync initClassification() {\r\n\t\t\t\tlet data = await api.classification({})\r\n\t\t\t\tif (data.code == 200) {\r\n\t\t\t\t\tlet newList = data.data.map((item, index) => {\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\tid: index,\r\n\t\t\t\t\t\t\tname: item\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\tconsole.log(newList)\r\n\t\t\t\t\tthis.categories = [{id:-1,name:'全部'},...newList]\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tasync getData(lock=false) {\r\n\t\t\t\tlet data = await api.informationData(this.query)\r\n\t\t\t\tif (data.code == 200) {\r\n\t\t\t\t\tif (!lock){\r\n\t\t\t\t\t\tthis.newsList = [...this.newsList, ...data.data.listdata]\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.newsList = data.data.listdata\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.isNext = data.data.listdata.length < this.query.limit ? true : false   // 判断是否还能继续翻页\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tcalcScrollHeight() {\r\n\t\t\t\tconst systemInfo = uni.getSystemInfoSync()\r\n\t\t\t\tthis.scrollHeight = systemInfo.windowHeight - 180 // 根据实际高度调整\r\n\t\t\t},\r\n\r\n\t\t\t// 切换分类\r\n\t\t\tswitchCategory(index) {\r\n\t\t\t\tthis.activeCategory = index\r\n\t\t\t\tthis.query.category_name = this.categories[index].name\r\n\t\t\t},\r\n\t\t\tonSearchInput(e) {\r\n\t\t\t\tthis.searchText = e.detail.value.trim()\r\n\t\t\t},\r\n\t\t\tnavigateToDetail(item) {\r\n\t\t\t\tlet content = encodeURIComponent(item.content)\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: `/subPackages/shoppingPageList/realTimeInfoDetail/realTimeInfoDetail?content=${content}&createtime=${this.initTime(item.createtime)}`\r\n\t\t\t\t})\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t.news-container {\r\n\t\tbackground: #f5f5f5;\r\n\t}\r\n\r\n\t.search-bar {\r\n\t\tpadding: 20rpx 30rpx;\r\n\t\tbackground: #fff;\r\n\r\n\t\t.search-box {\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t\theight: 80rpx;\r\n\t\t\tpadding: 0 30rpx;\r\n\t\t\tbackground: #f8f8f8;\r\n\t\t\tborder-radius: 40rpx;\r\n\r\n\t\t\t.search-input {\r\n\t\t\t\tflex: 1;\r\n\t\t\t\theight: 100%;\r\n\t\t\t\tmargin-left: 20rpx;\r\n\t\t\t\tfont-size: 28rpx;\r\n\t\t\t}\r\n\r\n\t\t\t.placeholder {\r\n\t\t\t\tcolor: #999;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.category-nav {\r\n\t\twhite-space: nowrap;\r\n\t\tbackground: #fff;\r\n\t\tpadding: 20rpx 0;\r\n\r\n\t\t.category-item {\r\n\t\t\tdisplay: inline-block;\r\n\t\t\tposition: relative;\r\n\t\t\tpadding: 0 40rpx;\r\n\t\t\tfont-size: 30rpx;\r\n\t\t\tcolor: #666;\r\n\t\t\ttransition: color 0.3s;\r\n\r\n\t\t\t&.active {\r\n\t\t\t\tcolor: #007AFF;\r\n\t\t\t\tfont-weight: bold;\r\n\t\t\t}\r\n\r\n\t\t\t.indicator {\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\tbottom: -10rpx;\r\n\t\t\t\tleft: 50%;\r\n\t\t\t\ttransform: translateX(-50%);\r\n\t\t\t\twidth: 40rpx;\r\n\t\t\t\theight: 6rpx;\r\n\t\t\t\tbackground: #007AFF;\r\n\t\t\t\tborder-radius: 3rpx;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.news-list {\r\n\t\tpadding: 30rpx;\r\n\r\n\t\t.news-item {\r\n\t\t\twidth: 700rpx;\r\n\t\t\tdisplay: flex;\r\n\t\t\tmargin-bottom: 30rpx;\r\n\t\t\tbackground: #fff;\r\n\t\t\tborder-radius: 16rpx;\r\n\t\t\toverflow: hidden;\r\n\t\t\tbox-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.05);\r\n\r\n\t\t\t.news-image {\r\n\t\t\t\tmargin: 20rpx;\r\n\t\t\t\twidth: 250rpx;\r\n\t\t\t\theight: 250rpx;\r\n\t\t\t\tflex-shrink: 0;\r\n\t\t\t}\r\n\r\n\t\t\t.news-content {\r\n\t\t\t\tflex: 1;\r\n\t\t\t\tpadding: 20rpx;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-direction: column;\r\n\r\n\t\t\t\t.news-title {\r\n\t\t\t\t\tfont-size: 32rpx;\r\n\t\t\t\t\tcolor: #333;\r\n\t\t\t\t\tline-height: 1.4;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.news-summary {\r\n\t\t\t\t\tmargin-top: 16rpx;\r\n\t\t\t\t\tfont-size: 26rpx;\r\n\t\t\t\t\tcolor: #666;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.news-meta {\r\n\t\t\t\t\tmargin-top: auto;\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\talign-items: center;\r\n\t\t\t\t\tfont-size: 24rpx;\r\n\t\t\t\t\tcolor: #999;\r\n\r\n\t\t\t\t\t.meta-item {\r\n\t\t\t\t\t\tmargin-right: 30rpx;\r\n\t\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\t\talign-items: center;\r\n\r\n\t\t\t\t\t\tuni-icons {\r\n\t\t\t\t\t\t\tmargin-right: 8rpx;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// 文本溢出处理\r\n\t@mixin text-overflow($line: 1) {\r\n\t\t@if $line ==1 {\r\n\t\t\toverflow: hidden;\r\n\t\t\ttext-overflow: ellipsis;\r\n\t\t\twhite-space: nowrap;\r\n\t\t}\r\n\r\n\t\t@else {\r\n\t\t\tdisplay: -webkit-box;\r\n\t\t\t-webkit-box-orient: vertical;\r\n\t\t\t-webkit-line-clamp: $line;\r\n\t\t\toverflow: hidden;\r\n\t\t}\r\n\t}\r\n</style>","import MiniProgramPage from 'E:/小程序转app/xcbapp/subPackages/shoppingPageList/realTimeInfo/realTimeInfo.vue'\nwx.createPage(MiniProgramPage)"],"names":["myMixin","api","uni"],"mappings":";;;;AA8CC,MAAK,YAAU;AAAA,EACd,QAAQ,CAACA,aAAAA,OAAO;AAAA,EAChB,OAAO;AACN,WAAO;AAAA,MACN,gBAAgB;AAAA,MAChB,YAAY;AAAA,MACZ,cAAc;AAAA,MACd,YAAY,CAAE;AAAA,MACd,OAAO;AAAA,QACN,eAAe;AAAA;AAAA,QACf,MAAM;AAAA,QACN,OAAO;AAAA,MACP;AAAA,MACD,UAAU,CAET;AAAA,MACD,QAAO;AAAA,IACR;AAAA,EACA;AAAA,EACD,UAAU;AACT,SAAK,iBAAiB;AACtB,SAAK,mBAAmB;AACxB,SAAK,QAAQ;AAAA,EAEb;AAAA,EACD,OAAO;AAAA,IACN,eAAe,UAAU,UAAU;AAElC,WAAK,MAAM,OAAO;AAElB,WAAK,SAAS;AAGd,WAAK,MAAM,gBAAgB,KAAK,WAAW,QAAQ,EAAE;AACrD,WAAK,QAAQ,IAAI;AAAA,IAClB;AAAA,EACA;AAAA,EACD,SAAS;AAAA;AAAA,IAER,aAAY;AACX,UAAI,CAAC,KAAK,QAAO;AAChB,aAAK,MAAM,QAAM;AACjB,aAAK,QAAQ;AAAA,MACd;AAAA,IACA;AAAA;AAAA,IAED,MAAM,qBAAqB;AAC1B,UAAI,OAAO,MAAMC,cAAI,eAAe,CAAA,CAAE;AACtC,UAAI,KAAK,QAAQ,KAAK;AACrB,YAAI,UAAU,KAAK,KAAK,IAAI,CAAC,MAAM,UAAU;AAC5C,iBAAO;AAAA,YACN,IAAI;AAAA,YACJ,MAAM;AAAA,UACP;AAAA,SACA;AACDC,sBAAAA,MAAY,MAAA,OAAA,qEAAA,OAAO;AACnB,aAAK,aAAa,CAAC,EAAC,IAAG,IAAG,MAAK,KAAI,GAAE,GAAG,OAAO;AAAA,MAChD;AAAA,IACA;AAAA,IAED,MAAM,QAAQ,OAAK,OAAO;AACzB,UAAI,OAAO,MAAMD,UAAAA,IAAI,gBAAgB,KAAK,KAAK;AAC/C,UAAI,KAAK,QAAQ,KAAK;AACrB,YAAI,CAAC,MAAK;AACT,eAAK,WAAW,CAAC,GAAG,KAAK,UAAU,GAAG,KAAK,KAAK,QAAQ;AAAA,eACpD;AACJ,eAAK,WAAW,KAAK,KAAK;AAAA,QAC3B;AACA,aAAK,SAAS,KAAK,KAAK,SAAS,SAAS,KAAK,MAAM,QAAQ,OAAO;AAAA,MACrE;AAAA,IACA;AAAA,IACD,mBAAmB;AAClB,YAAM,aAAaC,cAAG,MAAC,kBAAkB;AACzC,WAAK,eAAe,WAAW,eAAe;AAAA,IAC9C;AAAA;AAAA,IAGD,eAAe,OAAO;AACrB,WAAK,iBAAiB;AACtB,WAAK,MAAM,gBAAgB,KAAK,WAAW,KAAK,EAAE;AAAA,IAClD;AAAA,IACD,cAAc,GAAG;AAChB,WAAK,aAAa,EAAE,OAAO,MAAM,KAAK;AAAA,IACtC;AAAA,IACD,iBAAiB,MAAM;AACtB,UAAI,UAAU,mBAAmB,KAAK,OAAO;AAC7CA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK,+EAA+E,OAAO,eAAe,KAAK,SAAS,KAAK,UAAU,CAAC;AAAA,OACxI;AAAA,IAEF;AAAA,EACD;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzID,GAAG,WAAW,eAAe;"}