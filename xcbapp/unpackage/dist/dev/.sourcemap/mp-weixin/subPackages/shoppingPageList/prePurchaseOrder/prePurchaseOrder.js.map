{"version":3,"file":"prePurchaseOrder.js","sources":["subPackages/shoppingPageList/prePurchaseOrder/prePurchaseOrder.vue","D:/HBuilderX/plugins/uniapp-cli-vite/uniPage:/c3ViUGFja2FnZXNcc2hvcHBpbmdQYWdlTGlzdFxwcmVQdXJjaGFzZU9yZGVyXHByZVB1cmNoYXNlT3JkZXIudnVl"],"sourcesContent":["<template>\r\n  <view class=\"container\">\r\n    <!-- 头部统计 -->\r\n    <view class=\"header\">\r\n      <text class=\"title\">我的预购订单</text>\r\n      <view class=\"stats\">\r\n        <text>进行中 {{ processingCount }} 笔</text>\r\n        <text>总金额 ¥{{ totalAmount }}</text>\r\n      </view>\r\n    </view>\r\n\r\n    <!-- 状态筛选 -->\r\n    <view class=\"status-tabs\">\r\n      <view \r\n        v-for=\"tab in statusTabs\"\r\n        :key=\"tab.value\"\r\n        :class=\"['tab-item', { active: activeStatus === tab.value }]\"\r\n        @click=\"changeStatus(tab.value)\"\r\n      >\r\n        <text>{{ tab.label }}</text>\r\n        <view v-if=\"activeStatus === tab.value\" class=\"indicator\"></view>\r\n      </view>\r\n    </view>\r\n\r\n    <!-- 订单列表 -->\r\n    <scroll-view \r\n      scroll-y \r\n      class=\"order-list\"\r\n      @refresherrefresh=\"onRefresh\"\r\n      @scrolltolower=\"loadMore\"\r\n      refresher-enabled\r\n    >\r\n      <view \r\n        v-for=\"order in filteredOrders\"\r\n        :key=\"order.id\"\r\n        class=\"order-item\"\r\n        @click=\"viewDetail(order.id)\"\r\n      >\r\n        <view class=\"order-header\">\r\n          <text class=\"order-no\">订单号：{{ order.orderNo }}</text>\r\n          <view :class=\"['status-tag', order.status]\">\r\n            {{ statusMap[order.status] }}\r\n          </view>\r\n        </view>\r\n\r\n        <view class=\"goods-info\">\r\n          <image :src=\"order.goodsImage\" class=\"goods-image\" />\r\n          <view class=\"goods-detail\">\r\n            <text class=\"goods-name\">{{ order.goodsName }}</text>\r\n            <text class=\"quantity\">x{{ order.quantity }}</text>\r\n            <view class=\"price-info\">\r\n              <text class=\"deposit\">定金：¥{{ order.deposit }}</text>\r\n              <text class=\"final\">尾款：¥{{ order.finalPayment }}</text>\r\n            </view>\r\n          </view>\r\n        </view>\r\n\r\n        <view class=\"footer-info\">\r\n          <text class=\"pickup-info\">\r\n            <uni-icons type=\"shop\" size=\"14\" />\r\n            {{ order.pickupPoint }} · {{ order.pickupTime }}\r\n          </text>\r\n          <view class=\"actions\">\r\n            <button \r\n              v-if=\"order.status === 'wait_pay'\"\r\n              class=\"btn mini\"\r\n              @click.stop=\"payFinal(order.id)\"\r\n            >\r\n              支付尾款\r\n            </button>\r\n            <button \r\n              v-if=\"order.status === 'completed'\"\r\n              class=\"btn mini\"\r\n              @click.stop=\"applyAfterSales(order.id)\"\r\n            >\r\n              申请售后\r\n            </button>\r\n          </view>\r\n        </view>\r\n      </view>\r\n\r\n      <!-- 加载状态 -->\r\n      <view class=\"loading-status\">\r\n        <text v-if=\"loading\">加载中...</text>\r\n        <text v-else-if=\"noMore\">没有更多订单了</text>\r\n      </view>\r\n    </scroll-view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      activeStatus: 'all',\r\n      statusTabs: [\r\n        { label: '全部', value: 'all' },\r\n        { label: '待提货', value: 'wait_pickup' },\r\n        { label: '已完成', value: 'completed' }\r\n      ],\r\n      orders: [],\r\n      loading: false,\r\n      noMore: false,\r\n      statusMap: {\r\n        'wait_pickup': '待提货',\r\n        'completed': '已完成',\r\n        'canceled': '已取消'\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    filteredOrders() {\r\n      if (this.activeStatus === 'all') return this.orders\r\n      return this.orders.filter(o => o.status === this.activeStatus)\r\n    },\r\n    processingCount() {\r\n      return this.orders.filter(o => \r\n        ['wait_pay', 'wait_pickup'].includes(o.status)\r\n      ).length\r\n    },\r\n    totalAmount() {\r\n      return this.orders.reduce((sum, o) => sum + (o.deposit + o.finalPayment), 0)\r\n        .toFixed(2)\r\n    }\r\n  },\r\n  mounted() {\r\n    this.loadData()\r\n  },\r\n  methods: {\r\n    async loadData() {\r\n      this.loading = true\r\n      try {\r\n        // 模拟接口请求\r\n        await new Promise(resolve => setTimeout(resolve, 100))\r\n        this.orders = this.getMockData()\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    },\r\n\r\n    getMockData() {\r\n      return [\r\n        {\r\n          id: 1,\r\n          orderNo: 'xcbdsc20251128001',\r\n          status: 'completed',\r\n          goodsImage: 'https://img1.baidu.com/it/u=2670186960,2836929917&fm=253&fmt=auto&app=138&f=JPEG?w=667&h=500',\r\n          goodsName: '定安黑猪',\r\n          quantity: 2,\r\n          deposit: 60,\r\n          finalPayment: 196,\r\n          pickupPoint: '猪肉铺小吴',\r\n          pickupTime: '12月5日 14:00-18:00'\r\n        },\r\n      ]\r\n    },\r\n\r\n    changeStatus(status) {\r\n      this.activeStatus = status\r\n    },\r\n\r\n    onRefresh() {\r\n      this.loadData()\r\n    },\r\n\r\n    loadMore() {\r\n      if (!this.noMore) {\r\n        // 分页加载逻辑\r\n      }\r\n    },\r\n\r\n    viewDetail(id) {\r\n      uni.navigateTo({\r\n        url: `/pages/preorder/detail?id=${id}`\r\n      })\r\n    },\r\n\r\n    payFinal(id) {\r\n      uni.showModal({\r\n        title: '支付尾款',\r\n        content: '确认支付尾款金额？',\r\n        success: (res) => {\r\n          if (res.confirm) {\r\n            // 调用支付接口\r\n          }\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.container {\r\n  background: #f8f8f8;\r\n  min-height: 100vh;\r\n}\r\n\r\n.header {\r\n  padding: 24rpx 32rpx;\r\n  background: #fff;\r\n  \r\n  .title {\r\n    font-size: 40rpx;\r\n    font-weight: 600;\r\n    color: #333;\r\n  }\r\n  \r\n  .stats {\r\n    margin-top: 16rpx;\r\n    display: flex;\r\n    gap: 32rpx;\r\n    color: #666;\r\n    font-size: 26rpx;\r\n  }\r\n}\r\n\r\n.status-tabs {\r\n  display: flex;\r\n  background: #fff;\r\n  padding: 20rpx 0;\r\n  \r\n  .tab-item {\r\n    flex: 1;\r\n    text-align: center;\r\n    font-size: 28rpx;\r\n    color: #666;\r\n    position: relative;\r\n    \r\n    &.active {\r\n      color: #007AFF;\r\n      font-weight: 500;\r\n      \r\n      .indicator {\r\n        position: absolute;\r\n        bottom: 0;\r\n        left: 50%;\r\n        transform: translateX(-50%);\r\n        width: 60rpx;\r\n        height: 4rpx;\r\n        background: #007AFF;\r\n        border-radius: 2rpx;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n.order-list {\r\n  height: calc(100vh - 280rpx);\r\n  padding: 20rpx;\r\n}\r\n\r\n.order-item {\r\n  background: #fff;\r\n  border-radius: 16rpx;\r\n  margin-bottom: 20rpx;\r\n  padding: 24rpx;\r\n  \r\n  .order-header {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    margin-bottom: 24rpx;\r\n    \r\n    .order-no {\r\n      color: #666;\r\n      font-size: 26rpx;\r\n    }\r\n    \r\n    .status-tag {\r\n      font-size: 24rpx;\r\n      padding: 6rpx 20rpx;\r\n      border-radius: 30rpx;\r\n      \r\n      &.wait_pay {\r\n        background: #fff0e8;\r\n        color: #ff5a00;\r\n      }\r\n      \r\n      &.wait_pickup {\r\n        background: #e8f4ff;\r\n        color: #007AFF;\r\n      }\r\n      \r\n      &.completed {\r\n        background: #e8ffec;\r\n        color: #07c160;\r\n      }\r\n    }\r\n  }\r\n\r\n  .goods-info {\r\n    display: flex;\r\n    gap: 20rpx;\r\n    \r\n    .goods-image {\r\n      width: 160rpx;\r\n      height: 160rpx;\r\n      border-radius: 8rpx;\r\n    }\r\n    \r\n    .goods-detail {\r\n      flex: 1;\r\n      \r\n      .goods-name {\r\n        font-size: 30rpx;\r\n        color: #333;\r\n      }\r\n      \r\n      .quantity {\r\n        color: #666;\r\n        font-size: 26rpx;\r\n        margin: 8rpx 0;\r\n      }\r\n      \r\n      .price-info {\r\n        display: flex;\r\n        gap: 20rpx;\r\n        \r\n        .deposit {\r\n          color: #999;\r\n          font-size: 26rpx;\r\n        }\r\n        \r\n        .final {\r\n          color: #e4393c;\r\n          font-size: 28rpx;\r\n          font-weight: bold;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  .footer-info {\r\n    margin-top: 24rpx;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    \r\n    .pickup-info {\r\n      color: #666;\r\n      font-size: 26rpx;\r\n      display: flex;\r\n      align-items: center;\r\n      \r\n      uni-icons {\r\n        margin-right: 8rpx;\r\n      }\r\n    }\r\n    \r\n    .btn {\r\n      height: 56rpx;\r\n      line-height: 56rpx;\r\n      padding: 0 32rpx;\r\n      font-size: 26rpx;\r\n      \r\n      &.mini {\r\n        border: 1rpx solid #007AFF;\r\n        color: #007AFF;\r\n        background: #fff;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n.loading-status {\r\n  text-align: center;\r\n  padding: 30rpx;\r\n  color: #999;\r\n  font-size: 28rpx;\r\n}\r\n</style>\r\n","import MiniProgramPage from 'E:/小程序转app/xcbapp/subPackages/shoppingPageList/prePurchaseOrder/prePurchaseOrder.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":";;AA2FA,MAAK,YAAU;AAAA,EACb,OAAO;AACL,WAAO;AAAA,MACL,cAAc;AAAA,MACd,YAAY;AAAA,QACV,EAAE,OAAO,MAAM,OAAO,MAAO;AAAA,QAC7B,EAAE,OAAO,OAAO,OAAO,cAAe;AAAA,QACtC,EAAE,OAAO,OAAO,OAAO,YAAY;AAAA,MACpC;AAAA,MACD,QAAQ,CAAE;AAAA,MACV,SAAS;AAAA,MACT,QAAQ;AAAA,MACR,WAAW;AAAA,QACT,eAAe;AAAA,QACf,aAAa;AAAA,QACb,YAAY;AAAA,MACd;AAAA,IACF;AAAA,EACD;AAAA,EACD,UAAU;AAAA,IACR,iBAAiB;AACf,UAAI,KAAK,iBAAiB;AAAO,eAAO,KAAK;AAC7C,aAAO,KAAK,OAAO,OAAO,OAAK,EAAE,WAAW,KAAK,YAAY;AAAA,IAC9D;AAAA,IACD,kBAAkB;AAChB,aAAO,KAAK,OAAO;AAAA,QAAO,OACxB,CAAC,YAAY,aAAa,EAAE,SAAS,EAAE,MAAM;AAAA,MAC/C,EAAE;AAAA,IACH;AAAA,IACD,cAAc;AACZ,aAAO,KAAK,OAAO,OAAO,CAAC,KAAK,MAAM,OAAO,EAAE,UAAU,EAAE,eAAe,CAAC,EACxE,QAAQ,CAAC;AAAA,IACd;AAAA,EACD;AAAA,EACD,UAAU;AACR,SAAK,SAAS;AAAA,EACf;AAAA,EACD,SAAS;AAAA,IACP,MAAM,WAAW;AACf,WAAK,UAAU;AACf,UAAI;AAEF,cAAM,IAAI,QAAQ,aAAW,WAAW,SAAS,GAAG,CAAC;AACrD,aAAK,SAAS,KAAK,YAAY;AAAA,MACjC,UAAU;AACR,aAAK,UAAU;AAAA,MACjB;AAAA,IACD;AAAA,IAED,cAAc;AACZ,aAAO;AAAA,QACL;AAAA,UACE,IAAI;AAAA,UACJ,SAAS;AAAA,UACT,QAAQ;AAAA,UACR,YAAY;AAAA,UACZ,WAAW;AAAA,UACX,UAAU;AAAA,UACV,SAAS;AAAA,UACT,cAAc;AAAA,UACd,aAAa;AAAA,UACb,YAAY;AAAA,QACb;AAAA,MACH;AAAA,IACD;AAAA,IAED,aAAa,QAAQ;AACnB,WAAK,eAAe;AAAA,IACrB;AAAA,IAED,YAAY;AACV,WAAK,SAAS;AAAA,IACf;AAAA,IAED,WAAW;AACT,UAAI,CAAC,KAAK;AAAQ;AAAA,IAGnB;AAAA,IAED,WAAW,IAAI;AACbA,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAK,6BAA6B,EAAE;AAAA,OACrC;AAAA,IACF;AAAA,IAED,SAAS,IAAI;AACXA,oBAAAA,MAAI,UAAU;AAAA,QACZ,OAAO;AAAA,QACP,SAAS;AAAA,QACT,SAAS,CAAC,QAAQ;AAChB,cAAI,IAAI;AAAS;AAAA,QAGnB;AAAA,OACD;AAAA,IACH;AAAA,EACF;AACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC5LA,GAAG,WAAW,eAAe;"}