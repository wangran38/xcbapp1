{"version":3,"file":"purchase.js","sources":["subPackages/Wholesale/purchase/purchase.vue","D:/HBuilderX/plugins/uniapp-cli-vite/uniPage:/c3ViUGFja2FnZXNcV2hvbGVzYWxlXHB1cmNoYXNlXHB1cmNoYXNlLnZ1ZQ"],"sourcesContent":["<template>\n  <view class=\"purchase-container\">\n    <!-- 筛选栏 -->\n    <view class=\"filter-bar\">\n     <view class=\"search\">\r\n     \t<uni-icons type=\"search\" style=\"margin: 10rpx; font-size: 33rpx;\"></uni-icons>\r\n     \t<input class=\"serchInput\" type=\"text\" placeholder=\"请输入关键字\">\r\n     \t<view style=\"display: flex;\">\r\n     \t\t<button class=\"btn\" type=\"primary\">搜索</button>\r\n     \t\t<button class=\"btn\" type=\"warn\">重置</button>\r\n     \t</view>\r\n     </view>\r\n\t <view class=\"filter-group\">\r\n\t \r\n\t \t<picker @change=\"categoryChange\" :range=\"categories\" range-key=\"label\">\r\n\t \t\t<view class=\"filter-btn\">\r\n\t \t\t\t<uni-icons type=\"tags\" size=\"16\" color=\"#3a7afe\" />\r\n\t \t\t\t<text class=\"btn-text\">{{ categories[selectedCategoryIndex].label }}</text>\r\n\t \t\t\t<uni-icons type=\"arrowdown\" size=\"14\" color=\"#3a7afe\" />\r\n\t \t\t</view>\r\n\t \t</picker>\r\n\t \r\n\t \t<picker :range=\"distances\" range-key=\"label\">\r\n\t \t\t<view class=\"filter-btn\">\r\n\t \t\t\t<uni-icons type=\"tags\" size=\"16\" color=\"#3a7afe\" />\r\n\t \t\t\t<text class=\"btn-text\">{{ distances[selectedCategoryIndex].label }}</text>\r\n\t \t\t\t<uni-icons type=\"arrowdown\" size=\"14\" color=\"#3a7afe\" />\r\n\t \t\t</view>\r\n\t \t</picker>\r\n\t \r\n\t </view>\r\n\t \n    </view>\n\n    <!-- 采购列表 -->\n    <scroll-view class=\"purchase-list\" scroll-y @scrolltolower=\"loadMore\">\n      <view \n        class=\"purchase-card\"\n        v-for=\"(item, index) in purchaseList\"\n        :key=\"index\"\n        @click=\"viewDetail(item.id)\"\n      >\n        <!-- 卡片头部 -->\n        <view class=\"card-header\">\n          <view class=\"header-left\">\n            <!-- <uni-icons type=\"hand-up\" size=\"20\" color=\"#3a7afe\" /> -->\n            <text class=\"title\">{{ item.infotitle }}</text>\n          </view>\n          <!-- <view class=\"status-badge\" :class=\"item.status\">\n            <text>{{ item.statusText }}</text>\n            <view class=\"pulse-dot\"></view>\n          </view> -->\n        </view>\n\n        <!-- 采购详情 -->\n        <view class=\"detail-row\">\n          <view class=\"detail-item\">\n            <uni-icons type=\"balance\" size=\"18\" color=\"#999\" />\n            <text class=\"detail-text\">数量:{{ item.infonumber }}{{ item.unit }}</text>\n          </view>\n        </view>\n\n        <!-- 公司信息 -->\n       <view class=\"company-info\">\n          <!-- <image class=\"company-logo\" :src=\"item.company.logo\" /> -->\n          <view class=\"company-detail\">\n            <text class=\"company-name\">{{ item.buyaddress }}</text>\n<!--            <view class=\"verify-tag\" v-if=\"item.company.verified\">\n              <uni-icons type=\"checkmark\" size=\"12\" color=\"#fff\" />\n              <text>认证企业</text>\n            </view> -->\n          </view>\n        </view>\n\n        <!-- 底部信息 -->\n        <view class=\"card-footer\">\n          <view class=\"deadline\">\n            <uni-icons type=\"calendar\" size=\"16\" color=\"#666\" />\n            <text>{{ initDate(item.stoptime) }} 截止</text>\n          </view>\n          <view class=\"action-btn\" @click.stop=\"contactSupplier(item.id)\">\n            <text>立即报价</text>\n            <uni-icons type=\"arrow-right\" size=\"14\" color=\"#fff\" />\n          </view>\n        </view>\n      </view>\n\n      <!-- 加载状态 -->\n      <view class=\"load-status\">\n        <text v-if=\"loading\" class=\"loading-text\">加载中...</text>\n        <text v-else-if=\"noMore\" class=\"no-more\">- 已显示全部内容 -</text>\n      </view>\n    </scroll-view>\n  </view>\n</template>\n\n<script>\n\timport {api} from '@/api/index.js'\n\timport {myMixin} from '@/utils/public.js'\nexport default {\n\tmixins:[myMixin],\n  data() {\n    return {\n      categories: [\n        { label: '全部采购', value: 'all' },\n        { label: '肉类', value: 'material' },\n        { label: '蔬菜', value: 'equipment' },\n        { label: '蛋类', value: 'service' }\n      ],\n      sortOptions: [\n        { label: '智能排序', value: 'default' },\n        { label: '预算最高', value: 'budget_desc' },\n        { label: '最新发布', value: 'newest' }\n      ],\n      selectedCategory: { label: '全部采购', value: 'all' },\n      selectedSort: { label: '智能排序', value: 'default' },\n      purchaseList: [],\n      page: 1,\n      loading: false,\n      noMore: false,\n\t  query:{\n\t\t  area_id:null,\n\t\t  stoptime:null,\n\t\t  page:1,\n\t\t  limit:20\n\t  },\r\n\t  selectedCategoryIndex:0,\r\n\t  distances: [{\r\n\t  \t\tlabel: '离我最近',\r\n\t  \t\tvalue: ''\r\n\t  \t},\r\n\t  \t{\r\n\t  \t\tlabel: '离我最远',\r\n\t  \t\tvalue: ''\r\n\t  \t},\r\n\t  ],\r\n\t  categories: [{\r\n\t  \t\tlabel: '所有分类',\r\n\t  \t\tvalue: ''\r\n\t  \t},\r\n\t  \t{\r\n\t  \t\tlabel: '菜类',\r\n\t  \t\tvalue: ''\r\n\t  \t},\r\n\t  \t{\r\n\t  \t\tlabel: '肉类',\r\n\t  \t\tvalue: ''\r\n\t  \t}\r\n\t  ],\n    }\n  },\n  created() {\n    this.loadData()\n  },\n  methods: {\n    // 加载数据\n    async loadData() {\n      if (this.loading || this.noMore) return\n      \n      this.loading = true\n      try {\n        // 模拟API请求\n\t\t let data = await api.buyinfoList(this.query)\n        // const mockData = Array.from({length: 5}, (_, i) => ({\n        //   id: this.page * 10 + i,\n        //   title: `采购${['鸡蛋', '槟榔苗', '蜂蜜', '猪肉'][i%4]}`,\n        //   quantity: Math.floor(Math.random() * 1000),\n        //   unit: ['个', '枝', '斤', '斤'][i%4],\n        //   budget: (Math.random() * 500 + 50).toFixed(1),\n        //   deadline: this.generateDeadline(),\n        //   status: ['processing', 'urgent'][i%2],\n        //   statusText: ['招标中', '紧急采购'][i%2],\n        //   company: {\n        //     name: `企业${String.fromCharCode(65 + i%26)}`,\n        //     logo: `https://picsum.photos/40/40?c=${i}`,\n        //     verified: i%3 === 0\n        //   }\n        // }))\n        \n        this.purchaseList = [...this.purchaseList, ...data.data.listdata]\n\t\tconsole.log(this.purchaseList)\n        this.page++\n        this.noMore = this.page > 2\n      } finally {\n        this.loading = false\n      }\n    },\n\n    // 生成截止日期\n    generateDeadline() {\n      const date = new Date()\n      date.setDate(date.getDate() + Math.floor(Math.random() * 7 + 3))\n      return `${date.getMonth()+1}月${date.getDate()}日`\n    },\n\n    // 分类改变\n    categoryChange(e) {\n      this.selectedCategory = this.categories[e.detail.value]\n      this.resetList()\n    },\n\n    // 排序改变\n    sortChange(e) {\n      this.selectedSort = this.sortOptions[e.detail.value]\n      this.resetList()\n    },\n\n    // 重置列表\n    resetList() {\n      this.page = 1\n      this.purchaseList = []\n      this.noMore = false\n      this.loadData()\n    },\n\n    // 查看详情\n    viewDetail(id) {\n      uni.navigateTo({\n        url: `/pages/purchase/detail?id=${id}`\n      })\n    },\n\n    // 联系供应商\n    contactSupplier(id) {\n      uni.showActionSheet({\n        items: ['在线沟通', '电话联系', '邮件联系'],\n        success: res => console.log('联系方式:', res.tapIndex)\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\r\n\t.search {\r\n\t\theight: 60rpx;\r\n\t\t/* border-radius: 50rpx; */\r\n\t\tpadding: 5rpx;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t\tborder: 1rpx solid #dcdfe6;\r\n\t\toverflow: hidden;\r\n\t\tborder-radius: 15rpx;\r\n\t}\r\n\t\r\n\t.search .btn {\r\n\t\theight: 50%;\r\n\t\ttext-align: center;\r\n\t\tmargin: 0;\r\n\t\tborder-radius: 0;\r\n\t\tmargin: 5rpx;\r\n\t\tborder-radius: 15rpx;\r\n\t}\r\n\t\r\n\t.search .serchInput {\r\n\t\tcolor:black;\r\n\t\tfont-size: 30rpx;\r\n\t\tmargin: 0;\r\n\t\theight: 100%;\r\n\t\t\r\n\t}\n\t\n.purchase-container {\n  background: #f8f9fb;\n  min-height: 100vh;\n  .filter-bar {\n    padding: 24rpx 32rpx;\n    background: #fff;\n    box-shadow: 0 4rpx 16rpx rgba(0,0,0,0.04);\n\n    .filter-group {\r\n    \tmargin: 10rpx;\r\n    \tdisplay: flex;\r\n    \tgap: 30rpx;\r\n    \talign-items: center;\r\n    \r\n    \t.filter-btn {\r\n    \t\tdisplay: flex;\r\n    \t\talign-items: center;\r\n    \t\tpadding: 12rpx 24rpx;\r\n    \t\tborder-radius: 40rpx;\r\n    \t\tbackground: #f5f7fa;\r\n    \t\tborder: 1rpx solid #e4e7ed;\r\n    \t}\r\n    }\n  }\n\n  /* 采购列表样式 */\n  .purchase-list {\n    padding: 32rpx;\n\n    .purchase-card {\n\t\twidth: 84%;\n      background: #fff;\n      border-radius: 16rpx;\n      padding: 32rpx;\n      margin-bottom: 24rpx;\n      box-shadow: 0 4rpx 16rpx rgba(0,0,0,0.04);\n      transition: transform 0.2s;\n\n      &:active {\n        transform: scale(0.98);\n      }\n\n      /* 卡片头部 */\n      .card-header {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        margin-bottom: 24rpx;\n        padding-bottom: 24rpx;\n        border-bottom: 1px solid rgba(#3a7afe, 0.1);\n\n        .header-left {\n          display: flex;\n          align-items: center;\n          gap: 16rpx;\n\n          .title {\n            font-size: 32rpx;\n            font-weight: 600;\n            color: #2d3436;\n            line-height: 1.4;\n          }\n        }\n\n        .status-badge {\n          display: flex;\n          align-items: center;\n          gap: 8rpx;\n          padding: 8rpx 20rpx;\n          border-radius: 32rpx;\n          font-size: 24rpx;\n\n          &[class*=\"processing\"] {\n            background: rgba(#00c853, 0.08);\n            color: #00c853;\n          }\n\n          &[class*=\"urgent\"] {\n            background: rgba(#ff4444, 0.08);\n            color: #ff4444;\n          }\n\n          .pulse-dot {\n            width: 12rpx;\n            height: 12rpx;\n            background: currentColor;\n            border-radius: 50%;\n            animation: pulse 1.5s infinite;\n          }\n        }\n      }\n\n      /* 采购详情 */\n      .detail-row {\n        display: flex;\n        gap: 48rpx;\n        margin-bottom: 32rpx;\n\n        .detail-item {\n          display: flex;\n          align-items: center;\n          gap: 8rpx;\n\n          .detail-text {\n            font-size: 26rpx;\n            color: #666;\n          }\n        }\n      }\n\n      /* 公司信息 */\n      .company-info {\n        display: flex;\n        align-items: center;\n        gap: 16rpx;\n        margin-bottom: 32rpx;\n\n        .company-logo {\n          width: 64rpx;\n          height: 64rpx;\n          border-radius: 8rpx;\n        }\n\n        .company-detail {\n          flex: 1;\n\n          .company-name {\n            font-size: 28rpx;\n            color: #333;\n            margin-bottom: 8rpx;\n          }\n\n          .verify-tag {\n\t\t\t  margin: 0 0 0 10rpx;\n            display: inline-flex;\n            align-items: center;\n            gap: 4rpx;\n            padding: 4rpx 12rpx;\n            background: #3a7afe;\n            border-radius: 8rpx;\n            color: #fff;\n            font-size: 22rpx;\n          }\n        }\n      }\n\n      /* 底部信息 */\n      .card-footer {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        padding-top: 24rpx;\n        border-top: 1px solid #eee;\n\n        .deadline {\n          display: flex;\n          align-items: center;\n          gap: 8rpx;\n          color: #666;\n          font-size: 26rpx;\n        }\n\n        .action-btn {\n          display: flex;\n          align-items: center;\n          gap: 8rpx;\n          padding: 12rpx 32rpx;\n          background: #3a7afe;\n          color: #fff;\n          border-radius: 48rpx;\n          font-size: 26rpx;\n        }\n      }\n    }\n\n    /* 加载状态 */\n    .load-status {\n      text-align: center;\n      padding: 40rpx;\n      color: #999;\n      font-size: 26rpx;\n    }\n  }\n}\n\n@keyframes pulse {\n  0% { opacity: 0.6; }\n  50% { opacity: 1; }\n  100% { opacity: 0.6; }\n}\n</style>","import MiniProgramPage from 'E:/小程序转app/xcbapp/subPackages/Wholesale/purchase/purchase.vue'\nwx.createPage(MiniProgramPage)"],"names":["myMixin","api","uni"],"mappings":"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"}