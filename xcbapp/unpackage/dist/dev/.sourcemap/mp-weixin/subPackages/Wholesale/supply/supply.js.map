{"version":3,"file":"supply.js","sources":["subPackages/Wholesale/supply/supply.vue","D:/HBuilderX/plugins/uniapp-cli-vite/uniPage:/c3ViUGFja2FnZXNcV2hvbGVzYWxlXHN1cHBseVxzdXBwbHkudnVl"],"sourcesContent":["<template>\n  <view class=\"supply-container\">\n    <!-- 筛选搜索区域 -->\n    <view class=\"filter-section\">\n      <!-- 搜索 + 按钮区域 -->\n      <view class=\"search-bar\">\n        <input\n          class=\"search-input\"\n          type=\"text\"\n          placeholder=\"请输入关键字\"\n          v-model=\"searchText\"\n        />\n        <button class=\"search-btn\" @click=\"handleSearch\">搜索</button>\n        <button class=\"reset-btn\" @click=\"handleReset\">重置</button>\n      </view>\n      <!-- 分类筛选区域 -->\n      <view class=\"filter-group\">\n        <picker\n          @change=\"categoryChange\"\n          :range=\"categories\"\n          range-key=\"label\"\n        >\n          <view class=\"filter-btn\">\n            {{ categories[selectedCategoryIndex].label }}\n          </view>\n        </picker>\n        <picker :range=\"distances\" range-key=\"label\">\n          <view class=\"filter-btn\">\n            {{ distances[selectedDistanceIndex].label }}\n          </view>\n        </picker>\n      </view>\n    </view>\n\n    <!-- 商品列表区域 -->\n    <scroll-view\n      class=\"goods-list\"\n      scroll-y\n      @scrolltolower=\"loadMore\"\n      :scroll-with-animation=\"true\"\n    >\n      <view class=\"goods-grid\">\n        <view\n          class=\"goods-card\"\n          v-for=\"(item, index) in goodsList\"\n          :key=\"index\"\n          @click=\"goDetail(item.id)\"\n        >\n          <!-- 商品图片 -->\n          <view class=\"image-container\">\n            <image\n              class=\"goods-image\"\n              :src=\"item.selllogo\"\n              mode=\"aspectFill\"\n              :lazy-load=\"true\"\n            />\n            <view class=\"goods-tag\" v-if=\"item.tag\">\n              {{ item.tag }}\n            </view>\n          </view>\n          <!-- 商品信息 -->\n          <view class=\"goods-content\">\n            <text class=\"goods-title\">{{ item.selltitle }}</text>\n            <view class=\"price-section\">\n              <text class=\"current-price\">￥{{ item.marketprice }}</text>\n              <text class=\"original-price\" v-if=\"item.price\">\n                ￥{{ item.price }}\n              </text>\n            </view>\n            <view class=\"action-bar\">\n              <view class=\"sales-info\">\n                <uni-icons type=\"shop\" size=\"12\" color=\"#666\"></uni-icons>\n                <text>{{ item.stoptime }}人付款</text>\n              </view>\n              <view class=\"contact-btn\" @click.stop=\"contactNow\">\n                <text>询底价</text>\n                <uni-icons type=\"arrow-right\" size=\"14\" color=\"#fff\"></uni-icons>\n              </view>\n            </view>\n            <view class=\"location-info\">\n              <uni-icons type=\"location\" size=\"12\" color=\"#666\"></uni-icons>\n              <text>{{ item.selladdress }}</text>\n            </view>\n          </view>\n        </view>\n      </view>\n\n      <!-- 加载状态 -->\n      <view class=\"load-status\">\n        <text v-if=\"loading\" class=\"loading-text\">加载中...</text>\n        <text v-else-if=\"noMore\" class=\"no-more\">—— 没有更多了 ——</text>\n      </view>\n    </scroll-view>\n  </view>\n</template>\n\n<script>\nimport { api } from '@/api/index.js'\n\nexport default {\n  data() {\n    return {\n      // 搜索关键字\n      searchText: '',\n      // 分类数据\n      categories: [\n        { label: '所有分类', value: '' },\n        { label: '菜类', value: '' },\n        { label: '肉类', value: '' }\n      ],\n      selectedCategoryIndex: 0,\n      // 距离筛选\n      distances: [\n        { label: '离我最近', value: '' },\n        { label: '离我最远', value: '' }\n      ],\n      selectedDistanceIndex: 0,\n      // 商品列表\n      goodsList: [],\n      page: 1,\n      loading: false,\n      noMore: false,\n      queryData: {\n        page: 1,\n        limit: 10\n      }\n    }\n  },\n  onLoad() {\n    this.loadData()\n  },\n  methods: {\n    // 加载数据\n    async loadData() {\n      if (this.loading || this.noMore) return\n      this.loading = true\n      try {\n        const res = await api.wholesaleList(this.queryData)\n        this.goodsList = res.data.listdata\n        if (res.data.listdata.length === 0) {\n          this.noMore = true\n          return\n        }\n        this.page++\n      } catch (error) {\n        console.log(error)\n      } finally {\n        this.loading = false\n      }\n    },\n    // 处理搜索\n    handleSearch() {\n      this.resetList()\n      this.loadData()\n    },\n    // 重置筛选\n    handleReset() {\n      this.searchText = ''\n      this.selectedCategoryIndex = 0\n      this.selectedDistanceIndex = 0\n      this.resetList()\n      this.loadData()\n    },\n    // 加载更多\n    loadMore() {\n      if (!this.noMore) this.loadData()\n    },\n    // 重置列表\n    resetList() {\n      this.goodsList = []\n      this.page = 1\n      this.noMore = false\n    },\n    // 联系商家\n    contactNow() {\n      uni.showToast({\n        title: '已发送联系请求',\n        icon: 'none'\n      })\n    },\n    // 跳转详情\n    goDetail(id) {\n      uni.navigateTo({\n        url: `/pages/goods/detail?id=${id}`\n      })\n    },\n    // 分类改变\n    categoryChange(e) {\n      this.selectedCategoryIndex = e.detail.value\n      this.resetList()\n      this.loadData()\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n/* 定义主题色等变量，方便统一调整 */\n$primary-color: #409eff;\n$success-color: #67c23a;\n$warning-color: #e6a23c;\n$danger-color: #f56c6c;\n$info-color: #909399;\n\n$bg-color: #f5f7fa;\n$white: #fff;\n$gray-light: #e5e7eb;\n$text-main: #303133;\n$text-secondary: #606266;\n$text-placeholder: #909399;\n\n.supply-container {\n  padding: 24rpx;\n  background-color: $bg-color;\n  min-height: 100vh;\n}\n\n/* 筛选区域 */\n.filter-section {\n  margin-bottom: 24rpx;\n}\n\n/* 搜索栏 */\n.search-bar {\n  display: flex;\n  align-items: center;\n  margin-bottom: 16rpx;\n  border-radius: 12rpx;\n  overflow: hidden;\n  box-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.05);\n\n  .search-input {\n    flex: 1;\n    height: 88rpx;\n    line-height: 88rpx;\n    padding: 0 24rpx;\n    border: none;\n    background-color: $white;\n    font-size: 28rpx;\n    color: $text-main;\n    &::placeholder {\n      color: $text-placeholder;\n    }\n  }\n\n  .search-btn,\n  .reset-btn {\n    height: 88rpx;\n    line-height: 88rpx;\n    padding: 0 36rpx;\n    border: none;\n    color: $white;\n    font-size: 28rpx;\n    cursor: pointer;\n    transition: all 0.3s ease;\r\n\tmargin: 10rpx;\n  }\n\n  .search-btn {\n    background: linear-gradient(90deg, #66b1ff, $primary-color);\r\n\t\n    &:hover {\n      opacity: 0.9;\n    }\n  }\n\n  .reset-btn {\n    background: linear-gradient(90deg, #f78989, $danger-color);\n    margin-left: 12rpx;\n    &:hover {\n      opacity: 0.9;\n    }\n  }\n}\n\n/* 分类筛选 */\n.filter-group {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n\n  .filter-btn {\n    padding: 14rpx 28rpx;\n    background-color: $white;\n    border: 1rpx solid $gray-light;\n    border-radius: 44rpx;\n    font-size: 28rpx;\n    color: $text-secondary;\n    transition: all 0.3s ease;\n    &:hover {\n      border-color: $primary-color;\n      color: $primary-color;\n    }\n  }\n}\n\n/* 商品列表 */\n.goods-list {\n  height: calc(100vh - 260rpx); /* 留出筛选区域高度 */\n}\n\n.goods-grid {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 24rpx;\n}\n\n.goods-card {\n  background-color: $white;\n  border-radius: 16rpx;\n  overflow: hidden;\n  box-shadow: 0 4rpx 16rpx rgba(0, 0, 0, 0.03);\n  transition: all 0.3s ease;\n  &:hover {\n    box-shadow: 0 6rpx 24rpx rgba(0, 0, 0, 0.05);\n    transform: translateY(-2rpx);\n  }\n}\n\n.image-container {\n  position: relative;\n  aspect-ratio: 1/1;\n  overflow: hidden;\n\n  .goods-image {\n    width: 100%;\n    height: 100%;\n    transition: transform 0.5s ease;\n    &:hover {\n      transform: scale(1.05);\n    }\n  }\n\n  .goods-tag {\n    position: absolute;\n    top: 12rpx;\n    left: 12rpx;\n    background: $danger-color;\n    color: $white;\n    padding: 6rpx 18rpx;\n    border-radius: 8rpx;\n    font-size: 22rpx;\n    opacity: 0.9;\n  }\n}\n\n.goods-content {\n  padding: 24rpx;\n\n  .goods-title {\n    font-size: 28rpx;\n    color: $text-main;\n    line-height: 1.4;\n    display: -webkit-box;\n    -webkit-box-orient: vertical;\n    -webkit-line-clamp: 2;\n    overflow: hidden;\n    min-height: 80rpx;\n    margin-bottom: 16rpx;\n  }\n\n  .price-section {\n    display: flex;\n    align-items: baseline;\n    margin-bottom: 20rpx;\n\n    .current-price {\n      color: $danger-color;\n      font-size: 34rpx;\n      font-weight: 600;\n      margin-right: 12rpx;\n    }\n\n    .original-price {\n      color: $text-placeholder;\n      font-size: 24rpx;\n      text-decoration: line-through;\n    }\n  }\n\n  .action-bar {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 16rpx;\n\n    .sales-info {\n      display: flex;\n      align-items: center;\n      color: $text-secondary;\n      font-size: 24rpx;\n\n      .uni-icons {\n        margin-right: 6rpx;\n      }\n    }\n\n    .contact-btn {\n      background: linear-gradient(90deg, #66b1ff, $primary-color);\n      border-radius: 40rpx;\n      padding: 8rpx 24rpx;\n      display: flex;\n      align-items: center;\n      transition: all 0.3s ease;\n      &:hover {\n        opacity: 0.9;\n      }\n\n      text {\n        color: $white;\n        font-size: 24rpx;\n        margin-right: 8rpx;\n      }\n    }\n  }\n\n  .location-info {\n    display: flex;\n    align-items: center;\n    color: $text-secondary;\n    font-size: 24rpx;\n\n    .uni-icons {\n      margin-right: 6rpx;\n    }\n  }\n}\n\n/* 加载状态 */\n.load-status {\n  padding: 30rpx 0;\n  text-align: center;\n  font-size: 26rpx;\n  color: $text-placeholder;\n\n  .no-more {\n    color: $text-secondary;\n  }\n}\n</style>","import MiniProgramPage from 'E:/小程序转app/xcbapp/subPackages/Wholesale/supply/supply.vue'\nwx.createPage(MiniProgramPage)"],"names":["api","uni"],"mappings":";;;AAmGA,MAAK,YAAU;AAAA,EACb,OAAO;AACL,WAAO;AAAA;AAAA,MAEL,YAAY;AAAA;AAAA,MAEZ,YAAY;AAAA,QACV,EAAE,OAAO,QAAQ,OAAO,GAAI;AAAA,QAC5B,EAAE,OAAO,MAAM,OAAO,GAAI;AAAA,QAC1B,EAAE,OAAO,MAAM,OAAO,GAAG;AAAA,MAC1B;AAAA,MACD,uBAAuB;AAAA;AAAA,MAEvB,WAAW;AAAA,QACT,EAAE,OAAO,QAAQ,OAAO,GAAI;AAAA,QAC5B,EAAE,OAAO,QAAQ,OAAO,GAAG;AAAA,MAC5B;AAAA,MACD,uBAAuB;AAAA;AAAA,MAEvB,WAAW,CAAE;AAAA,MACb,MAAM;AAAA,MACN,SAAS;AAAA,MACT,QAAQ;AAAA,MACR,WAAW;AAAA,QACT,MAAM;AAAA,QACN,OAAO;AAAA,MACT;AAAA,IACF;AAAA,EACD;AAAA,EACD,SAAS;AACP,SAAK,SAAS;AAAA,EACf;AAAA,EACD,SAAS;AAAA;AAAA,IAEP,MAAM,WAAW;AACf,UAAI,KAAK,WAAW,KAAK;AAAQ;AACjC,WAAK,UAAU;AACf,UAAI;AACF,cAAM,MAAM,MAAMA,UAAAA,IAAI,cAAc,KAAK,SAAS;AAClD,aAAK,YAAY,IAAI,KAAK;AAC1B,YAAI,IAAI,KAAK,SAAS,WAAW,GAAG;AAClC,eAAK,SAAS;AACd;AAAA,QACF;AACA,aAAK;AAAA,MACL,SAAO,OAAO;AACdC,sBAAAA,MAAA,MAAA,OAAA,kDAAY,KAAK;AAAA,MACnB,UAAU;AACR,aAAK,UAAU;AAAA,MACjB;AAAA,IACD;AAAA;AAAA,IAED,eAAe;AACb,WAAK,UAAU;AACf,WAAK,SAAS;AAAA,IACf;AAAA;AAAA,IAED,cAAc;AACZ,WAAK,aAAa;AAClB,WAAK,wBAAwB;AAC7B,WAAK,wBAAwB;AAC7B,WAAK,UAAU;AACf,WAAK,SAAS;AAAA,IACf;AAAA;AAAA,IAED,WAAW;AACT,UAAI,CAAC,KAAK;AAAQ,aAAK,SAAS;AAAA,IACjC;AAAA;AAAA,IAED,YAAY;AACV,WAAK,YAAY,CAAC;AAClB,WAAK,OAAO;AACZ,WAAK,SAAS;AAAA,IACf;AAAA;AAAA,IAED,aAAa;AACXA,oBAAAA,MAAI,UAAU;AAAA,QACZ,OAAO;AAAA,QACP,MAAM;AAAA,OACP;AAAA,IACF;AAAA;AAAA,IAED,SAAS,IAAI;AACXA,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAK,0BAA0B,EAAE;AAAA,OAClC;AAAA,IACF;AAAA;AAAA,IAED,eAAe,GAAG;AAChB,WAAK,wBAAwB,EAAE,OAAO;AACtC,WAAK,UAAU;AACf,WAAK,SAAS;AAAA,IAChB;AAAA,EACF;AACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChMA,GAAG,WAAW,eAAe;"}