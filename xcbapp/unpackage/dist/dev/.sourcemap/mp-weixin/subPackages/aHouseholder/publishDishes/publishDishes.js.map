{"version":3,"file":"publishDishes.js","sources":["subPackages/aHouseholder/publishDishes/publishDishes.vue","D:/HBuilderX/plugins/uniapp-cli-vite/uniPage:/c3ViUGFja2FnZXNcYUhvdXNlaG9sZGVyXHB1Ymxpc2hEaXNoZXNccHVibGlzaERpc2hlcy52dWU"],"sourcesContent":["<template>\r\n\t<view class=\"container\">\r\n\t\t<view class=\"form-container\">\r\n\t\t\t<form @submit.prevent=\"handleSubmit\">\r\n\t\t\t\t<view class=\"form-item\">\r\n\t\t\t\t\t<label class=\"label\">菜品名称</label>\r\n\t\t\t\t\t<input type=\"text\" v-model=\"dish.name\" class=\"input\" placeholder=\"请输入菜品名称\" required />\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<view class=\"form-item\" style=\"position: relative;\">\r\n\t\t\t\t\t<label class=\"label\">上传实物图片 <text style=\"font-size: 20rpx; color: rgb(170, 0, 0)\">(上传图片之后长按图片可以删除)</text></label>\r\n\t\t\t\t\t<view class=\"images\">\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<image :src=\"item\" mode=\"aspectFit\" v-for=\"(item,index) in dish.imagesList\" :key=\"item+index\" @longpress=\"deleteItem(index)\"></image>\r\n\t\t\t\t\t\t<uni-icons type=\"plusempty\" size=\"50\" @click=\"commitAvater\" ></uni-icons>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t\r\n\t\t\t\t</view>\r\n\t\t\t\t<button type=\"submit\" class=\"submit-btn\">发布菜品</button>\r\n\t\t\t</form>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport {\r\n\t\tuseUpload\r\n\t} from \"@/hooks/useUpload\"\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tdish: {\r\n\t\t\t\t\tname: '',\r\n\t\t\t\t\tprice: 0,\r\n\t\t\t\t\timagesList: []\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tdeleteItem(index){\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\tcontent:'是否删除照片',\r\n\t\t\t\t\tcomplete:(res)=>{\r\n\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t\tif (res.confirm){\r\n\t\t\t\t\t\t\tthis.dish.imagesList.splice(index,1)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\thandleSubmit() {\r\n\t\t\t\tconsole.log('提交的菜品信息：', this.dish);\r\n\t\t\t},\r\n\t\t\tcommitAvater() {\r\n\t\t\t\tuni.chooseImage({\r\n\t\t\t\t\tcount: 1,\r\n\t\t\t\t\tsizeType: ['compressed', 'original'],\r\n\t\t\t\t\tsourceType: ['album', 'camera'],\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tconst tempFilePaths = res.tempFilePaths;\r\n\t\t\t\t\t\tif (tempFilePaths.length > 0) {\r\n\t\t\t\t\t\t\tconst {\r\n\t\t\t\t\t\t\t\tupload,\r\n\t\t\t\t\t\t\t\trequest\r\n\t\t\t\t\t\t\t} = useUpload({\r\n\t\t\t\t\t\t\t\tuploadPath: '/group1/upload',\r\n\t\t\t\t\t\t\t\ttempFilePaths: tempFilePaths[0],\r\n\t\t\t\t\t\t\t\tfile: res.tempFiles[0]\r\n\t\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\t\tupload().then((res) => {\r\n\t\t\t\t\t\t\t\tvar obj = JSON.parse(res);\r\n\t\t\t\t\t\t\t\tthis.dish.imagesList.push(obj.data.url)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t}\r\n\t};\r\n</script>\r\n\r\n<style scoped>\r\n\t.images image {\r\n\t\tmargin: 3rpx;\r\n\t\tborder: 1rpx solid gainsboro;\r\n\t\theight: 200rpx;\r\n\t\twidth: calc(53.333% - 20px);\r\n\t}\r\n\r\n\t.images {\r\n\t\t\r\n\t\tmin-height: 50rpx;\r\n\t\tdisplay: flex;\r\n\t\tflex-wrap: wrap;\r\n\t\tjustify-content: flex-start;\r\n\t}\r\n\r\n\t.uni-icons {\r\n\t\tmargin: 50rpx 0 0 90rpx;\r\n\t\tline-height: 100rpx;\r\n\t\twidth: 100rpx;\r\n\t\theight: 100rpx;\r\n\t\tpadding: 12rpx;\r\n\t\tborder: 3rpx solid black;\r\n\t}\r\n\r\n\t.container {\r\n\t\tpadding: 24px;\r\n\t\tbackground-color: #f8f8f8;\r\n\t}\r\n\r\n\t.form-container {\r\n\t\tbackground-color: #ffffff;\r\n\t\tpadding: 24px;\r\n\t\tborder-radius: 12px;\r\n\t\tbox-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\r\n\t\tmax-width: 500px;\r\n\t\tmargin: 0 auto;\r\n\t}\r\n\r\n\t.form-item {\r\n\t\tmargin-bottom: 20px;\r\n\t}\r\n\r\n\t.label {\r\n\t\tdisplay: block;\r\n\t\tmargin-bottom: 8px;\r\n\t\tfont-size: 16px;\r\n\t\tcolor: #333333;\r\n\t}\r\n\r\n\t.input {\r\n\t\tpadding: 12px;\r\n\t\tborder: 1px solid #dddddd;\r\n\t\tborder-radius: 8px;\r\n\t\tfont-size: 16px;\r\n\t\tcolor: #333333;\r\n\t}\r\n\r\n\t.submit-btn {\r\n\t\twidth: 100%;\r\n\t\tpadding: 12px;\r\n\t\tbackground-color: #007aff;\r\n\t\tcolor: #ffffff;\r\n\t\tborder: none;\r\n\t\tborder-radius: 8px;\r\n\t\tfont-size: 18px;\r\n\t\ttext-align: center;\r\n\t\ttext-transform: uppercase;\r\n\t\tletter-spacing: 1px;\r\n\t\tcursor: pointer;\r\n\t\ttransition: background-color 0.3s ease;\r\n\t}\r\n\r\n\t.submit-btn:hover {\r\n\t\tbackground-color: #005bb5;\r\n\t}\r\n</style>","import MiniProgramPage from 'E:/小程序转app/xcbapp/subPackages/aHouseholder/publishDishes/publishDishes.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","useUpload","res"],"mappings":";;;AA4BC,MAAK,YAAU;AAAA,EACd,OAAO;AACN,WAAO;AAAA,MACN,MAAM;AAAA,QACL,MAAM;AAAA,QACN,OAAO;AAAA,QACP,YAAY,CAAC;AAAA,MACd;AAAA;EAED;AAAA,EACD,SAAS;AAAA,IACR,WAAW,OAAM;AAChBA,oBAAAA,MAAI,UAAU;AAAA,QACb,SAAQ;AAAA,QACR,UAAS,CAAC,QAAM;AACfA,wBAAAA,qFAAY,GAAG;AACf,cAAI,IAAI,SAAQ;AACf,iBAAK,KAAK,WAAW,OAAO,OAAM,CAAC;AAAA,UACpC;AAAA,QACD;AAAA,OACA;AAAA,IAED;AAAA,IACD,eAAe;AACdA,oBAAY,MAAA,MAAA,OAAA,kEAAA,YAAY,KAAK,IAAI;AAAA,IACjC;AAAA,IACD,eAAe;AACdA,oBAAAA,MAAI,YAAY;AAAA,QACf,OAAO;AAAA,QACP,UAAU,CAAC,cAAc,UAAU;AAAA,QACnC,YAAY,CAAC,SAAS,QAAQ;AAAA,QAC9B,SAAS,CAAC,QAAQ;AACjB,gBAAM,gBAAgB,IAAI;AAC1B,cAAI,cAAc,SAAS,GAAG;AAC7B,kBAAM;AAAA,cACL;AAAA,cACA;AAAA,YACC,IAAEC,0BAAU;AAAA,cACb,YAAY;AAAA,cACZ,eAAe,cAAc,CAAC;AAAA,cAC9B,MAAM,IAAI,UAAU,CAAC;AAAA,aACrB;AAED,mBAAQ,EAAC,KAAK,CAACC,SAAQ;AACtB,kBAAI,MAAM,KAAK,MAAMA,IAAG;AACxB,mBAAK,KAAK,WAAW,KAAK,IAAI,KAAK,GAAG;AAAA,aACtC;AAAA,UACF;AAAA,QACD;AAAA,MACD,CAAC;AAAA,IACD;AAAA,EACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC9EF,GAAG,WAAW,eAAe;"}