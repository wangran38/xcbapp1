{"version":3,"file":"modifyPreSoldDishes.js","sources":["subPackages/aHouseholder/modifyPreSoldDishes/modifyPreSoldDishes.vue","D:/HBuilderX/plugins/uniapp-cli-vite/uniPage:/c3ViUGFja2FnZXNcYUhvdXNlaG9sZGVyXG1vZGlmeVByZVNvbGREaXNoZXNcbW9kaWZ5UHJlU29sZERpc2hlcy52dWU"],"sourcesContent":["<template>\r\n\t<view class=\"container\">\r\n\t\t<view class=\"form-container\">\r\n\t\t\t<view class=\"form-item\">\r\n\t\t\t\t<view class=\"item-header\">\r\n\t\t\t\t\t<text class=\"label\">菜名</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"input-group\">\r\n\t\t\t\t\t<input type=\"text\" v-model=\"currentItem.goodsname\" placeholder=\"输入名称\" class=\"price-input\" />\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<view class=\"form-item\" style=\"display: flex; justify-content: space-between; width: 130px;\">\r\n\t\t\t\t<view class=\"item-header\">\r\n\t\t\t\t\t<text class=\"label\">分类</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<picker class=\"picker\" :range=\"pickerRange\" :value=\"selectedCategoryIndex\" @change=\"onCategoryChange\">\r\n\t\t\t\t\t<view style=\"font-size: 40rpx;\">{{ pickerRange[selectedCategoryIndex] }}</view>\r\n\t\t\t\t</picker>\r\n\t\t\t</view>\r\n\r\n\t\t\t<view class=\"form-item\" style=\"display: flex; justify-content: space-between; width: 600rpx;\">\r\n\t\t\t\t<view class=\"item-header\">\r\n\t\t\t\t\t<text class=\"label\">图片</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<image class=\"cimg\" :src=\"currentItem.imglogo\" mode=\"aspectFit\" @tap=\"uploadcuisine\">\r\n\t\t\t\t</image>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<view class=\"submit-container\">\r\n\t\t\t<button class=\"submit-btn\" @click=\"submit\">保存修改</button>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport {\r\n\t\tapi\r\n\t} from '@/api/index.js'\r\n\timport {\r\n\t\tmyMixin\r\n\t} from '@/utils/public.js'\r\n\timport {\r\n\t\tuseUpload\r\n\t} from \"@/hooks/useUpload\"\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tformData: {},\r\n\t\t\t\tpickerRange: [],\r\n\t\t\t\tselectedCategoryIndex: 0,\r\n\t\t\t\tcurrentItem: {},\r\n\t\t\t}\r\n\t\t},\r\n\t\tmixins: [myMixin],\r\n\t\tmethods: {\r\n\t\t\tuploadcuisine() {\r\n\t\t\t\tuni.chooseImage({\r\n\t\t\t\t\tcount: 1,\r\n\t\t\t\t\tsizeType: ['original', 'compressed'],\r\n\t\t\t\t\tsourceType: ['album', 'camera'],\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t// const tempFilePaths = res.tempFilePaths;\r\n\t\t\t\t\t\t// this.uploadImage(tempFilePaths[0]);\r\n\t\t\t\t\t\t// this.isImageSelected = true; // 更新图片选择状态\r\n\t\t\t\t\t\tconst tempFilePaths = res.tempFilePaths;\r\n\t\t\t\t\t\tif (tempFilePaths.length > 0) {\r\n\t\t\t\t\t\t\tconsole.log(66676, res.tempFiles[0]);\r\n\t\t\t\t\t\t\tconst {\r\n\t\t\t\t\t\t\t\tupload,\r\n\t\t\t\t\t\t\t\trequest\r\n\t\t\t\t\t\t\t} = useUpload({\r\n\t\t\t\t\t\t\t\tuploadPath: '/group1/upload',\r\n\t\t\t\t\t\t\t\ttempFilePaths: tempFilePaths[0],\r\n\t\t\t\t\t\t\t\tfile: res.tempFiles[0]\r\n\t\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\t\tupload().then((res) => {\r\n\t\t\t\t\t\t\t\tres = JSON.parse(res)\r\n\t\t\t\t\t\t\t\tthis.currentItem.imglogo = res.data.url;\r\n\t\t\t\t\t\t\t\t// console.log('更新后的图片路径:', this.currentItem.imglogo);\r\n\t\t\t\t\t\t\t\t// this.isImageSelected = true;\r\n\t\t\t\t\t\t\t\t// this.imageUploaded = true; // 更新图片上传状态\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t// api.uploadImage(tempFilePaths[0])\r\n\t\t\t\t\t\t\t// \t.then(data => {\r\n\t\t\t\t\t\t\t// \t\tthis.user.headimgurl = data.url; // 更新头像 URL\r\n\t\t\t\t\t\t\t// \t})\r\n\t\t\t\t\t\t\t// \t.catch(error => {\r\n\t\t\t\t\t\t\t// \t\tuni.showToast({\r\n\t\t\t\t\t\t\t// \t\t\ttitle: '上传失败',\r\n\t\t\t\t\t\t\t// \t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t// \t\t});\r\n\t\t\t\t\t\t\t// \t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\tonCategoryChange(e) {\r\n\t\t\t\tthis.selectedCategoryIndex = e.detail.value;\r\n\t\t\t\tthis.currentItem.category_id = this.categories[this.selectedCategoryIndex].id;\r\n\t\t\t},\r\n\t\t\tfetchCategories() {\r\n\t\t\t\tapi.cglist().then(res => {\r\n\t\t\t\t\tif (res.code === 200) {\r\n\t\t\t\t\t\t// 获取分类数据\r\n\t\t\t\t\t\tconst categories = res.data.listdata.map(item => ({\r\n\t\t\t\t\t\t\tid: item.id,\r\n\t\t\t\t\t\t\tcontent: item.content\r\n\t\t\t\t\t\t}));\r\n\t\t\t\t\t\t// 存储分类数据\r\n\t\t\t\t\t\tthis.categories = categories;\r\n\t\t\t\t\t\t// 初始化 picker 的范围数据，包括默认提示项\r\n\t\t\t\t\t\tthis.pickerRange = [...categories.map(category => category.content)];\r\n\t\t\t\t\t\tconsole.log(this.pickerRange)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tsubmit() {\r\n\t\t\t\tconsole.log(this.currentItem)\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ticon: 'loading',\r\n\t\t\t\t\ttitle: '正在修改....'\r\n\t\t\t\t})\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tapi.updateDish({\r\n\t\t\t\t\t\tid:this.currentItem.id,\r\n\t\t\t\t\t\tgoodsname:this.currentItem.goodsname,\r\n\t\t\t\t\t\timglogo:this.currentItem.imglogo,\r\n\t\t\t\t\t\tcategory_id:this.currentItem.category_id,\r\n\t\t\t\t\t}).then((data) => {\r\n\t\t\t\t\t\tif (data.code == 200) {\r\n\t\t\t\t\t\t\tthis.customizeBack()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}, 2000)\r\n\t\t\t},\r\n\t\t},\r\n\t\tonLoad({\r\n\t\t\tpramas\r\n\t\t}) {\r\n\t\t\tif (pramas) {\r\n\t\t\t\tthis.currentItem = JSON.parse(pramas)\r\n\t\t\t}\r\n\t\t\tthis.fetchCategories()\r\n\t\t\tthis.selectedCategoryIndex =  this.currentItem.category_id-1\r\n\t\t},\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\t$primary-color: #8DC9B2; // 主色调\r\n\t$secondary-color: #E6F4EC; // 辅助色\r\n\t$text-primary: #2B593E; // 主要文字色\r\n\r\n\t.container {\r\n\t\tpadding: 32rpx;\r\n\t\tbackground: #F8FFFC;\r\n\t\tmin-height: 100vh;\r\n\t}\r\n\r\n\t.product-header {\r\n\t\tmargin-bottom: 48rpx;\r\n\r\n\t\t.product-name {\r\n\t\t\tdisplay: block;\r\n\t\t\tfont-size: 40rpx;\r\n\t\t\tcolor: $text-primary;\r\n\t\t\tfont-weight: 600;\r\n\t\t\tline-height: 1.4;\r\n\t\t\tmargin-bottom: 16rpx;\r\n\t\t}\r\n\r\n\t\t.decorative-line {\r\n\t\t\twidth: 80rpx;\r\n\t\t\theight: 6rpx;\r\n\t\t\tbackground: $primary-color;\r\n\t\t\tborder-radius: 3rpx;\r\n\t\t}\r\n\t}\r\n\r\n\t.form-container {\r\n\t\tbackground: #FFFFFF;\r\n\t\tborder-radius: 24rpx;\r\n\t\tbox-shadow: 0 8rpx 32rpx rgba(141, 201, 178, 0.1);\r\n\t\tpadding: 0 32rpx;\r\n\t}\r\n\r\n\t.form-item {\r\n\t\tpadding: 40rpx 0;\r\n\t\tborder-bottom: 2rpx solid #F0F7F3;\r\n\r\n\t\t&:last-child {\r\n\t\t\tborder-bottom: none;\r\n\t\t}\r\n\r\n\t\t.item-header {\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t\tmargin-bottom: 32rpx;\r\n\r\n\t\t\t.icon {\r\n\t\t\t\twidth: 48rpx;\r\n\t\t\t\theight: 48rpx;\r\n\t\t\t\tmargin-right: 24rpx;\r\n\t\t\t}\r\n\r\n\t\t\t.label {\r\n\t\t\t\twidth: 40px;\r\n\t\t\t\tfont-size: 32rpx;\r\n\t\t\t\tcolor: $text-primary;\r\n\t\t\t\tfont-weight: 500;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.input-group {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\theight: 96rpx;\r\n\t\tbackground: $secondary-color;\r\n\t\tborder-radius: 16rpx;\r\n\t\tpadding: 0 32rpx;\r\n\r\n\t\t.currency {\r\n\t\t\tfont-size: 40rpx;\r\n\t\t\tcolor: $primary-color;\r\n\t\t\tmargin-right: 16rpx;\r\n\t\t}\r\n\r\n\t\t.price-input {\r\n\t\t\tflex: 1;\r\n\t\t\tfont-size: 36rpx;\r\n\t\t\tcolor: $text-primary;\r\n\t\t\theight: 100%;\r\n\t\t}\r\n\t}\r\n\r\n\t.stock-input {\r\n\t\theight: 96rpx;\r\n\t\tbackground: $secondary-color;\r\n\t\tborder-radius: 16rpx;\r\n\t\tpadding: 0 32rpx;\r\n\t\tfont-size: 32rpx;\r\n\t\tcolor: $text-primary;\r\n\t}\r\n\r\n\t.unit-picker {\r\n\t\t.picker-content {\r\n\t\t\theight: 96rpx;\r\n\t\t\tbackground: $secondary-color;\r\n\t\t\tborder-radius: 16rpx;\r\n\t\t\tpadding: 0 32rpx;\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t\tjustify-content: space-between;\r\n\t\t\tfont-size: 32rpx;\r\n\t\t\tcolor: $text-primary;\r\n\r\n\t\t\t.arrow {\r\n\t\t\t\twidth: 32rpx;\r\n\t\t\t\theight: 32rpx;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.switch-item {\r\n\t\t.item-header {\r\n\t\t\tmargin-bottom: 0;\r\n\t\t}\r\n\t}\r\n\r\n\t.submit-container {\r\n\t\tmargin-top: 64rpx;\r\n\t\tpadding: 0 32rpx;\r\n\r\n\t\t.submit-btn {\r\n\t\t\theight: 96rpx;\r\n\t\t\tline-height: 96rpx;\r\n\t\t\tbackground: linear-gradient(135deg, $primary-color, #7BCFA9);\r\n\t\t\tcolor: white;\r\n\t\t\tborder-radius: 64rpx;\r\n\t\t\tfont-size: 34rpx;\r\n\t\t\tfont-weight: 500;\r\n\t\t\tbox-shadow: 0 8rpx 24rpx rgba(141, 201, 178, 0.3);\r\n\r\n\t\t\t&::after {\r\n\t\t\t\tborder: none;\r\n\t\t\t}\r\n\r\n\t\t\t&:active {\r\n\t\t\t\topacity: 0.9;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</style>","import MiniProgramPage from 'E:/小程序转app/xcbapp/subPackages/aHouseholder/modifyPreSoldDishes/modifyPreSoldDishes.vue'\nwx.createPage(MiniProgramPage)"],"names":["myMixin","uni","useUpload","res","api"],"mappings":";;;;;AA8CC,MAAK,YAAU;AAAA,EACd,OAAO;AACN,WAAO;AAAA,MACN,UAAU,CAAE;AAAA,MACZ,aAAa,CAAE;AAAA,MACf,uBAAuB;AAAA,MACvB,aAAa,CAAE;AAAA,IAChB;AAAA,EACA;AAAA,EACD,QAAQ,CAACA,aAAAA,OAAO;AAAA,EAChB,SAAS;AAAA,IACR,gBAAgB;AACfC,oBAAAA,MAAI,YAAY;AAAA,QACf,OAAO;AAAA,QACP,UAAU,CAAC,YAAY,YAAY;AAAA,QACnC,YAAY,CAAC,SAAS,QAAQ;AAAA,QAC9B,SAAS,CAAC,QAAQ;AAIjB,gBAAM,gBAAgB,IAAI;AAC1B,cAAI,cAAc,SAAS,GAAG;AAC7BA,gCAAA,MAAA,OAAA,8EAAY,OAAO,IAAI,UAAU,CAAC,CAAC;AACnC,kBAAM;AAAA,cACL;AAAA,cACA;AAAA,YACC,IAAEC,0BAAU;AAAA,cACb,YAAY;AAAA,cACZ,eAAe,cAAc,CAAC;AAAA,cAC9B,MAAM,IAAI,UAAU,CAAC;AAAA,aACrB;AAED,mBAAQ,EAAC,KAAK,CAACC,SAAQ;AACtB,cAAAA,OAAM,KAAK,MAAMA,IAAG;AACpB,mBAAK,YAAY,UAAUA,KAAI,KAAK;AAAA,aAIpC;AAAA,UAWF;AAAA,QACD;AAAA,MACD,CAAC;AAAA,IACD;AAAA,IAED,iBAAiB,GAAG;AACnB,WAAK,wBAAwB,EAAE,OAAO;AACtC,WAAK,YAAY,cAAc,KAAK,WAAW,KAAK,qBAAqB,EAAE;AAAA,IAC3E;AAAA,IACD,kBAAkB;AACjBC,gBAAAA,IAAI,OAAM,EAAG,KAAK,SAAO;AACxB,YAAI,IAAI,SAAS,KAAK;AAErB,gBAAM,aAAa,IAAI,KAAK,SAAS,IAAI,WAAS;AAAA,YACjD,IAAI,KAAK;AAAA,YACT,SAAS,KAAK;AAAA,UACd,EAAC;AAEF,eAAK,aAAa;AAElB,eAAK,cAAc,CAAC,GAAG,WAAW,IAAI,cAAY,SAAS,OAAO,CAAC;AACnEH,wBAAAA,MAAY,MAAA,OAAA,+EAAA,KAAK,WAAW;AAAA,QAC7B;AAAA,OACA;AAAA,IACD;AAAA,IACD,SAAS;AACRA,oBAAAA,MAAA,MAAA,OAAA,+EAAY,KAAK,WAAW;AAC5BA,oBAAAA,MAAI,UAAU;AAAA,QACb,MAAM;AAAA,QACN,OAAO;AAAA,OACP;AACD,iBAAW,MAAM;AAChBG,kBAAAA,IAAI,WAAW;AAAA,UACd,IAAG,KAAK,YAAY;AAAA,UACpB,WAAU,KAAK,YAAY;AAAA,UAC3B,SAAQ,KAAK,YAAY;AAAA,UACzB,aAAY,KAAK,YAAY;AAAA,QAC9B,CAAC,EAAE,KAAK,CAAC,SAAS;AACjB,cAAI,KAAK,QAAQ,KAAK;AACrB,iBAAK,cAAc;AAAA,UACpB;AAAA,SACA;AAAA,MACD,GAAE,GAAI;AAAA,IACP;AAAA,EACD;AAAA,EACD,OAAO;AAAA,IACN;AAAA,EACD,GAAG;AACF,QAAI,QAAQ;AACX,WAAK,cAAc,KAAK,MAAM,MAAM;AAAA,IACrC;AACA,SAAK,gBAAgB;AACrB,SAAK,wBAAyB,KAAK,YAAY,cAAY;AAAA,EAC3D;AACF;;;;;;;;;;;;;;;ACpJD,GAAG,WAAW,eAAe;"}