(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/merchantComplaints/merchantComplaints"],{1089:function(t,e,n){"use strict";var a=n("67a6"),i=n.n(a);i.a},"206f":function(t,e,n){"use strict";n.r(e);var a=n("5bb1"),i=n.n(a);for(var o in a)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(o);e["default"]=i.a},"21b2":function(t,e,n){"use strict";(function(t,e){var a=n("47a9");n("89ee");a(n("3240"));var i=a(n("a80e"));t.__webpack_require_UNI_MP_PLUGIN__=n,e(i.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])},"5bb1":function(t,e,n){"use strict";(function(t){var a=n("47a9");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n("7eb4")),o=a(n("af34")),u=a(n("ee10")),c=n("4860"),r=(n("64af"),n("789c")),s={mixins:[r.myMixin],data:function(){return{formData:{title:"",content:"",phone:""},fileList:[],query:null}},computed:{},onLoad:function(t){console.log(t),this.query=t},methods:{saveImage:function(e){return new Promise((function(n,a){t.uploadFile({url:"https://image.xcbdsc.com/group1/upload",name:"file",filePath:e,formData:{output:"json2"},success:function(t){n(JSON.parse(t.data))},fail:function(e){a(e),t.showToast({title:"上传失败",icon:"error"})}})}))},selectImage:function(){var e=this;return(0,u.default)(i.default.mark((function n(){return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.chooseMedia({count:6,mediaType:"mix",sourceType:["album","camera"],maxDuration:30,camera:"back",success:function(t){var n=t.tempFiles.map((function(t){return e.saveImage(t.tempFilePath)}));Promise.all(n).then((function(t){e.fileList=[].concat((0,o.default)(e.fileList),(0,o.default)(t))}))}});case 1:case"end":return n.stop()}}),n)})))()},removeFile:function(t){this.fileList.splice(t,1)},handleSubmit:function(){var e=this;return(0,u.default)(i.default.mark((function n(){var a;return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.formData.shop_id=parseInt(e.query.id),a=e.fileList.map((function(t){return t.data.url})),e.formData.complaint_img=a.join(","),t.showToast({icon:"loading",title:"正在提交"}),c.api.submitComplaint(e.formData).then((function(n){200==n.code?(t.showToast({icon:"success",title:"投诉成功"}),setTimeout((function(){e.customizeBack()}),2e3)):t.showToast({icon:"error",title:n.msg})}));case 5:case"end":return n.stop()}}),n)})))()}}};e.default=s}).call(this,n("df3c")["default"])},"67a6":function(t,e,n){},a80e:function(t,e,n){"use strict";n.r(e);var a=n("f678"),i=n("206f");for(var o in i)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(o);n("1089");var u=n("828b"),c=Object(u["a"])(i["default"],a["b"],a["c"],!1,null,"39e65d12",null,!1,a["a"],void 0);e["default"]=c.exports},f678:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return a}));var a={uniIcons:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-icons/components/uni-icons/uni-icons")]).then(n.bind(null,"a7f4"))}},i=function(){var t=this.$createElement,e=(this._self._c,this.formData.content.length),n=this.fileList.length;this.$mp.data=Object.assign({},{$root:{g0:e,g1:n}})},o=[]}},[["21b2","common/runtime","common/vendor"]]]);