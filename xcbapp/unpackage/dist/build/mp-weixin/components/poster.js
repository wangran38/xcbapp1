(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/poster"],{"20f1":function(t,a,e){"use strict";e.d(a,"b",(function(){return n})),e.d(a,"c",(function(){return i})),e.d(a,"a",(function(){}));var n=function(){var t=this.$createElement;this._self._c},i=[]},"7ed3":function(t,a,e){},"92ca":function(t,a,e){"use strict";e.r(a);var n=e("20f1"),i=e("ca4a");for(var c in i)["default"].indexOf(c)<0&&function(t){e.d(a,t,(function(){return i[t]}))}(c);e("bf5a");var s=e("828b"),o=Object(s["a"])(i["default"],n["b"],n["c"],!1,null,"18c23aba",null,!1,n["a"],void 0);a["default"]=o.exports},b6a1:function(t,a,e){"use strict";(function(t){var n=e("47a9");Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var i=n(e("7eb4")),c=n(e("ee10")),s=e("4860"),o={data:function(){return{scene:null,canvasWidth:300,canvasHeight:220,scale:1}},props:{name:{type:String,default:"无人测试"}},onLoad:function(){var a=t.getSystemInfoSync(),e=a.windowWidth;this.canvasWidth=Math.floor(.8*e),this.canvasHeight=Math.floor(.73*this.canvasWidth),this.scale=this.canvasWidth/300},onReady:function(){var a=this;return(0,c.default)(i.default.mark((function e(){var n;return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.api.getqrcode({});case 3:n=e.sent,a.$emit("initLoad",n.data.userid),a.scene=n.data.fileURL,setTimeout((function(){a.drawPureCanvas()}),100),e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](0),console.error("获取二维码失败：",e.t0),t.showToast({title:"二维码加载失败",icon:"none"});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))()},methods:{adapt:function(t){return Math.floor(t*this.scale)},doSaveImage:function(){t.canvasToTempFilePath({canvasId:"pureCanvas",width:this.canvasWidth,height:this.canvasHeight,destWidth:3*this.canvasWidth,destHeight:3*this.canvasHeight,quality:1,success:function(a){t.saveImageToPhotosAlbum({filePath:a.tempFilePath,success:function(){return t.showToast({title:"保存成功",icon:"success"})},fail:function(){return t.showToast({title:"保存失败",icon:"none"})}})},fail:function(){return t.showToast({title:"生成图片失败",icon:"none"})}},this)},saveCanvasImage:function(){var a=this;t.getSetting({success:function(e){e.authSetting["scope.writePhotosAlbum"]?a.doSaveImage():t.authorize({scope:"scope.writePhotosAlbum",success:function(){return a.doSaveImage()},fail:function(){t.showModal({title:"提示",content:"需要开启保存图片权限",success:function(a){return a.confirm&&t.openSetting()}})}})}})},loadImageUrl:function(a){return new Promise((function(e,n){t.getImageInfo({src:a,success:function(t){return e(t.path)},fail:function(t){return n("图片加载失败：".concat(t.errMsg))}})}))},drawRoundRect:function(t,a,e,n,i,c){t.beginPath(),t.arc(a+c,e+c,c,Math.PI,1.5*Math.PI),t.arc(a+n-c,e+c,c,1.5*Math.PI,2*Math.PI),t.arc(a+n-c,e+i-c,c,0,.5*Math.PI),t.arc(a+c,e+i-c,c,.5*Math.PI,Math.PI),t.closePath()},drawPureCanvas:function(){var a=this;return(0,c.default)(i.default.mark((function e(){var n,c,s,o,r,u,l,d,f,h,p,v,g,w,m;return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,n=t.createCanvasContext("pureCanvas",a),c=n.createLinearGradient(0,0,0,a.canvasHeight),c.addColorStop(0,"#409EFF"),c.addColorStop(1,"#B37EF1"),n.setFillStyle(c),n.fillRect(0,0,a.canvasWidth,a.canvasHeight),n.setFillStyle("#FFFFFF"),n.setFontSize(a.adapt(18)),s=a.adapt(30),n.fillText("农链天下",a.adapt(20),s),n.setFontSize(a.adapt(12)),o=a.adapt(60),n.fillText("我在这个平台发现了好东西，邀请你一起加入～",a.adapt(20),o),r=a.adapt(20),u=a.adapt(80),l=a.canvasWidth-a.adapt(40),d=a.adapt(90),f=a.adapt(8),n.setFillStyle("#FFFFFF"),a.drawRoundRect(n,r,u,l,d,f),n.fill(),n.setFillStyle("#333333"),n.setFontSize(a.adapt(12)),h=u+a.adapt(30),n.fillText('邀请你加入"农链天下"',r+a.adapt(20),h),p=u+a.adapt(55),n.fillText("微信长按识别二维码",r+a.adapt(20),p),a.scene){e.next=30;break}throw new Error("二维码地址为空");case 30:return e.next=32,a.loadImageUrl(a.scene);case 32:v=e.sent,g=a.adapt(70),w=a.canvasWidth-a.adapt(20)-g,m=u+(d-g)/2,n.drawImage(v,w,m,g,g),n.draw(),e.next=44;break;case 40:e.prev=40,e.t0=e["catch"](0),console.error("绘制失败：",e.t0),t.showToast({title:"绘制失败",icon:"none"});case 44:case"end":return e.stop()}}),e,null,[[0,40]])})))()}}};a.default=o}).call(this,e("df3c")["default"])},bf5a:function(t,a,e){"use strict";var n=e("7ed3"),i=e.n(n);i.a},ca4a:function(t,a,e){"use strict";e.r(a);var n=e("b6a1"),i=e.n(n);for(var c in n)["default"].indexOf(c)<0&&function(t){e.d(a,t,(function(){return n[t]}))}(c);a["default"]=i.a}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/poster-create-component',
    {
        'components/poster-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('df3c')['createComponent'](__webpack_require__("92ca"))
        })
    },
    [['components/poster-create-component']]
]);
