(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["subPackages/settings/updatePwd/updatePwd"],{2797:function(t,r,o){"use strict";var e=o("a290"),n=o.n(e);n.a},"5eaf":function(t,r,o){"use strict";(function(t,r){var e=o("47a9");o("89ee");e(o("3240"));var n=e(o("bbd8"));t.__webpack_require_UNI_MP_PLUGIN__=o,r(n.default)}).call(this,o("3223")["default"],o("df3c")["createPage"])},"7e78":function(t,r,o){"use strict";o.r(r);var e=o("fb74"),n=o.n(e);for(var a in e)["default"].indexOf(a)<0&&function(t){o.d(r,t,(function(){return e[t]}))}(a);r["default"]=n.a},a290:function(t,r,o){},bbd8:function(t,r,o){"use strict";o.r(r);var e=o("c528"),n=o("7e78");for(var a in n)["default"].indexOf(a)<0&&function(t){o.d(r,t,(function(){return n[t]}))}(a);o("2797");var s=o("828b"),i=Object(s["a"])(n["default"],e["b"],e["c"],!1,null,"8e9b51e8",null,!1,e["a"],void 0);r["default"]=i.exports},c528:function(t,r,o){"use strict";o.d(r,"b",(function(){return e})),o.d(r,"c",(function(){return n})),o.d(r,"a",(function(){}));var e=function(){var t=this.$createElement;this._self._c},n=[]},fb74:function(t,r,o){"use strict";(function(t){var e=o("47a9");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e(o("7eb4")),a=e(o("ee10")),s=o("4860"),i={data:function(){return{formData:{phone:"",verificationCode:"",newPassword:"",confirmPassword:""},showPassword:!1,codeBtnText:"获取验证码",canSendCode:!0,countdown:0,phoneError:"",passwordError:"",confirmError:"",message:"",isError:!1}},computed:{formValid:function(){return!this.phoneError&&!this.passwordError&&!this.confirmError&&this.formData.phone&&this.formData.verificationCode&&this.formData.newPassword&&this.formData.confirmPassword}},onLoad:function(t){t.phone&&(this.formData.phone=t.phone)},methods:{validatePhone:function(){this.formData.phone?/^1[3-9]\d{9}$/.test(this.formData.phone)?this.phoneError="":this.phoneError="手机号格式不正确":this.phoneError="手机号不能为空"},validatePassword:function(){this.formData.newPassword?/^(?=.*[a-zA-Z])(?=.*\d).{8,20}$/.test(this.formData.newPassword)?this.passwordError="":this.passwordError="需包含字母和数字，8-20位":this.passwordError="密码不能为空",this.formData.confirmPassword&&(this.formData.confirmPassword!==this.formData.newPassword?this.passwordError="两次输入密码不一致":this.passwordError="")},validateConfirm:function(){this.formData.confirmPassword!==this.formData.newPassword?this.confirmError="两次输入密码不一致":this.confirmError=""},togglePassword:function(){this.showPassword=!this.showPassword},sendVerificationCode:function(){var r=this;return(0,a.default)(n.default.mark((function o(){var e;return n.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(!r.phoneError&&r.formData.phone){o.next=2;break}return o.abrupt("return");case 2:return r.startCountdown(),o.next=5,s.api.sendText({phonenumber:r.formData.phone});case 5:e=o.sent,200==e.code?t.showToast({icon:"success",title:"短信已发送至您的手机,请注意查收"}):t.showToast({icon:"error",title:e.msg});case 7:case"end":return o.stop()}}),o)})))()},startCountdown:function(){var t=this;this.canSendCode=!1,this.countdown=60,this.codeBtnText="".concat(this.countdown,"秒后重发");var r=setInterval((function(){if(t.countdown<=0)return clearInterval(r),t.canSendCode=!0,void(t.codeBtnText="获取验证码");t.countdown--,t.codeBtnText="".concat(t.countdown,"秒后重发")}),1e3)},handleSubmit:function(){var r=this;return(0,a.default)(n.default.mark((function o(){return n.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,s.api.editPwd({phone:r.formData.phone,codenum:r.formData.verificationCode,psw:r.formData.newPassword});case 2:o.sent,r.showMessage("密码重置成功",!1),setTimeout((function(){t.navigateBack()}),1500);case 5:case"end":return o.stop()}}),o)})))()},showMessage:function(t){var r=this,o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.message=t,this.isError=o,setTimeout((function(){r.message=""}),2e3)}}};r.default=i}).call(this,o("df3c")["default"])}},[["5eaf","common/runtime","common/vendor"]]]);