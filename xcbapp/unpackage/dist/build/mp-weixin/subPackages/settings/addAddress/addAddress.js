(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["subPackages/settings/addAddress/addAddress"],{"117b":function(e,t,n){"use strict";(function(e){var r=n("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n("7eb4")),i=r(n("af34")),c=r(n("ee10")),s=n("789c"),u=n("4860"),o={mixins:[s.myMixin],components:{fegionSelection:function(){n.e("components/fegionSelection/fegionSelection").then(function(){return resolve(n("2bf3"))}.bind(null,n)).catch(n.oe)}},data:function(){return{mapKey:!1,selectedCountry:"china",multiArray:[[],[],[]],area_id:null,multiIndex:[0,0,0],isEdit:!1,formData:{area_id:null,phone:null,phonename:null,address:null,isshow:1},error:{phonename:!1,phone:!1,region:!1,detail:!1},location:{latitude:null,longitude:null},markers:[]}},onLoad:function(t){var n=this;e.getLocation({altitude:!0,isHighAccuracy:!0,highAccuracy:!0,type:"gcj02",success:function(e){n.location.longitude=e.longitude,n.location.latitude=e.latitude-.005,n.mapKey=!0,console.log(n.location),n.markers.push({id:1,longitude:n.location.longitude,latitude:n.location.latitude+.005,iconPath:"../../../static/selectlocation.png",width:30,height:30}),console.log(n.markers)},fail:function(e){console.log(e)}}),this.initializePicker(),JSON.parse(t.isEdit)&&(this.isEdit=!0,this.formData=JSON.parse(t.jsonData))},methods:{selectLocation:function(){var t=this;e.chooseLocation({success:function(e){t.formData.address=e.address},fail:function(e){console.log(e)}})},fetchCities:function(e){var t=this;return(0,c.default)(a.default.mark((function n(){var r;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,u.api.citytree(e);case 3:if(r=n.sent,200!==r.code||!Array.isArray(r.data)){n.next=9;break}return t.cityList=r.data,n.abrupt("return",r.data);case 9:return console.error("No cities data found"),n.abrupt("return",[]);case 11:n.next=17;break;case 13:return n.prev=13,n.t0=n["catch"](0),console.error("Failed to fetch cities:",n.t0),n.abrupt("return",[]);case 17:case"end":return n.stop()}}),n,null,[[0,13]])})))()},fetchAreas:function(e){var t=this;return(0,c.default)(a.default.mark((function n(){var r;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,u.api.citytree(e);case 3:if(r=n.sent,200!==r.code||!Array.isArray(r.data)){n.next=9;break}return t.districtList=r.data,n.abrupt("return",r.data);case 9:return console.error("No areas data found"),n.abrupt("return",[]);case 11:n.next=17;break;case 13:return n.prev=13,n.t0=n["catch"](0),console.error("Failed to fetch areas:",n.t0),n.abrupt("return",[]);case 17:case"end":return n.stop()}}),n,null,[[0,13]])})))()},fetchMarkets:function(e){var t=this;return(0,c.default)(a.default.mark((function n(){var r;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,100,n.next=4,u.api.marketlist(e,100);case 4:r=n.sent,200===r.code&&Array.isArray(r.data.listdata)?(t.marketList=r.data.listdata.map((function(e){return e.marketname})),t.marketIdMap=r.data.listdata.reduce((function(e,t){return e[t.marketname]=t.id,e}),{})):(console.error("No market data found"),t.marketList=[],t.marketIdMap={}),n.next=13;break;case 8:n.prev=8,n.t0=n["catch"](0),console.error("Failed to fetch markets:",n.t0),t.marketList=[],t.marketIdMap={};case 13:case"end":return n.stop()}}),n,null,[[0,8]])})))()},fetchProvinces:function(){var e=this;return(0,c.default)(a.default.mark((function t(){var n;return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.api.citylist({level:1,limit:100});case 3:if(n=t.sent,200!==n.code){t.next=7;break}return e.provinceList=n.data.listdata,t.abrupt("return",e.provinceList);case 7:throw new Error("Failed to fetch provinces");case 10:throw t.prev=10,t.t0=t["catch"](0),console.error("Failed to fetch provinces:",t.t0),t.t0;case 14:case"end":return t.stop()}}),t,null,[[0,10]])})))()},bindMultiPickerChange:function(e){var t=this;return(0,c.default)(a.default.mark((function n(){var r,i,c,s,u,o,l,d;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.multiIndex=e.detail.value,"china"!==t.selectedCountry){n.next=12;break}if(i=t.multiIndex[1],c=(null===(r=t.cityList[i])||void 0===r?void 0:r.id)||null,!c){n.next=10;break}return n.next=7,t.fetchAreas(c);case 7:return t.area_id=(null===(s=t.districtList[t.multiIndex[2]])||void 0===s?void 0:s.id)||null,n.next=10,t.fetchMarkets(t.area_id);case 10:n.next=20;break;case 12:if("overseas"!==t.selectedCountry){n.next=20;break}if(o=t.multiIndex[0],t.overseasCountryId=(null===(u=t.overseasCountries[o])||void 0===u?void 0:u.id)||null,l=t.multiIndex[1],!t.overseasCountryId){n.next=20;break}return n.next=19,t.fetchOverseasCities(t.overseasCountryId);case 19:t.overseasCityId=(null===(d=t.overseasCities[l])||void 0===d?void 0:d.id)||null;case 20:case"end":return n.stop()}}),n)})))()},initializePicker:function(){var e=this;return(0,c.default)(a.default.mark((function t(){var n,r,i,c;return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,"china"!==e.selectedCountry){t.next=19;break}return t.next=4,e.fetchProvinces();case 4:if(n=t.sent,e.multiArray[0]=n.map((function(e){return e.name})),!(n.length>0)){t.next=16;break}return t.next=9,e.fetchCities(n[0].id);case 9:if(r=t.sent,e.multiArray[1]=r.map((function(e){return e.name})),!(r.length>0)){t.next=16;break}return t.next=14,e.fetchAreas(2);case 14:i=t.sent,e.multiArray[2]=i.map((function(e){return e.name}));case 16:e.multiIndex=[0,0,0],t.next=27;break;case 19:if("overseas"!==e.selectedCountry){t.next=27;break}return t.next=22,e.fetchOverseas();case 22:c=t.sent,e.multiArray[0]=c.map((function(e){return e.shortname})),e.multiArray[1]=[],e.multiArray[2]=[],e.multiIndex=[0,0,0];case 27:t.next=32;break;case 29:t.prev=29,t.t0=t["catch"](0),console.error("Failed to initialize picker:",t.t0);case 32:e.fetchMarkets(2313),e.selectedMarketIndex=1;case 34:case"end":return t.stop()}}),t,null,[[0,29]])})))()},bindMultiPickerColumnChange:function(e){var t=this;return(0,c.default)(a.default.mark((function n(){var r,c,s,u,o,l,d,f;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.detail.column,c=e.detail.value,"china"!==t.selectedCountry){n.next=35;break}if(0!==r){n.next=22;break}if(s=t.provinceList[c],!s||void 0===s.id){n.next=18;break}return n.next=8,t.fetchCities(s.id);case 8:if(u=n.sent,t.multiArray[1]=u.map((function(e){return e.name})),!(u.length>0)){n.next=17;break}return n.next=13,t.fetchAreas(u[0].id);case 13:o=n.sent,t.multiArray[2]=o.map((function(e){return e.name})),n.next=18;break;case 17:t.multiArray[2]=[];case 18:t.multiIndex[1]=0,t.multiIndex[2]=0,n.next=33;break;case 22:if(1!==r){n.next=33;break}if(l=t.cityList[c],!l||void 0===l.id){n.next=31;break}return n.next=27,t.fetchAreas(l.id);case 27:d=n.sent,t.multiArray[2]=d.map((function(e){return e.name})),n.next=32;break;case 31:t.multiArray[2]=[];case 32:t.multiIndex[2]=0;case 33:n.next=47;break;case 35:if("overseas"!==t.selectedCountry){n.next=47;break}if(0!==r){n.next=46;break}if(f=t.overseasCountries[c],!f||void 0===f.id){n.next=41;break}return n.next=41,t.fetchOverseasCities(f.id);case 41:t.multiArray[2]=[],t.multiIndex[1]=0,t.multiIndex[2]=0,n.next=47;break;case 46:1===r&&(t.multiArray[2]=[],t.multiIndex[2]=0);case 47:t.multiIndex[r]=c,t.multiIndex=(0,i.default)(t.multiIndex);case 49:case"end":return n.stop()}}),n)})))()},toggleDefault:function(e){this.formData.isshow=e.detail.value?2:1},validateForm:function(){},handleSubmit:function(){var t=this;return(0,c.default)(a.default.mark((function n(){var r;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=null,t.formData.area_id=t.area_id,t.isEdit){n.next=8;break}return n.next=5,u.api.addMyAddress(t.formData);case 5:r=n.sent,n.next=11;break;case 8:return n.next=10,u.api.editMyAddress(t.formData);case 10:r=n.sent;case 11:200==r.code?e.showToast({title:"保存成功",icon:"success",success:function(){setTimeout((function(){t.customizeBack()}),1500)}}):e.showToast({title:"请求异常",icon:"error",success:function(){setTimeout((function(){t.customizeBack()}),1500)}});case 12:case"end":return n.stop()}}),n)})))()}}};t.default=o}).call(this,n("df3c")["default"])},"190b":function(e,t,n){"use strict";n.r(t);var r=n("117b"),a=n.n(r);for(var i in r)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t["default"]=a.a},2252:function(e,t,n){"use strict";var r=n("9b9f"),a=n.n(r);a.a},"821b":function(e,t,n){"use strict";(function(e,t){var r=n("47a9");n("89ee");r(n("3240"));var a=r(n("fa2e"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(a.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])},"88b2":function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){}));var r=function(){var e=this.$createElement;this._self._c},a=[]},"9b9f":function(e,t,n){},fa2e:function(e,t,n){"use strict";n.r(t);var r=n("88b2"),a=n("190b");for(var i in a)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(i);n("2252");var c=n("828b"),s=Object(c["a"])(a["default"],r["b"],r["c"],!1,null,"330082ed",null,!1,r["a"],void 0);t["default"]=s.exports}},[["821b","common/runtime","common/vendor"]]]);