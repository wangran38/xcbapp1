(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["subPackages/shoppingPageList/villageZone/villageZone"],{1925:function(e,t,n){"use strict";n.r(t);var a=n("203a"),o=n.n(a);for(var i in a)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(i);t["default"]=o.a},"203a":function(e,t,n){"use strict";(function(e){var a=n("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n("7eb4")),i=a(n("7ca3")),r=a(n("af34")),s=a(n("ee10")),c=n("4860"),u=n("789c");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f={mixins:[u.myMixin],data:function(){return{distances:[{label:"离我最近",value:""},{label:"离我最远",value:""}],pricesort:[{label:"价格最高",value:""},{label:"价格最少",value:""}],selectedCategoryIndex:0,selectedCategoryId:0,activeCategory:0,categories:[],goodsData:[],cartCount:0,queryData:{category_id:null,goodsname:null,page:1,limit:5},isLoading:!1,isRefreshing:!1,noMore:!1,isRefresh:null}},onLoad:function(){this.getGoodsData(),this.fetchCategories()},methods:{intiQuery:function(){this.queryData={category_id:null,goodsname:null,page:1,limit:5}},startSearch:function(){this.queryData.category_id=null,this.noMore=!1,this.goodsData=[],this.getGoodsData()},stopSearch:function(){this.noMore=!1,this.goodsData=[],this.intiQuery(),this.getGoodsData()},goToDynamics:function(t){console.log(t),e.navigateTo({url:"/pages/dynamics/dynamics?id=".concat(t.id)})},switchClass:function(e){console.log(e),this.selectedCategoryId=e,this.goodsData=[],this.noMore=!1,this.intiQuery(),this.queryData.category_id=this.categories[e].id,this.getGoodsData()},fetchCategories:function(){var e=this;return(0,s.default)(o.default.mark((function t(){var n;return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,c.api.cglist();case 2:n=t.sent,console.log(n),e.categories=[{title:"全部"}].concat((0,r.default)(n.data.listdata));case 5:case"end":return t.stop()}}),t)})))()},getGoodsData:function(){var e=arguments,t=this;return(0,s.default)(o.default.mark((function n(){var a,i,s,u,l;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=e.length>0&&void 0!==e[0]&&e[0],!(t.isLoading||!a&&t.noMore)){n.next=3;break}return n.abrupt("return");case 3:return t.isLoading=!0,n.prev=4,n.next=7,c.api.presaleList(t.queryData);case 7:i=n.sent,s=i.code,u=i.data,200===s&&(l=u.listdata.map((function(e){return d(d({},e),{},{goodsname:e.goodsname||"新品预售",imglogo:e.imglogo||"/static/default-goods.png",presaleprice:e.presaleprice||10,price:e.price||0,sold:e.sold||1,unit:e.unit||"件",organic:!!e.organic})})),t.goodsData=[].concat((0,r.default)(t.goodsData),(0,r.default)(l)),t.noMore=l.length<t.queryData.limit);case 11:return n.prev=11,t.isLoading=!1,t.isRefreshing=!1,n.finish(11);case 15:case"end":return n.stop()}}),n,null,[[4,,11,15]])})))()},particleStyle:function(e){return 1},calcDiscount:function(e){return(e.price/e.presaleprice*10).toFixed(1)},addToCart:function(t){e.navigateTo({url:"/subPackages/shoppingPageList/prePurchaseDeposit/prePurchaseDeposit?query=".concat(JSON.stringify(t))})},loadMore:function(){this.noMore||(this.queryData.page++,this.getGoodsData())},gotoCart:function(){e.navigateTo({url:"/pages/cart/index"})}}};t.default=f}).call(this,n("df3c")["default"])},4754:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return a}));var a={uniIcons:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-icons/components/uni-icons/uni-icons")]).then(n.bind(null,"a7f4"))},uniLoadMore:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-load-more/components/uni-load-more/uni-load-more")]).then(n.bind(null,"09c9"))}},o=function(){var e=this,t=e.$createElement,n=(e._self._c,e.__map(e.goodsData,(function(t,n){var a=e.__get_orig(t),o=t.goodstotal>0?Math.min(t.selltotal/t.goodstotal*100,100):null,i=e.calcDiscount(t),r=e.initDate(t.sellbegintime);return{$orig:a,g0:o,m0:i,m1:r}})));e.$mp.data=Object.assign({},{$root:{l0:n}})},i=[]},5074:function(e,t,n){"use strict";n.r(t);var a=n("4754"),o=n("1925");for(var i in o)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(i);n("8508");var r=n("828b"),s=Object(r["a"])(o["default"],a["b"],a["c"],!1,null,"13b6a6be",null,!1,a["a"],void 0);t["default"]=s.exports},6031:function(e,t,n){},8508:function(e,t,n){"use strict";var a=n("6031"),o=n.n(a);o.a},8641:function(e,t,n){"use strict";(function(e,t){var a=n("47a9");n("89ee");a(n("3240"));var o=a(n("5074"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(o.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])}},[["8641","common/runtime","common/vendor"]]]);