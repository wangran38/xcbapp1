<view class="container data-v-bffc4aa6"><view class="carousel-container data-v-bffc4aa6"><swiper class="product-swiper data-v-bffc4aa6" indicator-dots="{{true}}" autoplay="{{true}}" interval="3000" duration="500" circular="{{true}}" data-event-opts="{{[['change',[['onSwiperChange',['$event']]]]]}}" bindchange="__e"><block wx:for="{{productImages}}" wx:for-item="img" wx:for-index="index" wx:key="index"><swiper-item class="data-v-bffc4aa6"><image class="carousel-image data-v-bffc4aa6" src="{{img}}" mode="aspectFill"></image></swiper-item></block></swiper><view class="carousel-counter data-v-bffc4aa6">{{''+(currentSwiperIndex+1)+"/"+$root.g0+''}}</view></view><view class="product-base-info data-v-bffc4aa6"><text class="product-name data-v-bffc4aa6">{{product.goodsname||'未命名商品'}}</text><view class="price-section data-v-bffc4aa6"><text class="current-price data-v-bffc4aa6">{{"¥"+(product.price||0)}}</text><block wx:if="{{product.originalPrice}}"><text class="original-price data-v-bffc4aa6">{{"¥"+product.originalPrice}}</text></block><text class="product-unit data-v-bffc4aa6">{{product.unit}}</text><view class="sales-volume data-v-bffc4aa6">{{"已售 "+(product.sales||0)+" 件"}}</view></view></view><view data-event-opts="{{[['tap',[['e0',['$event']]]]]}}" class="traceability-card data-v-bffc4aa6" bindtap="__e"><view class="traceability-header data-v-bffc4aa6"><text class="trace-title data-v-bffc4aa6">基础信息</text><uni-icons vue-id="20d6d721-1" type="right" size="16" color="#999" class="data-v-bffc4aa6" bind:__l="__l"></uni-icons></view><view class="trace-content data-v-bffc4aa6"><view class="detail-text data-v-bffc4aa6">{{''+(product.content||'暂无信息')+''}}</view></view></view><view class="detail-panel data-v-bffc4aa6"><view data-event-opts="{{[['tap',[['toggleDetail',['$event']]]]]}}" class="panel-header data-v-bffc4aa6" bindtap="__e"><text class="panel-title data-v-bffc4aa6">溯源信息</text><uni-icons class="{{['data-v-bffc4aa6',(showDetail)?'rotate':'']}}" vue-id="20d6d721-2" type="down" size="18" color="#999" bind:__l="__l"></uni-icons></view><block wx:if="{{showDetail}}"><view class="panel-content data-v-bffc4aa6"><view class="detail-text data-v-bffc4aa6">{{''+(product.fromcontent||'暂无信息')+''}}</view></view></block></view><view class="purchase-card data-v-bffc4aa6"><view class="form-group quantity-group data-v-bffc4aa6"><text class="form-label data-v-bffc4aa6">购买数量</text><view class="quantity-selector data-v-bffc4aa6"><button data-event-opts="{{[['tap',[['minusGoods_num',['$event']]]]]}}" class="{{['quantity-btn','minus','data-v-bffc4aa6',(fromData.goods_num<=1)?'disabled':'']}}" bindtap="__e"><uni-icons vue-id="20d6d721-3" type="minus" size="20" class="data-v-bffc4aa6" bind:__l="__l"></uni-icons></button><input class="quantity-input data-v-bffc4aa6" type="digit" placeholder="请输入数量" data-event-opts="{{[['input',[['__set_model',['$0','goods_num','$event',[]],['fromData']],['onKeyInput',['$event']]]]]}}" value="{{fromData.goods_num}}" bindinput="__e"/><button data-event-opts="{{[['tap',[['addGoods_num',['$event']]]]]}}" class="quantity-btn plus data-v-bffc4aa6" bindtap="__e"><uni-icons vue-id="20d6d721-4" type="plus" size="20" class="data-v-bffc4aa6" bind:__l="__l"></uni-icons></button></view></view></view><view class="rules-card data-v-bffc4aa6"><text class="section-title data-v-bffc4aa6">预售规则</text><view class="rules-list data-v-bffc4aa6"><block wx:for="{{shortRules}}" wx:for-item="rule" wx:for-index="index" wx:key="index"><view class="rule-item data-v-bffc4aa6"><uni-icons class="rule-icon data-v-bffc4aa6" vue-id="{{'20d6d721-5-'+index}}" type="circle" size="12" color="#1890FF" bind:__l="__l"></uni-icons><text class="rule-text data-v-bffc4aa6">{{rule}}</text></view></block><view data-event-opts="{{[['tap',[['e1',['$event']]]]]}}" class="view-more data-v-bffc4aa6" bindtap="__e"><text class="data-v-bffc4aa6">查看全部规则</text><uni-icons vue-id="20d6d721-6" type="right" size="14" color="#1890FF" class="data-v-bffc4aa6" bind:__l="__l"></uni-icons></view></view></view><view class="footer data-v-bffc4aa6"><view class="total-info data-v-bffc4aa6"><text class="total-label data-v-bffc4aa6">总计：</text><text class="total-amount data-v-bffc4aa6">{{"¥"+$root.g1}}</text></view><button class="submit-btn data-v-bffc4aa6" disabled="{{!selectedPoint}}" data-event-opts="{{[['tap',[['handleSubmit',['$event']]]]]}}" bindtap="__e">立即预订</button></view><uni-popup bind:input="__e" class="trace-popup data-v-bffc4aa6" vue-id="20d6d721-7" mode="bottom" value="{{showTraceability}}" data-event-opts="{{[['^input',[['__set_model',['','showTraceability','$event',[]]]]]]}}" bind:__l="__l" vue-slots="{{['default']}}"><view class="popup-header data-v-bffc4aa6"><text class="popup-title data-v-bffc4aa6">商品全程溯源</text><uni-icons vue-id="{{('20d6d721-8')+','+('20d6d721-7')}}" type="close" size="22" color="#999" data-event-opts="{{[['^click',[['e2']]]]}}" bind:click="__e" class="data-v-bffc4aa6" bind:__l="__l"></uni-icons></view><view class="trace-detail data-v-bffc4aa6"><view class="trace-qrcode data-v-bffc4aa6"><image src="/static/images/trace-qrcode.png" mode="widthFix" class="data-v-bffc4aa6"></image><text class="data-v-bffc4aa6">扫码查看完整溯源信息</text></view><view class="trace-process data-v-bffc4aa6"><text class="process-title data-v-bffc4aa6">生长周期</text><view class="process-steps data-v-bffc4aa6"><view class="process-step active data-v-bffc4aa6"><view class="step-dot data-v-bffc4aa6"></view><view class="step-line data-v-bffc4aa6"></view><view class="step-info data-v-bffc4aa6"><text class="step-time data-v-bffc4aa6">3月15日</text><text class="step-desc data-v-bffc4aa6">播种育苗</text></view></view><view class="process-step active data-v-bffc4aa6"><view class="step-dot data-v-bffc4aa6"></view><view class="step-line data-v-bffc4aa6"></view><view class="step-info data-v-bffc4aa6"><text class="step-time data-v-bffc4aa6">5月20日</text><text class="step-desc data-v-bffc4aa6">开花结果</text></view></view><view class="process-step active data-v-bffc4aa6"><view class="step-dot data-v-bffc4aa6"></view><view class="step-line data-v-bffc4aa6"></view><view class="step-info data-v-bffc4aa6"><text class="step-time data-v-bffc4aa6">6月30日</text><text class="step-desc data-v-bffc4aa6">成熟采收</text></view></view><view class="process-step active data-v-bffc4aa6"><view class="step-dot data-v-bffc4aa6"></view><view class="step-info data-v-bffc4aa6"><text class="step-time data-v-bffc4aa6">7月1日</text><text class="step-desc data-v-bffc4aa6">质检包装</text></view></view></view></view><view class="farmer-info data-v-bffc4aa6"><text class="farmer-title data-v-bffc4aa6">生产者信息</text><view class="farmer-card data-v-bffc4aa6"><image class="farmer-avatar data-v-bffc4aa6" src="/static/images/farmer-avatar.png" mode="widthFix"></image><view class="farmer-details data-v-bffc4aa6"><text class="farmer-name data-v-bffc4aa6">{{product.trace&&product.trace.farmer||'张建国'}}</text><text class="farmer-cert data-v-bffc4aa6">已认证种植户</text><text class="farmer-experience data-v-bffc4aa6">15年种植经验 | 绿色种植认证</text></view><view class="verify-tag data-v-bffc4aa6"><uni-icons vue-id="{{('20d6d721-9')+','+('20d6d721-7')}}" type="verified" size="18" color="#1890FF" class="data-v-bffc4aa6" bind:__l="__l"></uni-icons><text class="data-v-bffc4aa6">已实名认证</text></view></view></view></view></uni-popup><uni-popup bind:input="__e" class="rules-popup data-v-bffc4aa6" vue-id="20d6d721-10" mode="center" value="{{showFullRules}}" data-event-opts="{{[['^input',[['__set_model',['','showFullRules','$event',[]]]]]]}}" bind:__l="__l" vue-slots="{{['default']}}"><view class="rules-popup-header data-v-bffc4aa6"><text class="data-v-bffc4aa6">预售规则详情</text><uni-icons vue-id="{{('20d6d721-11')+','+('20d6d721-10')}}" type="close" size="22" color="#999" data-event-opts="{{[['^click',[['e3']]]]}}" bind:click="__e" class="data-v-bffc4aa6" bind:__l="__l"></uni-icons></view><view class="rules-popup-content data-v-bffc4aa6"><block wx:for="{{fullRules}}" wx:for-item="rule" wx:for-index="index" wx:key="index"><view class="full-rule-item data-v-bffc4aa6"><text class="rule-number data-v-bffc4aa6">{{index+1+"."}}</text><text class="rule-content data-v-bffc4aa6">{{rule}}</text></view></block></view></uni-popup></view>